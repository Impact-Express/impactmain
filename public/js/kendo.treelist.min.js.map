{"version":3,"sources":["kendo.treelist.js"],"names":["f","define","$","undefined","is","field","object","not","func","isCellVisible","this","style","display","sortCells","cells","indexAttr","kendo","attr","sort","a","b","indexA","indexB","index","parseInt","leafDataCells","container","rows","find","filter","el","hasClass","length","rowSpan","add","last","createPlaceholders","options","i","level","spans","className","push","kendoDomElement","columnsWidth","cols","colWidth","idx","width","indexOf","syncTableHeight","table1","table2","lockedHeigth","tableHeigth","row","diff","offsetHeight","height","isInputElement","element","isLocked","column","parentColumn","locked","findParentColumnWithChildren","columns","source","rtl","target","targetLocked","findReorderTarget","before","masterColumns","parent","parentColumns","sourceIndex","targetIndex","columnParent","inArray","leafColumns","result","concat","getColumnsFields","visibleChildColumns","grep","hidden","isVisible","visibleColumns","normalizeColumns","hide","map","extend","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","parentColumnsCells","cell","parentCellsWithChildren","offset","prevCells","parentCell","closest","headerRows","eq","prevAll","colSpan","Math","max","getAttribute","childColumnsCells","child","value","colSpanAttr","next","parents","columnParents","inserted","splice","children","columnPosition","cellCounts","updateCellIndex","thead","position","allColumns","depth","temp","updateRowSpans","containerDOMtree","each","attributes","rowspan","removeEmptyRows","emptyRows","shouldRemove","remove","focusTable","table","direct","scrollTop","scrollLeft","focusElement","one","e","preventDefault","focus","adjustRowHeight","row1","row2","offsetHeight1","offsetHeight2","isColumnEditable","model","selectable","command","editable","isDirtyColumn","dirty","dirtyFields","isUndefined","isNumber","isNaN","TreeListModel","TreeListDataSource","TreeListPager","Editor","PopupEditor","IncellEditor","TreeList","data","kendoDom","dom","kendoTextElement","text","kendoHtmlElement","html","outerWidth","_outerWidth","keys","outerHeight","_outerHeight","ui","DataBoundWidget","DataSource","ObservableArray","Query","Model","browser","support","kendoTemplate","template","activeElement","_activeElement","isArray","proxy","isPlainObject","Array","prototype","STRING","CHANGE","ITEM_CHANGE","ERROR","PROGRESS","DOT","NS","CLICK","INPUT","MOUSEDOWN","BEFORE_EDIT","EDIT","PAGE","PAGE_CHANGE","SAVE","SAVE_CHANGES","SORT","EXPAND","COLLAPSE","CELL_CLOSE","REMOVE","DATA_CELL","DATABINDING","DATABOUND","CANCEL","TABINDEX","FILTERMENUINIT","FILTERMENUOPEN","COLUMNHIDE","COLUMNSHOW","HEADERCELLS","COLUMNREORDER","COLUMNRESIZE","COLUMNMENUINIT","COLUMNMENUOPEN","COLUMNLOCK","COLUMNUNLOCK","PARENTIDFIELD","DRAGSTART","DRAG","DROP","DRAGEND","NAVROW","NAVCELL","NAVHEADER","NORECORDSCLASS","ITEMROW","FIRSTNAVITEM","LASTITEMROW","isRtl","HEIGHT","INCELL","INLINE","POPUP","TABLE","classNames","wrapper","header","button","alt","editCell","editRow","dirtyCell","group","gridToolbar","gridHeader","gridHeaderWrap","gridContent","gridContentWrap","gridFilter","footerTemplate","focused","loading","refresh","retry","selected","status","link","withIcon","filterable","icon","iconFilter","iconCollapse","iconExpand","iconHidden","iconPlaceHolder","input","dropPositions","dropTop","dropBottom","dropAdd","dropMiddle","dropDenied","dragStatus","dragClue","dragClueText","defaultCommands","create","imageClass","methodName","createchild","destroy","edit","update","canceledit","cancel","save","excel","pdf","search","TreeView","Class","init","that","defaultParentId","idField","parentIdField","childrenMap","dataItem","dataItemId","dataItemParentId","dataLength","_childrenMap","idsMap","_idMap","dataMaps","_dataMaps","ids","rootNodes","removeCollapsedSubtreesFromRootNodes","prunedTree","maxDepth","Infinity","removeCollapsedSubtrees","rootNode","childIdx","expanded","TreeQuery","constructor","process","inPlace","query","filterCallback","skip","take","total","filteredChildrenMap","view","prunedData","normalizeGroup","normalizeSort","toArray","processFromRootNodes","range","id","parentId","fields","type","nullable","fn","call","_loaded","get","accept","set","initiator","loaded","shouldSerialize","base","_getDataMaps","schema","modelBase","_addRange","_createNewModel","fromModel","_modelParentIdField","_isPageable","_shouldWrap","_push","operation","_readData","_getData","_data","newData","toJSON","_replaceData","sourceLength","_readAggregates","_aggregateResult","reader","aggregates","_defaultParentId","read","_modelOptions","_skip","_page","_collapsedTotal","root","_removeChildData","_removeFromDataMaps","removePristine","pageable","_getChildrenMap","items","_subtree","shouldRemovePristine","removedItems","_removeItems","pushDestroy","insert","newModel","_insertInDataMaps","_filterCallback","item","_modelIdField","parentSubtree","_parentNode","unshift","parentNode","len","_observeView","_createTreeView","_initIdsMap","_idsMap","_getIdsMap","_getFilteredChildrenMap","filteredChildren","_setFilteredChildrenMap","_initDataMaps","_initChildrenMapForParent","_defaultTreeModelOptions","modelOptions","_defaultDataItemType","ObservableObject","_calculateAggregates","subtree","pageableChildrenMap","aggregate","_queryProcess","hasLoadedChildren","_processPageableQuery","hasChildren","slice","_processTreeQuery","_replaceWithObservedData","_processDataItemsState","_replaceItemsInDataMaps","dataToAggregate","_dataToAggregate","_replaceInMapWithObservedData","firstDataItem","firstItemParents","_parentNodes","observableArray","directParent","viewIndex","itemType","_insertInIdsMap","_replaceInMap","replacement","itemInArray","itemIndex","dataToReplace","replacementArray","itemToReplace","itemToReplaceId","dataItemIndex","observableItem","_getById","at","key","_insertInChildrenMap","itemId","_removeFromIdsMap","_removeFromChildrenMap","_indexInChildrenMap","_itemIndexInMap","dataMap","uid","_isLastItemInView","_defaultPageableQueryOptions","page","pageSize","serverPaging","_updateTotalForAction","action","_updateCollapsedTotalForAction","_calculateCollapsedTotal","_setFilterTotal","filterTotal","setDefaultValue","_setFilterCollapsedTotal","serverFiltering","collapsedTotal","_dataWithoutCollapsedSubtrees","_removeCollapsedSubtrees","_processDataItemState","_queueRequest","callback","_modelLoaded","childNodes","_modelError","_error","success","requestParams","_observe","_total","load","method","remote","serverSorting","serverGrouping","serverAggregates","defaultPromise","Deferred","resolve","promise","done","fail","contains","rootId","_byParentId","defaultId","current","defaults","_rootNode","_pageableRootNodes","nodesWithoutParentInView","node","_nodesWithoutParentInView","_parentNodesNotInView","parentInView","_parentInView","_pageableModelLevel","baseFilter","_pageableQueryOptions","_flatData","cancelChanges","_restorePageSizeAfterAddChild","_modelCanceled","_changesCanceled","_setAddChildPageSize","queryOptions","_addChildPageSize","_query","sync","then","_syncEnd","Pager","name","totalPages","dataSource","_filter","ceil","_createDataSource","Observable","bind","events","_fields","_initContainer","createEditable","Editable","clearContainer","change","_isEditable","format","editor","end","close","empty","removeAttr","_attachHandlers","cycleForm","open","window","modal","resizable","draggable","title","visible","formContent","append","_appendTemplate","_appendFields","_appendButtons","Tree","render","appendTo","Window","form","unescape","class","fieldRenderer","commandRenderer","closeHandler","_cancelProxy","_cancel","on","_saveProxy","_save","userTriggered","_detachHandlers","off","trigger","center","_dataSource","_aria","_columns","_layout","_navigatable","_selectable","_sortable","_resizable","_filterable","_attachEvents","_toolbar","_scrollable","_reorderable","_columnMenu","_minScreenSupport","_draggable","_pageable","autoBind","fetch","_hasLockedColumns","widget","addClass","_resizeHandler","resize","notify","move","_dragging","HierarchicalDragAndDrop","$angular","autoScroll","itemSelector","allowedContainers","hintText","separator","join","destination","dest","src","itemFromTarget","tr","content","dragstart","drag","drop","removeClass","dragend","isPrevented","originalSrcParentId","originalSrcIndex","reorderable","dropHintContainer","dropPositionFrom","dropHint","itemFor","tbody","_itemFor","lockedContent","lockedTable","scrollables","touchScroller","scrollable","_wheelScroll","movable","_touchScroller","sender","x","y","delta","lockedDiv","ctrlKey","wheelDeltaY","currentTarget","scrollHeight","clientHeight","_progress","messages","_showStatus","_render","error","isCurrentInHeader","currentIndex","_cancelEditor","_adjustHeight","navigatable","_isActiveInTable","cellIndex","_restoreCurrent","_angularFooters","footer","allAggregates","footerRows","_footerItems","_angularFooter","angular","elements","col","_items","dataItems","n","tmp","_showNoRecordsTemplate","defaultTemplate","scrollableNoGridHeightStyles","_contentTree","_lockedContentTree","noRows","insertAfter","message","_hideStatus","_hideNoRecordsTempalte","show","isHeightSet","contentWrap","toolbar","pagerHeight","pager","scrollbar","css","initialHeight","newHeight","offsetWidth","clientWidth","_resize","size","force","_applyLockedContainersWidth","any","hideMinScreenCols","minScreenResizeHandler","_iterateMinScreenCols","screenWidth","minWidth","minScreenWidth","hideColumn","showColumn","innerWidth","screen","unbind","_refreshHandler","_errorHandler","_progressHandler","_navigatableTables","_current","_draggableInstance","_destroyEditor","_destroyPager","_autoExpandable","_dataSourceFetchProxy","lockedHeader","_statusTree","_headerTree","_lockedHeaderColsTree","_lockedContentColsTree","_lockedHeaderTree","sortable","columnMenu","requestFailed","commands","hierarchy","_toggle","expand","afterModelLoaded","_toggleData","_syncLockedContentHeight","_isIncellEditable","closeCell","always","_togglePageableData","_renderProgress","_refreshPager","collapse","_toggleChildren","event","tables","headerTables","touch","_tableClick","_tableFocus","_tableBlur","_tableKeyDown","td","lockedColumnOffset","active","rowIndex","newCurrent","_updateCurrentAttr","_scrollCurrent","_lastCellIndex","_setCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","_scrollTo","_relatedRow","_findCurrentCell","elementToLowercase","tagName","toLowerCase","isHorizontal","elementOffsetDir","containerScroll","containerOffsetDir","elementOffset","abs","offsetLeft","bottomDistance","ieCorrection","firefoxCorrection","msie","edge","mozilla","_elementId","_currentDataIndex","lockedColumnsCount","_prevVerticalCell","_nextVerticalCell","tmpIndex","currentRowCells","hiddenColumns","_verticalContainer","up","step","floor","headerId","replace","handled","canHandle","isDefaultPrevented","keyCode","UP","_moveUp","shiftKey","DOWN","_moveDown","LEFT","RIGHT","altKey","_handleExpand","_moveRight","_handleCollapse","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","HOME","_handleHome","END","_handleEnd","TAB","_handleTabKey","stopPropagation","ctrl","prev","rowContainer","isInLockedTable","isInBody","currentTable","blur","cancelRow","first","version","document","body","has","focusable","click","_handleEditing","incellEditing","_tabNext","_preventPageSizeRestore","back","switchRow","nextAll","editContainer","isEdited","editedCell","isIE","nextFocusableCellRowIndex","nextFocusableCellIndex","currentFocusedCellRowIndex","currentFocusedCellIndex","opera","triggerHandler","saveRow","isHeader","headerTable","isInput","setTimeout","_setTabIndex","icons","retryButton","_commandClick","_search","_attachCellEditingEventHandlers","multiple","relatedTarget","isLockedCell","clearTimeout","_closeCellTimeout","_commandByName","j","currentName","commandName","parentsUntil","_searchTimeOut","searchFields","expression","filters","logic","operator","_ensureExpandableColumn","expandableColumns","expandable","lockedCols","encoded","_columnTemplates","_columnAttributes","headerTemplate","convertStyle","properties","declaration","split","trim","camelCase","headerAttributes","_clearSortClasses","layout","addBack","_initVirtualTrees","_renderCols","_renderHeader","_headerColsTree","_contentColsTree","buttons","_buildCommands","_lockedColumns","_nonLockedColumns","_templateColumns","_flushCache","maps","uidAttr","viewChildrenMap","_renderOptions","_dataToRender","_renderedModelLevel","select","_","_absoluteIndex","_angularItems","_clearRenderMap","buttonClass","_viewChildrenMap","_trs","editedColumn","editedColumnIndex","contentResized","_muteAngularRebind","_togglePagerVisibility","_setExpanderElement","expander","hiddenDivClass","hiddenDiv","toggle","progress","parentsNotInView","parentNotInView","parentNotInViewId","childId","parentsCopy","parentIndex","_markNodeAsNonRenderable","_skipRenderingMap","nodeId","_adjustRowsHeight","rows2","containers","containersLength","heights","_ths","cellClasses","headerContent","ths","href","data-field","data-title","role","_cols","_clearColsCache","_retrieveFirstColumn","_updateFirstColumnClass","_updateRowSpans","included","_setColumnDataIndexes","_updateColumnCellIndex","_setParentsVisibility","predicate","p","_prepareColumns","parentRow","childRow","totalColSpan","_renderHeaderTree","tree","hasMultiColumnHeaders","rowsToRender","_syncLockedHeaderHeight","lockedWidth","nonLockedWidth","wrapperWidth","modelId","_edit","_tds","_td","_hasFooterTemplate","data-parentId","_footerId","noop","c","renderer","editedColumnField","editColumn","iconClass","columnHasEditCommand","_cellContent","dirtyIndicator","_evalDirtyIndicatorTemplate","_evalColumnTemplate","_evalCustomColumnTemplate","templateSettings","_customTemplateSettings","columnTemplateAlias","paramName","templateString","_dirtyIndicatorTemplate","templateFunction","columnTemplate","dirtyIndicatorTemplate","dirtyField","charAt","expr","Template","_handleCommand","_button","data-command","_positionResizeHandle","th","resizeHandle","cellWidth","which","indicatorWidth","columnResizeHandleWidth","left","top","val","autoFitColumn","contentTable","footerTable","oldColumnWidth","newColumnWidth","totalWidth","visibleLocked","oldWidth","newWidth","_adjustLockedHorizontalScrollBar","treelist","Resizable","handle","start","colSelector","startLocation","location","columnWidth","rtlModifier","minColumnWidth","resizeend","sortableInstance","kendoColumnSorter","filterMenuInstance","filterInit","filterOpen","kendoFilterMenu","_change","_isLocked","useAllItems","multi","Selectable","parseOptions","aria","continuousItems","_continuousItems","_selectableTarget","SPACEBAR","clear","_lastActive","selectRange","_firstSelectee","lockedItems","nonLockedItems","apply","related","clearSelection","ds","_sortHandler","setDataSource","getByUid","_isPopupEditable","_editMode","_createEditor","_cancelEdit","args","addRow","inlineEditing","_isInlineEditable","showNewModelInView","_insertAt","_firstEditableColumnIndex","removeRow","_shouldRestorePageSize","mode","leafCols","_createIncellEditor","_editCell","values","isCancel","ns","saveChanges","valid","_toggleColumnVisibility","_findColumn","_adjustTablesWidth","selector","Draggable","guid","hint","prepend","Reorderable","dragOverContainers","_allowDragOverContainers","inSameContainer","oldIndex","newIndex","reorderColumn","lockable","_reorderTrees","destSources","destContainer","destDomTree","sources","sourcesContainer","sourcesDomTree","destDomChildren","destRow","sourcesLeafs","destLeafs","reorderTaget","destThs","sourceDOM","sourceChildren","destColumn","_insertTree","leafs","domTr","_reorderHeader","rowsToAdd","sourcesDepth","targetDepth","sourceLocked","destLocked","destRows","destIndex","lockChanged","nonLockedColumnsLength","lockColumn","unlockColumn","menu","menuOptions","initHandler","_columnMenuInit","openHandler","_columnMenuOpen","lockedColumnsLength","compare","pane","owner","closeCallback","kendoColumnMenu","_createPager","alwaysVisible","ExcelMixin","PDFMixin","_drawPDF","allPages","startingPage","exportPage","doc","treeList","_drawPDFShadow","avoidLinks","pageNum","pageNumber","err","reject","paperSize","_drawPDF_autoPageBreak","_initPDFProgress","drawing","Group","deferred","progressBar","clone","kendoProgressBar","chunkCount","min","draw","cont","_destructive","drawDOM","renderPage","origBody","overflow","paddingRight","plugin","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.treelist.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.treelist', [\n        'kendo.dom',\n        'kendo.data',\n        'kendo.columnsorter',\n        'kendo.editable',\n        'kendo.window',\n        'kendo.filtermenu',\n        'kendo.selectable',\n        'kendo.resizable',\n        'kendo.treeview.draganddrop',\n        'kendo.pager'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'treelist',\n        name: 'TreeList',\n        category: 'web',\n        description: 'The TreeList widget displays self-referencing data and offers rich support for interacting with data, sorting, filtering, and selection.',\n        depends: [\n            'dom',\n            'data',\n            'pager'\n        ],\n        features: [\n            {\n                id: 'treelist-sorting',\n                name: 'Sorting',\n                description: 'Support for column sorting',\n                depends: ['columnsorter']\n            },\n            {\n                id: 'treelist-filtering',\n                name: 'Filtering',\n                description: 'Support for record filtering',\n                depends: ['filtermenu']\n            },\n            {\n                id: 'treelist-editing',\n                name: 'Editing',\n                description: 'Support for record editing',\n                depends: [\n                    'editable',\n                    'window'\n                ]\n            },\n            {\n                id: 'treelist-selection',\n                name: 'Selection',\n                description: 'Support for row selection',\n                depends: ['selectable']\n            },\n            {\n                id: 'treelist-column-resize',\n                name: 'Column resizing',\n                description: 'Support for column resizing',\n                depends: ['resizable']\n            },\n            {\n                id: 'treelist-dragging',\n                name: 'Drag & Drop',\n                description: 'Support for drag & drop of rows',\n                depends: ['treeview.draganddrop']\n            },\n            {\n                id: 'treelist-excel-export',\n                name: 'Excel export',\n                description: 'Export data as Excel spreadsheet',\n                depends: ['excel']\n            },\n            {\n                id: 'treelist-pdf-export',\n                name: 'PDF export',\n                description: 'Export data as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            },\n            {\n                id: 'treelist-paging',\n                name: 'Paging',\n                description: 'Support for treelist paging',\n                depends: ['pager']\n            }\n        ]\n    };\n    (function ($, undefined) {\n        var data = kendo.data;\n        var kendoDom = kendo.dom;\n        var kendoDomElement = kendoDom.element;\n        var kendoTextElement = kendoDom.text;\n        var kendoHtmlElement = kendoDom.html;\n        var outerWidth = kendo._outerWidth;\n        var keys = kendo.keys;\n        var outerHeight = kendo._outerHeight;\n        var ui = kendo.ui;\n        var DataBoundWidget = ui.DataBoundWidget;\n        var DataSource = data.DataSource;\n        var ObservableArray = data.ObservableArray;\n        var Query = data.Query;\n        var Model = data.Model;\n        var browser = kendo.support.browser;\n        var kendoTemplate = kendo.template;\n        var activeElement = kendo._activeElement;\n        var isArray = $.isArray;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var map = $.map;\n        var grep = $.grep;\n        var inArray = $.inArray;\n        var isPlainObject = $.isPlainObject;\n        var push = Array.prototype.push;\n        var STRING = 'string';\n        var CHANGE = 'change';\n        var ITEM_CHANGE = 'itemChange';\n        var ERROR = 'error';\n        var PROGRESS = 'progress';\n        var DOT = '.';\n        var NS = '.kendoTreeList';\n        var CLICK = 'click';\n        var INPUT = 'input';\n        var MOUSEDOWN = 'mousedown';\n        var BEFORE_EDIT = 'beforeEdit';\n        var EDIT = 'edit';\n        var PAGE = 'page';\n        var PAGE_CHANGE = 'pageChange';\n        var SAVE = 'save';\n        var SAVE_CHANGES = 'saveChanges';\n        var SORT = 'sort';\n        var EXPAND = 'expand';\n        var COLLAPSE = 'collapse';\n        var CELL_CLOSE = 'cellClose';\n        var REMOVE = 'remove';\n        var DATA_CELL = 'td:not(.k-group-cell):not(.k-hierarchy-cell):visible';\n        var DATABINDING = 'dataBinding';\n        var DATABOUND = 'dataBound';\n        var CANCEL = 'cancel';\n        var TABINDEX = 'tabIndex';\n        var FILTERMENUINIT = 'filterMenuInit';\n        var FILTERMENUOPEN = 'filterMenuOpen';\n        var COLUMNHIDE = 'columnHide';\n        var COLUMNSHOW = 'columnShow';\n        var HEADERCELLS = 'th.k-header';\n        var COLUMNREORDER = 'columnReorder';\n        var COLUMNRESIZE = 'columnResize';\n        var COLUMNMENUINIT = 'columnMenuInit';\n        var COLUMNMENUOPEN = 'columnMenuOpen';\n        var COLUMNLOCK = 'columnLock';\n        var COLUMNUNLOCK = 'columnUnlock';\n        var PARENTIDFIELD = 'parentId';\n        var DRAGSTART = 'dragstart';\n        var DRAG = 'drag';\n        var DROP = 'drop';\n        var DRAGEND = 'dragend';\n        var NAVROW = 'tr:visible';\n        var NAVCELL = 'td:visible';\n        var NAVHEADER = 'th:visible';\n        var NORECORDSCLASS = 'k-grid-norecords';\n        var ITEMROW = 'tr:not(.k-footer-template):visible';\n        var FIRSTNAVITEM = NAVROW + ' > td:first:visible';\n        var LASTITEMROW = ITEMROW + ':last';\n        var isRtl = false;\n        var HEIGHT = 'height';\n        var INCELL = 'incell';\n        var INLINE = 'inline';\n        var POPUP = 'popup';\n        var TABLE = 'table';\n        var classNames = {\n            wrapper: 'k-treelist k-grid k-widget k-grid-display-block',\n            header: 'k-header',\n            button: 'k-button',\n            alt: 'k-alt',\n            editCell: 'k-edit-cell',\n            editRow: 'k-grid-edit-row',\n            dirtyCell: 'k-dirty-cell',\n            group: 'k-treelist-group',\n            gridToolbar: 'k-grid-toolbar',\n            gridHeader: 'k-grid-header',\n            gridHeaderWrap: 'k-grid-header-wrap',\n            gridContent: 'k-grid-content',\n            gridContentWrap: 'k-grid-content',\n            gridFilter: 'k-grid-filter',\n            footerTemplate: 'k-footer-template',\n            focused: 'k-state-focused',\n            loading: 'k-i-loading',\n            refresh: 'k-i-reload',\n            retry: 'k-request-retry',\n            selected: 'k-state-selected',\n            status: 'k-status',\n            link: 'k-link',\n            withIcon: 'k-with-icon',\n            filterable: 'k-filterable',\n            icon: 'k-icon',\n            iconFilter: 'k-i-filter',\n            iconCollapse: 'k-i-collapse',\n            iconExpand: 'k-i-expand',\n            iconHidden: 'k-i-none',\n            iconPlaceHolder: 'k-icon k-i-none',\n            input: 'k-input',\n            dropPositions: 'k-i-insert-up k-i-insert-down k-i-plus k-i-insert-middle',\n            dropTop: 'k-i-insert-up',\n            dropBottom: 'k-i-insert-down',\n            dropAdd: 'k-i-plus',\n            dropMiddle: 'k-i-insert-middle',\n            dropDenied: 'k-i-cancel',\n            dragStatus: 'k-drag-status',\n            dragClue: 'k-drag-clue',\n            dragClueText: 'k-clue-text'\n        };\n        var defaultCommands = {\n            create: {\n                imageClass: 'k-i-plus',\n                className: 'k-grid-add',\n                methodName: 'addRow'\n            },\n            createchild: {\n                imageClass: 'k-i-plus',\n                className: 'k-grid-add',\n                methodName: 'addRow'\n            },\n            destroy: {\n                imageClass: 'k-i-close',\n                className: 'k-grid-delete',\n                methodName: 'removeRow'\n            },\n            edit: {\n                imageClass: 'k-i-edit',\n                className: 'k-grid-edit',\n                methodName: 'editRow'\n            },\n            update: {\n                imageClass: 'k-i-check',\n                className: 'k-primary k-grid-update',\n                methodName: 'saveRow'\n            },\n            canceledit: {\n                imageClass: 'k-i-cancel',\n                className: 'k-grid-cancel',\n                methodName: '_cancelEdit'\n            },\n            cancel: {\n                imageClass: 'k-icon k-i-cancel',\n                text: 'Cancel changes',\n                className: 'k-grid-cancel-changes',\n                methodName: 'cancelChanges'\n            },\n            save: {\n                imageClass: 'k-icon k-i-check',\n                text: 'Save changes',\n                className: 'k-grid-save-changes',\n                methodName: 'saveChanges'\n            },\n            excel: {\n                imageClass: 'k-i-file-excel',\n                className: 'k-grid-excel',\n                methodName: 'saveAsExcel'\n            },\n            pdf: {\n                imageClass: 'k-i-file-pdf',\n                className: 'k-grid-pdf',\n                methodName: 'saveAsPDF'\n            },\n            search: { template: '<span class=\\'k-textbox k-grid-search k-display-flex\\'>' + '<input autocomplete=\\'off\\' placeholder=\\'' + '#= messages.search #' + '\\' title=\\'' + '#= messages.search #' + '\\' class=\\'k-input\\' />' + '<span class=\\'k-input-icon\\'><span class=\\'k-icon k-i-search\\'></span></span>' + '</span>' }\n        };\n        var TreeView = kendo.Class.extend({\n            init: function (data, options) {\n                var that = this;\n                that.data = data || [];\n                that.options = extend(that.options, options);\n            },\n            options: {\n                defaultParentId: null,\n                idField: 'id',\n                parentIdField: PARENTIDFIELD\n            },\n            childrenMap: function () {\n                var that = this;\n                var childrenMap = {};\n                var dataLength = that.data.length;\n                var dataItem;\n                var dataItemId;\n                var dataItemParentId;\n                var idField = that.options.idField;\n                var parentIdField = that.options.parentIdField;\n                if (that._childrenMap) {\n                    return that._childrenMap;\n                }\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = this.data[i];\n                    dataItemId = dataItem[idField];\n                    dataItemParentId = dataItem[parentIdField];\n                    childrenMap[dataItemId] = childrenMap[dataItemId] || [];\n                    childrenMap[dataItemParentId] = childrenMap[dataItemParentId] || [];\n                    childrenMap[dataItemParentId].push(dataItem);\n                }\n                that._childrenMap = childrenMap;\n                return childrenMap;\n            },\n            idsMap: function () {\n                var that = this;\n                var idsMap = {};\n                var data = that.data;\n                var dataLength = data.length;\n                var dataItem;\n                var idField = that.options.idField;\n                if (that._idMap) {\n                    return that._idMap;\n                }\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = data[i];\n                    idsMap[dataItem[idField]] = dataItem;\n                }\n                that.idsMap = idsMap;\n                return idsMap;\n            },\n            dataMaps: function () {\n                var that = this;\n                var childrenMap = {};\n                var data = that.data;\n                var dataLength = data.length;\n                var idsMap = {};\n                var dataItem;\n                var dataItemId;\n                var dataItemParentId;\n                var idField = that.options.idField;\n                var parentIdField = that.options.parentIdField;\n                if (that._dataMaps) {\n                    return that._dataMaps;\n                }\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = data[i];\n                    dataItemId = dataItem[idField];\n                    dataItemParentId = dataItem[parentIdField];\n                    idsMap[dataItemId] = dataItem;\n                    childrenMap[dataItemId] = childrenMap[dataItemId] || [];\n                    childrenMap[dataItemParentId] = childrenMap[dataItemParentId] || [];\n                    childrenMap[dataItemParentId].push(dataItem);\n                }\n                that._dataMaps = {\n                    children: childrenMap,\n                    ids: idsMap\n                };\n                return that._dataMaps;\n            },\n            rootNodes: function () {\n                var that = this;\n                var data = that.data;\n                var defaultParentId = that.options.defaultParentId;\n                var dataLength = data.length;\n                var rootNodes = [];\n                var dataItem;\n                var parentIdField = that.options.parentIdField;\n                for (var i = 0; i < dataLength; i++) {\n                    dataItem = data[i];\n                    if (dataItem[parentIdField] === defaultParentId) {\n                        rootNodes.push(dataItem);\n                    }\n                }\n                return rootNodes;\n            },\n            removeCollapsedSubtreesFromRootNodes: function (options) {\n                options = options || {};\n                var that = this;\n                var rootNodes = that.rootNodes();\n                var result = [];\n                var prunedTree;\n                that._childrenMap = options.childrenMap = options.childrenMap || that.childrenMap();\n                options.maxDepth = options.maxDepth || Infinity;\n                for (var i = 0; i < rootNodes.length; i++) {\n                    prunedTree = that.removeCollapsedSubtrees(rootNodes[i], options);\n                    result = result.concat(prunedTree);\n                }\n                return result;\n            },\n            removeCollapsedSubtrees: function (rootNode, options) {\n                options = options || {};\n                var that = this;\n                var result = [];\n                var childIdx;\n                var prunedTree;\n                var childrenMap = options.childrenMap || {};\n                var maxDepth = options.maxDepth || Infinity;\n                var idField = that.options.idField;\n                var children = childrenMap[rootNode[idField]] || [];\n                var expanded = isUndefined(rootNode.expanded) ? options.expanded : rootNode.expanded;\n                result.push(rootNode);\n                if (children && expanded) {\n                    for (childIdx = 0; childIdx < children.length; childIdx++) {\n                        if (result.length >= maxDepth) {\n                            break;\n                        }\n                        prunedTree = that.removeCollapsedSubtrees(children[childIdx], options);\n                        result = result.concat(prunedTree);\n                    }\n                }\n                return result;\n            }\n        });\n        var TreeQuery = function (data) {\n            this.data = data || [];\n        };\n        TreeQuery.prototype = new Query();\n        TreeQuery.prototype.constructor = TreeQuery;\n        TreeQuery.process = function (data, options, inPlace) {\n            options = options || {};\n            var query = new TreeQuery(data);\n            var group = options.group;\n            var sort = Query.normalizeGroup(group || []).concat(Query.normalizeSort(options.sort || []));\n            var filterCallback = options.filterCallback;\n            var filter = options.filter;\n            var skip = options.skip;\n            var take = options.take;\n            var total;\n            var childrenMap;\n            var filteredChildrenMap;\n            var view;\n            var prunedData;\n            if (sort && inPlace) {\n                query = query.sort(sort, undefined, undefined, inPlace);\n            }\n            if (filter) {\n                query = query.filter(filter);\n                if (filterCallback) {\n                    query = filterCallback(query);\n                }\n                total = query.toArray().length;\n            }\n            if (sort && !inPlace) {\n                query = query.sort(sort);\n                if (group) {\n                    data = query.toArray();\n                }\n            }\n            if (options.processFromRootNodes) {\n                view = new TreeView(query.toArray(), options);\n                if (filter) {\n                    filteredChildrenMap = view.childrenMap();\n                }\n                prunedData = view.removeCollapsedSubtreesFromRootNodes({\n                    childrenMap: filter || sort && sort.length ? undefined : options.childrenMap,\n                    expanded: options.expanded,\n                    maxDepth: skip + take || Infinity\n                });\n                childrenMap = view.childrenMap();\n                query = new TreeQuery(prunedData);\n            }\n            if (skip !== undefined && take !== undefined) {\n                query = query.range(skip, take);\n            }\n            if (group) {\n                query = query.group(group, data);\n            }\n            return {\n                total: total,\n                data: query.toArray(),\n                childrenMap: childrenMap,\n                filteredChildrenMap: filteredChildrenMap\n            };\n        };\n        var TreeListModel = Model.define({\n            id: 'id',\n            parentId: PARENTIDFIELD,\n            fields: {\n                id: { type: 'number' },\n                parentId: {\n                    type: 'number',\n                    nullable: true\n                }\n            },\n            init: function (value) {\n                Model.fn.init.call(this, value);\n                this._loaded = false;\n                if (!this.parentIdField) {\n                    this.parentIdField = PARENTIDFIELD;\n                }\n                this.parentId = this.get(this.parentIdField);\n            },\n            accept: function (data) {\n                Model.fn.accept.call(this, data);\n                this.parentId = this.get(this.parentIdField);\n            },\n            set: function (field, value, initiator) {\n                if (field == PARENTIDFIELD && this.parentIdField != PARENTIDFIELD) {\n                    this[this.parentIdField] = value;\n                }\n                Model.fn.set.call(this, field, value, initiator);\n                if (field == this.parentIdField) {\n                    this.parentId = this.get(this.parentIdField);\n                }\n            },\n            loaded: function (value) {\n                if (value !== undefined) {\n                    this._loaded = value;\n                } else {\n                    return this._loaded;\n                }\n            },\n            shouldSerialize: function (field) {\n                return Model.fn.shouldSerialize.call(this, field) && field !== '_loaded' && field != '_error' && field != '_edit' && !(this.parentIdField !== 'parentId' && field === 'parentId');\n            }\n        });\n        TreeListModel.parentIdField = PARENTIDFIELD;\n        TreeListModel.define = function (base, options) {\n            if (options === undefined) {\n                options = base;\n                base = TreeListModel;\n            }\n            var parentId = options.parentId || PARENTIDFIELD;\n            options.parentIdField = parentId;\n            var model = Model.define(base, options);\n            if (parentId) {\n                model.parentIdField = parentId;\n            }\n            return model;\n        };\n        function is(field) {\n            return function (object) {\n                return object[field];\n            };\n        }\n        function not(func) {\n            return function (object) {\n                return !func(object);\n            };\n        }\n        var TreeListDataSource = DataSource.extend({\n            init: function (options) {\n                options = options || {};\n                var that = this;\n                that._dataMaps = that._getDataMaps();\n                options.schema = extend(true, {}, {\n                    modelBase: TreeListModel,\n                    model: TreeListModel\n                }, options.schema);\n                DataSource.fn.init.call(this, options);\n            },\n            _addRange: function () {\n            },\n            _createNewModel: function (data) {\n                var that = this;\n                var model = {};\n                var fromModel = data instanceof Model;\n                var parentIdField = this._modelParentIdField();\n                if (fromModel) {\n                    model = data;\n                }\n                model = DataSource.fn._createNewModel.call(this, model);\n                if (!fromModel) {\n                    if (data.parentId) {\n                        data[model.parentIdField] = data.parentId;\n                    } else if (that._isPageable() && data[parentIdField]) {\n                        data[model.parentIdField] = data[parentIdField];\n                    }\n                    model.accept(data);\n                }\n                return model;\n            },\n            _shouldWrap: function () {\n                return true;\n            },\n            _push: function (result, operation) {\n                var data = DataSource.fn._readData.call(this, result);\n                if (!data) {\n                    data = result;\n                }\n                this[operation](data);\n            },\n            _getData: function () {\n                return this._data || [];\n            },\n            _readData: function (newData) {\n                var that = this;\n                var data = that._isPageable() ? that._getData().toJSON() : that.data();\n                newData = DataSource.fn._readData.call(this, newData);\n                this._replaceData((data.toJSON ? data.toJSON() : data).concat(newData), data);\n                if (newData instanceof ObservableArray) {\n                    return newData;\n                }\n                return data;\n            },\n            _replaceData: function (source, target) {\n                var sourceLength = source.length;\n                for (var i = 0; i < sourceLength; i++) {\n                    target[i] = source[i];\n                }\n                target.length = sourceLength;\n            },\n            _readAggregates: function (data) {\n                var result = extend(this._aggregateResult, this.reader.aggregates(data));\n                if ('' in result) {\n                    result[this._defaultParentId()] = result[''];\n                    delete result[''];\n                }\n                return result;\n            },\n            read: function (data) {\n                var that = this;\n                if (that._isPageable()) {\n                    that._dataMaps = {};\n                    if (!that._modelOptions().expanded) {\n                        that._skip = 0;\n                        that._page = 1;\n                        that._collapsedTotal = undefined;\n                    }\n                }\n                return DataSource.fn.read.call(that, data);\n            },\n            remove: function (root) {\n                this._removeChildData(root);\n                this._removeFromDataMaps(root);\n                DataSource.fn.remove.call(this, root);\n            },\n            _removeChildData: function (model, removePristine) {\n                var that = this;\n                var pageable = that._isPageable();\n                var data = pageable ? this._getData() : this.data();\n                var childrenMap = pageable ? that._getChildrenMap() || that.childrenMap(data) : that._childrenMap(data);\n                var items = this._subtree(childrenMap, model.id);\n                var shouldRemovePristine = isUndefined(removePristine) ? false : removePristine;\n                var removedItems = this._removeItems(items, shouldRemovePristine);\n                that._removeFromDataMaps(removedItems);\n            },\n            pushDestroy: function (items) {\n                var that = this;\n                if (!isArray(items)) {\n                    items = [items];\n                }\n                for (var i = 0; i < items.length; i++) {\n                    that._removeChildData(items[i], true);\n                    that._removeFromDataMaps(items[i]);\n                }\n                DataSource.fn.pushDestroy.call(that, items);\n            },\n            insert: function (index, model) {\n                var that = this;\n                var newModel = that._createNewModel(model);\n                that._insertInDataMaps(newModel);\n                return DataSource.fn.insert.call(that, index, newModel);\n            },\n            _filterCallback: function (query) {\n                var that = this;\n                var i, item;\n                var map = {};\n                var result = [];\n                var data = query.toArray();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var pageable = that._isPageable();\n                var parentSubtree = [];\n                var parent;\n                for (i = 0; i < data.length; i++) {\n                    item = data[i];\n                    if (pageable) {\n                        parentSubtree = [];\n                        if (!map[item[idField]]) {\n                            map[item[idField]] = true;\n                            parentSubtree.push(item);\n                        }\n                        parent = that._parentNode(item);\n                        while (parent) {\n                            if (!map[parent[idField]]) {\n                                map[parent[idField]] = true;\n                                parentSubtree.unshift(parent);\n                                parent = that._parentNode(parent);\n                            } else {\n                                break;\n                            }\n                        }\n                        if (parentSubtree.length) {\n                            result = result.concat(parentSubtree);\n                        }\n                    } else {\n                        while (item) {\n                            if (!map[item[idField]]) {\n                                map[item[idField]] = true;\n                                result.push(item);\n                            }\n                            if (!map[item[parentIdField]]) {\n                                map[item[parentIdField]] = true;\n                                item = this.parentNode(item);\n                                if (item) {\n                                    result.push(item);\n                                }\n                            } else {\n                                break;\n                            }\n                        }\n                    }\n                }\n                return new Query(result);\n            },\n            _subtree: function (map, id) {\n                var that = this;\n                var result = map[id] || [];\n                var defaultParentId = that._defaultParentId();\n                var idField = that._modelIdField();\n                for (var i = 0, len = result.length; i < len; i++) {\n                    if (result[i][idField] !== defaultParentId) {\n                        result = result.concat(that._subtree(map, result[i][idField]));\n                    }\n                }\n                return result;\n            },\n            _childrenMap: function (data) {\n                var map = {};\n                var i, item, id, parentId;\n                data = this._observeView(data);\n                for (i = 0; i < data.length; i++) {\n                    item = data[i];\n                    id = item.id;\n                    parentId = item.parentId;\n                    map[id] = map[id] || [];\n                    map[parentId] = map[parentId] || [];\n                    map[parentId].push(item);\n                }\n                return map;\n            },\n            childrenMap: function (data) {\n                var view = this._createTreeView(data);\n                var map = view.childrenMap();\n                return map;\n            },\n            _getChildrenMap: function () {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                return dataMaps.children;\n            },\n            _initIdsMap: function (data) {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                if (isUndefined(dataMaps.ids)) {\n                    dataMaps.ids = that._idsMap(data);\n                }\n                return dataMaps.ids;\n            },\n            _idsMap: function (data) {\n                var view = this._createTreeView(data);\n                var map = view.idsMap();\n                return map;\n            },\n            _getIdsMap: function () {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                return dataMaps.ids || {};\n            },\n            _getFilteredChildrenMap: function () {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                return dataMaps.filteredChildren;\n            },\n            _setFilteredChildrenMap: function (map) {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                dataMaps.filteredChildren = map;\n            },\n            _initDataMaps: function (data) {\n                var that = this;\n                var view = that._createTreeView(data);\n                that._dataMaps = view.dataMaps();\n                return that._dataMaps;\n            },\n            _initChildrenMapForParent: function (parent) {\n                var that = this;\n                var data = that._getData();\n                var childrenMap = that._getChildrenMap();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var parentId = (parent || {})[idField];\n                if (childrenMap && parent) {\n                    childrenMap[parentId] = [];\n                    for (var i = 0; i < data.length; i++) {\n                        if (data[i][parentIdField] === parentId) {\n                            childrenMap[parentId].push(data[i]);\n                        }\n                    }\n                }\n            },\n            _getDataMaps: function () {\n                var that = this;\n                that._dataMaps = that._dataMaps || {};\n                return that._dataMaps;\n            },\n            _createTreeView: function (data, options) {\n                var view = new TreeView(data, extend(options, this._defaultTreeModelOptions()));\n                return view;\n            },\n            _defaultTreeModelOptions: function () {\n                var that = this;\n                var modelOptions = that._modelOptions();\n                return {\n                    defaultParentId: that._defaultParentId(),\n                    idField: that._modelIdField(),\n                    parentIdField: that._modelParentIdField(),\n                    expanded: modelOptions.expanded\n                };\n            },\n            _defaultDataItemType: function () {\n                return this.reader.model || kendo.data.ObservableObject;\n            },\n            _calculateAggregates: function (data, options) {\n                options = options || {};\n                var that = this;\n                var result = {};\n                var item, subtree, i;\n                var filter = options.filter;\n                var skip = options.skip;\n                var take = options.take;\n                var maxDepth = !isUndefined(skip) && !isUndefined(take) ? skip + take : Infinity;\n                var pageable = that._isPageable();\n                var filteredChildrenMap = options.filteredChildrenMap;\n                var childrenMap = options.childrenMap;\n                var pageableChildrenMap;\n                if (pageable) {\n                    if (isUndefined(options.aggregate)) {\n                        return result;\n                    }\n                    if (filteredChildrenMap) {\n                        pageableChildrenMap = filteredChildrenMap;\n                    } else if (childrenMap) {\n                        pageableChildrenMap = childrenMap;\n                    } else {\n                        pageableChildrenMap = that.childrenMap(that._getData());\n                    }\n                }\n                if (!pageable && filter) {\n                    data = Query.process(data, {\n                        filter: filter,\n                        filterCallback: proxy(this._filterCallback, this)\n                    }).data;\n                }\n                var map = pageable ? pageableChildrenMap : that._childrenMap(data);\n                result[this._defaultParentId()] = new Query(this._subtree(map, this._defaultParentId())).aggregate(options.aggregate);\n                for (i = 0; i < data.length; i++) {\n                    if (i >= maxDepth) {\n                        break;\n                    }\n                    item = data[i];\n                    subtree = this._subtree(map, item.id);\n                    result[item.id] = new Query(subtree).aggregate(options.aggregate);\n                }\n                return result;\n            },\n            _queryProcess: function (data, options) {\n                var that = this;\n                var result = {};\n                options = options || {};\n                options.filterCallback = proxy(this._filterCallback, this);\n                if (that._isPageable()) {\n                    return that._processPageableQuery(data, options);\n                } else {\n                    var defaultParentId = this._defaultParentId();\n                    result = Query.process(data, options);\n                    var map = this._childrenMap(result.data);\n                    var hasLoadedChildren, i, item, children;\n                    data = map[defaultParentId] || [];\n                    for (i = 0; i < data.length; i++) {\n                        item = data[i];\n                        if (item.id === defaultParentId) {\n                            continue;\n                        }\n                        children = map[item.id];\n                        hasLoadedChildren = !!(children && children.length);\n                        if (!item.loaded()) {\n                            item.loaded(hasLoadedChildren || !item.hasChildren);\n                        }\n                        if (item.loaded() || item.hasChildren !== true) {\n                            item.hasChildren = hasLoadedChildren;\n                        }\n                        if (hasLoadedChildren) {\n                            data = data.slice(0, i + 1).concat(children, data.slice(i + 1));\n                        }\n                    }\n                    result.data = data;\n                }\n                return result;\n            },\n            _processPageableQuery: function (data, options) {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                var result;\n                var filteredChildrenMap;\n                if (that._getData() !== data || !dataMaps.children || !dataMaps.ids) {\n                    dataMaps = that._initDataMaps(that._getData());\n                }\n                options.childrenMap = dataMaps.children || {};\n                options.idsMap = dataMaps.ids || {};\n                result = that._processTreeQuery(data, options);\n                that._replaceWithObservedData(result.data, data);\n                that._processDataItemsState(result.data, result.childrenMap);\n                that._replaceItemsInDataMaps(result.data);\n                result.dataToAggregate = that._dataToAggregate(result.data, options);\n                if (options.filter) {\n                    filteredChildrenMap = result.filteredChildrenMap;\n                    that._replaceInMapWithObservedData(filteredChildrenMap, data);\n                    that._setFilteredChildrenMap(filteredChildrenMap);\n                    options.filteredChildrenMap = filteredChildrenMap;\n                }\n                return result;\n            },\n            _dataToAggregate: function (data) {\n                var that = this;\n                var firstDataItem = data[0] || {};\n                var firstItemParents = that._parentNodes(firstDataItem);\n                var dataToAggregate = firstItemParents.concat(data);\n                return dataToAggregate;\n            },\n            _replaceItemsInDataMaps: function (observableArray) {\n                var that = this;\n                var view = isArray(observableArray) ? observableArray : [observableArray];\n                var itemType = that._defaultDataItemType();\n                var defaultParentId = that._defaultParentId();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var dataMaps = that._getDataMaps();\n                var item;\n                var parents;\n                var directParent;\n                for (var viewIndex = 0; viewIndex < view.length; viewIndex++) {\n                    item = view[viewIndex];\n                    if (!(item instanceof itemType)) {\n                        continue;\n                    }\n                    that._insertInIdsMap(item);\n                    parents = that._parentNodes(item);\n                    directParent = parents && parents.length ? parents[parents.length - 1] : undefined;\n                    if (item[parentIdField] === defaultParentId) {\n                        that._replaceInMap(dataMaps.children, defaultParentId, item, itemType);\n                    } else if (directParent) {\n                        that._replaceInMap(dataMaps.children, directParent[idField], item, itemType);\n                    }\n                }\n            },\n            _replaceInMap: function (map, id, replacement, itemType) {\n                var idField = this._modelIdField();\n                map[id] = map[id] || [];\n                itemType = itemType || this._defaultDataItemType();\n                var itemInArray = map[id].filter(function (element) {\n                    return replacement[idField] === element[idField];\n                })[0];\n                var itemIndex = itemInArray ? map[id].indexOf(itemInArray) : -1;\n                if (itemIndex !== -1 && !(itemInArray instanceof itemType)) {\n                    map[id][itemIndex] = replacement;\n                }\n            },\n            _replaceWithObservedData: function (dataToReplace, replacementArray) {\n                var that = this;\n                var idsMap = that._getDataMaps().ids || {};\n                var idField = that._modelIdField();\n                var itemType = that._defaultDataItemType();\n                var itemToReplace;\n                var itemToReplaceId;\n                var dataItem;\n                var dataItemIndex;\n                var observableItem;\n                for (var i = 0; i < dataToReplace.length; i++) {\n                    itemToReplace = dataToReplace[i];\n                    itemToReplaceId = itemToReplace[idField];\n                    if (!(itemToReplace instanceof itemType)) {\n                        if (!(idsMap[itemToReplaceId] instanceof itemType)) {\n                            dataItem = that._getById(itemToReplaceId);\n                            dataItemIndex = replacementArray.indexOf(dataItem);\n                            if (dataItem && dataItemIndex !== -1) {\n                                observableItem = replacementArray.at(dataItemIndex);\n                                dataToReplace[i] = observableItem;\n                            }\n                        } else {\n                            dataToReplace[i] = idsMap[itemToReplaceId];\n                        }\n                    }\n                }\n            },\n            _replaceInMapWithObservedData: function (map, replacementArray) {\n                var that = this;\n                for (var key in map) {\n                    that._replaceWithObservedData(map[key], replacementArray);\n                }\n            },\n            _insertInDataMaps: function (item) {\n                var that = this;\n                if (that._isPageable()) {\n                    that._insertInIdsMap(item);\n                    that._insertInChildrenMap(item);\n                }\n            },\n            _insertInIdsMap: function (item) {\n                var that = this;\n                var idsMap = that._getIdsMap();\n                var idField = that._modelIdField();\n                if (!isUndefined(item[idField])) {\n                    idsMap[item[idField]] = item;\n                }\n            },\n            _insertInChildrenMap: function (item, index) {\n                var that = this;\n                var childrenMap = that._getChildrenMap() || {};\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var itemId = item[idField];\n                var parentId = item[parentIdField];\n                index = index || 0;\n                childrenMap[itemId] = childrenMap[itemId] || [];\n                childrenMap[parentId] = childrenMap[parentId] || [];\n                childrenMap[parentId].splice(index, 0, item);\n            },\n            _removeFromDataMaps: function (items) {\n                var that = this;\n                items = isArray(items) ? items : [items];\n                if (that._isPageable()) {\n                    for (var i = 0; i < items.length; i++) {\n                        that._removeFromIdsMap(items[i]);\n                        that._removeFromChildrenMap(items[i]);\n                    }\n                }\n            },\n            _removeFromIdsMap: function (item) {\n                var that = this;\n                var idsMap = that._getIdsMap();\n                var idField = that._modelIdField();\n                if (!isUndefined(item[idField])) {\n                    idsMap[item[idField]] = undefined;\n                }\n            },\n            _removeFromChildrenMap: function (item) {\n                var that = this;\n                var childrenMap = that._getChildrenMap() || {};\n                var parentIdField = that._modelParentIdField();\n                var parentId = item[parentIdField];\n                childrenMap[parentId] = childrenMap[parentId] || [];\n                var itemIndex = that._indexInChildrenMap(item);\n                if (itemIndex !== -1) {\n                    childrenMap[parentId].splice(itemIndex, 1);\n                }\n            },\n            _indexInChildrenMap: function (item) {\n                var that = this;\n                return that._itemIndexInMap(item, that._getChildrenMap());\n            },\n            _itemIndexInMap: function (item, dataMap) {\n                var that = this;\n                var map = dataMap || {};\n                var parentIdField = that._modelParentIdField();\n                var parentId = item[parentIdField];\n                map[parentId] = map[parentId] || [];\n                var itemInArray = map[parentId].filter(function (element) {\n                    return item.uid === element.uid;\n                })[0];\n                var itemIndex = itemInArray ? map[parentId].indexOf(itemInArray) : -1;\n                return itemIndex;\n            },\n            _getById: function (id) {\n                var that = this;\n                var idField = that._modelIdField();\n                var data = that._getData();\n                for (var i = 0; i < data.length; i++) {\n                    if (data[i][idField] === id) {\n                        return data[i];\n                    }\n                }\n            },\n            _isLastItemInView: function (dataItem) {\n                var view = this.view();\n                return view.length && view[view.length - 1] === dataItem;\n            },\n            _defaultPageableQueryOptions: function () {\n                var that = this;\n                var dataMaps = that._getDataMaps();\n                var options = {\n                    skip: that.skip(),\n                    take: that.take(),\n                    page: that.page(),\n                    pageSize: that.pageSize(),\n                    sort: that.sort(),\n                    filter: that.filter(),\n                    group: that.group(),\n                    aggregate: that.aggregate(),\n                    filterCallback: proxy(that._filterCallback, that),\n                    childrenMap: dataMaps.children,\n                    idsMap: dataMaps.ids\n                };\n                return options;\n            },\n            _isPageable: function () {\n                var pageSize = this.pageSize();\n                return !isUndefined(pageSize) && pageSize > 0 && !this.options.serverPaging;\n            },\n            _updateTotalForAction: function (action, items) {\n                var that = this;\n                DataSource.fn._updateTotalForAction.call(that, action, items);\n                if (that._isPageable()) {\n                    that._updateCollapsedTotalForAction(action, items);\n                }\n            },\n            _updateCollapsedTotalForAction: function (action, items) {\n                var that = this;\n                var total = parseInt(that._collapsedTotal, 10);\n                if (!isNumber(that._collapsedTotal)) {\n                    that._calculateCollapsedTotal();\n                    return;\n                }\n                if (action === 'add') {\n                    total += items.length;\n                } else if (action === 'remove') {\n                    total -= items.length;\n                } else if (action !== 'itemchange' && action !== 'sync' && !that.options.serverPaging) {\n                    total = that._calculateCollapsedTotal();\n                } else if (action === 'sync') {\n                    total = that._calculateCollapsedTotal();\n                }\n                that._collapsedTotal = total;\n            },\n            _setFilterTotal: function (filterTotal, setDefaultValue) {\n                var that = this;\n                DataSource.fn._setFilterTotal.call(that, filterTotal, setDefaultValue);\n                that._setFilterCollapsedTotal(filterTotal);\n            },\n            _setFilterCollapsedTotal: function (filterTotal) {\n                var that = this;\n                if (!that.options.serverFiltering) {\n                    if (filterTotal !== undefined) {\n                        that._collapsedTotal = filterTotal;\n                    } else {\n                        if (that._getFilteredChildrenMap()) {\n                            that._calculateCollapsedTotal();\n                        }\n                        that._setFilteredChildrenMap(undefined);\n                    }\n                }\n            },\n            collapsedTotal: function () {\n                var that = this;\n                if (!isUndefined(that._collapsedTotal)) {\n                    return that._collapsedTotal;\n                }\n                return that._calculateCollapsedTotal();\n            },\n            _calculateCollapsedTotal: function () {\n                var that = this;\n                var data = that._dataWithoutCollapsedSubtrees();\n                if (data.length) {\n                    that._collapsedTotal = data.length;\n                }\n                return that._collapsedTotal;\n            },\n            _dataWithoutCollapsedSubtrees: function () {\n                return this._removeCollapsedSubtrees(this._getData());\n            },\n            _removeCollapsedSubtrees: function (data) {\n                var that = this;\n                var view = that._createTreeView(data);\n                var result = view.removeCollapsedSubtreesFromRootNodes({\n                    expanded: that._modelOptions().expanded,\n                    childrenMap: that._getChildrenMap()\n                });\n                return result;\n            },\n            _processTreeQuery: function (data, options) {\n                var result = TreeQuery.process(data, extend(options, this._defaultTreeModelOptions(), { processFromRootNodes: true }));\n                return result;\n            },\n            _processDataItemsState: function (data, childrenMap) {\n                var dataLength = data.length;\n                var i;\n                for (i = 0; i < dataLength; i++) {\n                    this._processDataItemState(data[i], childrenMap);\n                }\n            },\n            _processDataItemState: function (dataItem, childrenMap) {\n                var defaultParentId = this._defaultParentId();\n                if (dataItem.id === defaultParentId) {\n                    return;\n                }\n                var children = childrenMap[dataItem.id] || [];\n                var hasLoadedChildren = !!(children && children.length);\n                if (!dataItem.loaded) {\n                    return;\n                }\n                if (!dataItem.loaded()) {\n                    dataItem.loaded(hasLoadedChildren || !dataItem.hasChildren);\n                }\n                if (dataItem.loaded() || dataItem.hasChildren !== true) {\n                    dataItem.hasChildren = hasLoadedChildren;\n                }\n            },\n            _queueRequest: function (options, callback) {\n                callback.call(this);\n            },\n            _modelLoaded: function (id) {\n                var model = this.get(id);\n                model.loaded(true);\n                model.hasChildren = this.childNodes(model).length > 0;\n            },\n            _modelError: function (id, e) {\n                this.get(id)._error = e;\n            },\n            success: function (data, requestParams) {\n                if (!requestParams || typeof requestParams.id == 'undefined') {\n                    this._data = this._observe([]);\n                }\n                DataSource.fn.success.call(this, data, requestParams);\n                this._total = this._data.length;\n            },\n            load: function (model) {\n                var method = '_query';\n                var remote = this.options.serverSorting || this.options.serverPaging || this.options.serverFiltering || this.options.serverGrouping || this.options.serverAggregates;\n                var defaultPromise = $.Deferred().resolve().promise();\n                if (model.loaded()) {\n                    if (remote) {\n                        return defaultPromise;\n                    }\n                } else if (model.hasChildren) {\n                    method = 'read';\n                    this._removeChildData(model);\n                }\n                return this[method]({ id: model.id }).done(proxy(this._modelLoaded, this, model.id)).fail(proxy(this._modelError, this, model.id));\n            },\n            contains: function (root, child) {\n                var that = this;\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var rootId = root[idField];\n                var pageable = that._isPageable();\n                while (child) {\n                    if (child[parentIdField] === rootId) {\n                        return true;\n                    }\n                    child = pageable ? that._parentNode(child) : that.parentNode(child);\n                }\n                return false;\n            },\n            _byParentId: function (id, defaultId) {\n                var result = [];\n                var view = this.view();\n                var current;\n                if (id === defaultId) {\n                    return [];\n                }\n                for (var i = 0; i < view.length; i++) {\n                    current = view.at(i);\n                    if (current.parentId == id) {\n                        result.push(current);\n                    }\n                }\n                return result;\n            },\n            _defaultParentId: function () {\n                return this.reader.model.fn.defaults[this.reader.model.parentIdField];\n            },\n            _modelOptions: function () {\n                var modelOptions = (this.options.schema || {}).model || {};\n                return modelOptions;\n            },\n            _modelIdField: function () {\n                var modelOptions = this._modelOptions();\n                return modelOptions.id || 'id';\n            },\n            _modelParentIdField: function () {\n                var modelOptions = this._modelOptions();\n                return modelOptions.parentId || PARENTIDFIELD;\n            },\n            childNodes: function (model) {\n                return this._byParentId(model.id, this._defaultParentId());\n            },\n            rootNodes: function () {\n                return this._byParentId(this._defaultParentId());\n            },\n            _rootNode: function (child) {\n                return this._parentNodes(child)[0];\n            },\n            _pageableRootNodes: function (options) {\n                options = options || {};\n                var that = this;\n                var defaultParentId = that._defaultParentId();\n                var parentIdField = that._modelParentIdField();\n                var result = [];\n                var nodesWithoutParentInView = that._nodesWithoutParentInView(options);\n                var node;\n                var root;\n                for (var i = 0; i < nodesWithoutParentInView.length; i++) {\n                    node = nodesWithoutParentInView[i];\n                    if (node[parentIdField] === defaultParentId) {\n                        result.push(node);\n                    } else {\n                        root = that._rootNode(node);\n                        if (root && result.indexOf(root) === -1) {\n                            result.push(root);\n                        }\n                    }\n                }\n                return result;\n            },\n            parentNode: function (model) {\n                return this.get(model.parentId);\n            },\n            _parentNode: function (child) {\n                var that = this;\n                var parentIdField = that._modelParentIdField();\n                var idsMap = that._initIdsMap(that._getData());\n                var parentId = child[parentIdField];\n                var parent = idsMap[parentId] || that._getById(parentId);\n                return parent;\n            },\n            _parentNodes: function (child) {\n                var that = this;\n                var parent = that._parentNode(child);\n                var parents = [];\n                while (parent) {\n                    parents.unshift(parent);\n                    parent = that._parentNode(parent);\n                }\n                return parents;\n            },\n            _parentNodesNotInView: function () {\n                var that = this;\n                var view = that.view();\n                var result = [];\n                var defaultParentId = that._defaultParentId();\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var parentInView;\n                var parents = [];\n                var directParent;\n                var dataItem;\n                var dataItemId;\n                var dataItemParentId;\n                for (var i = 0; i < view.length; i++) {\n                    dataItem = view[i];\n                    dataItemId = dataItem[idField];\n                    dataItemParentId = dataItem[parentIdField];\n                    parentInView = that._parentInView(dataItemParentId);\n                    if (!parentInView && dataItemParentId !== defaultParentId) {\n                        parents = that._parentNodes(dataItem);\n                        directParent = parents && parents.length ? parents[parents.length - 1] : that._getById(dataItemParentId);\n                        if (directParent && result.indexOf(directParent) === -1) {\n                            result.push(directParent);\n                        }\n                    }\n                }\n                return result;\n            },\n            _nodesWithoutParentInView: function (options) {\n                options = options || {};\n                var that = this;\n                var view = that.view();\n                var childrenMap = options.childrenMap || that.childrenMap(that._getData());\n                var idField = that._modelIdField();\n                var parentIdField = that._modelParentIdField();\n                var dataItem;\n                var parentInView;\n                var children = [];\n                var result = [];\n                for (var i = 0; i < view.length; i++) {\n                    dataItem = view[i];\n                    children = childrenMap[dataItem[idField]];\n                    parentInView = that._parentInView(dataItem[parentIdField]);\n                    if (!parentInView) {\n                        result.push(dataItem);\n                    }\n                }\n                return result;\n            },\n            _parentInView: function (parentId) {\n                var view = this.view();\n                for (var i = 0; i < view.length; i++) {\n                    if (view[i].id === parentId) {\n                        return view[i];\n                    }\n                }\n            },\n            level: function (model) {\n                var result = -1;\n                if (!(model instanceof TreeListModel)) {\n                    model = this.get(model);\n                }\n                do {\n                    model = this.parentNode(model);\n                    result++;\n                } while (model);\n                return result;\n            },\n            _pageableModelLevel: function (model) {\n                var that = this;\n                if (!model || !that._isPageable()) {\n                    return 0;\n                }\n                var parents = that._parentNodes(model);\n                return parents.length;\n            },\n            filter: function (value) {\n                var baseFilter = DataSource.fn.filter;\n                if (value === undefined) {\n                    return baseFilter.call(this, value);\n                }\n                baseFilter.call(this, value);\n            },\n            _pageableQueryOptions: function (options) {\n                var dataMaps = this._getDataMaps();\n                options.childrenMap = dataMaps.children;\n                options.idsMap = dataMaps.ids;\n                return options;\n            },\n            _flatData: function (data, skip) {\n                skip = this._isPageable() ? true : skip;\n                return DataSource.fn._flatData.call(this, data, skip);\n            },\n            data: function (data) {\n                var that = this;\n                var result = DataSource.fn.data.call(that, data);\n                if (that._isPageable()) {\n                    that._initDataMaps(that._getData());\n                    that._calculateCollapsedTotal();\n                }\n                return result;\n            },\n            cancelChanges: function (model) {\n                var that = this;\n                DataSource.fn.cancelChanges.call(that, model);\n                that._restorePageSizeAfterAddChild();\n            },\n            _modelCanceled: function (model) {\n                var that = this;\n                if (that._isPageable()) {\n                    that._removeFromDataMaps(model);\n                }\n            },\n            _changesCanceled: function () {\n                var that = this;\n                if (that._isPageable()) {\n                    that._initDataMaps(that._getData());\n                }\n            },\n            _setAddChildPageSize: function () {\n                var that = this;\n                var queryOptions = {};\n                if (that._isPageable()) {\n                    that._addChildPageSize = that.pageSize() + 1;\n                    queryOptions = that._defaultPageableQueryOptions();\n                    queryOptions.take = that._addChildPageSize;\n                    queryOptions.pageSize = that._addChildPageSize;\n                    that._query(queryOptions);\n                }\n            },\n            _restorePageSizeAfterAddChild: function () {\n                var that = this;\n                var queryOptions = {};\n                if (that._isPageable()) {\n                    if (!isUndefined(that._addChildPageSize)) {\n                        queryOptions = that._defaultPageableQueryOptions();\n                        queryOptions.take = that._addChildPageSize - 1;\n                        queryOptions.pageSize = that._addChildPageSize - 1;\n                        that._query(queryOptions);\n                    }\n                }\n                that._addChildPageSize = undefined;\n            },\n            sync: function () {\n                var that = this;\n                return DataSource.fn.sync.call(that).then(function () {\n                    that._restorePageSizeAfterAddChild();\n                });\n            },\n            _syncEnd: function () {\n                var that = this;\n                if (that._isPageable()) {\n                    that._initDataMaps(that._getData());\n                }\n            }\n        });\n        TreeListDataSource.create = function (options) {\n            if ($.isArray(options)) {\n                options = { data: options };\n            } else if (options instanceof ObservableArray) {\n                options = { data: options.toJSON() };\n            }\n            return options instanceof TreeListDataSource ? options : new TreeListDataSource(options);\n        };\n        function isCellVisible() {\n            return this.style.display !== 'none';\n        }\n        function sortCells(cells) {\n            var indexAttr = kendo.attr('index');\n            return cells.sort(function (a, b) {\n                a = $(a);\n                b = $(b);\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n                if (indexA === undefined) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined) {\n                    indexB = $(b).index();\n                }\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : indexA < indexB ? -1 : 0;\n            });\n        }\n        function leafDataCells(container) {\n            var rows = container.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find('th').filter(filter).filter(function () {\n                    return this.rowSpan > 1;\n                });\n            }\n            cells = cells.add(rows.last().find('th').filter(filter));\n            return sortCells(cells);\n        }\n        function createPlaceholders(options) {\n            var spans = [];\n            var className = options.className;\n            for (var i = 0, level = options.level; i < level; i++) {\n                spans.push(kendoDomElement('span', { className: className }));\n            }\n            return spans;\n        }\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf('%') == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n            return width;\n        }\n        function syncTableHeight(table1, table2) {\n            table1 = table1[0];\n            table2 = table2[0];\n            if (table1.rows.length && table2.rows.length && table1.rows.length !== table2.rows.length) {\n                var lockedHeigth = table1.offsetHeight;\n                var tableHeigth = table2.offsetHeight;\n                var row;\n                var diff;\n                if (lockedHeigth > tableHeigth) {\n                    row = table2.rows[table2.rows.length - 1];\n                    diff = lockedHeigth - tableHeigth;\n                } else {\n                    row = table1.rows[table1.rows.length - 1];\n                    diff = tableHeigth - lockedHeigth;\n                }\n                row.style.height = row.offsetHeight + diff + 'px';\n            }\n        }\n        var TreeListPager = ui.Pager.extend({\n            options: { name: 'TreeListPager' },\n            totalPages: function () {\n                var that = this;\n                var dataSource = that.dataSource;\n                if (dataSource && dataSource._filter) {\n                    return ui.Pager.fn.totalPages.call(that);\n                }\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _createDataSource: function (options) {\n                this.dataSource = kendo.data.TreeListDataSource.create(options.dataSource);\n            },\n            _collapsedTotal: function () {\n                var dataSource = this.dataSource;\n                return dataSource ? dataSource.collapsedTotal() || 0 : 0;\n            }\n        });\n        var Editor = kendo.Observable.extend({\n            init: function (element, options) {\n                kendo.Observable.fn.init.call(this);\n                options = this.options = extend(true, {}, this.options, options);\n                this.element = element;\n                this.bind(this.events, options);\n                this.model = this.options.model;\n                this.fields = this._fields(this.options.columns);\n                this._initContainer();\n                this.createEditable();\n            },\n            events: [],\n            _initContainer: function () {\n                this.wrapper = this.element;\n            },\n            createEditable: function () {\n                var options = this.options;\n                this.editable = new ui.Editable(this.wrapper, {\n                    fields: this.fields,\n                    target: options.target,\n                    clearContainer: options.clearContainer,\n                    model: this.model,\n                    change: options.change\n                });\n            },\n            _isEditable: function (column) {\n                return isColumnEditable(column, this.model);\n            },\n            _fields: function (columns) {\n                var fields = [];\n                var idx, length, column;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (this._isEditable(column)) {\n                        fields.push({\n                            field: column.field,\n                            format: column.format,\n                            editor: column.editor\n                        });\n                    }\n                }\n                return fields;\n            },\n            end: function () {\n                return this.editable.end();\n            },\n            close: function () {\n                this.destroy();\n            },\n            destroy: function () {\n                this.editable.destroy();\n                this.editable.element.find('[' + kendo.attr('container-for') + ']').empty().end().removeAttr(kendo.attr('role'));\n                this.model = this.wrapper = this.element = this.columns = this.editable = null;\n            }\n        });\n        var PopupEditor = Editor.extend({\n            init: function (element, options) {\n                Editor.fn.init.call(this, element, options);\n                this._attachHandlers();\n                kendo.cycleForm(this.wrapper);\n                this.open();\n            },\n            events: [\n                CANCEL,\n                SAVE\n            ],\n            options: {\n                window: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: 'Edit',\n                    visible: false\n                }\n            },\n            _initContainer: function () {\n                var options = this.options;\n                var formContent = [];\n                this.wrapper = $('<div class=\"k-popup-edit-form\"/>').attr(kendo.attr('uid'), this.model.uid).append('<div class=\"k-edit-form-container\"/>');\n                if (options.template) {\n                    this._appendTemplate(formContent);\n                    this.fields = [];\n                } else {\n                    this._appendFields(formContent);\n                }\n                this._appendButtons(formContent);\n                new kendoDom.Tree(this.wrapper.children()[0]).render(formContent);\n                this.wrapper.appendTo(options.appendTo);\n                this.window = new ui.Window(this.wrapper, options.window);\n            },\n            _appendTemplate: function (form) {\n                var template = this.options.template;\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n                template = kendo.template(template)(this.model);\n                form.push(kendoHtmlElement(template));\n            },\n            _appendFields: function (form) {\n                var idx, length, column;\n                var columns = this.options.columns;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.command) {\n                        continue;\n                    }\n                    form.push(kendoHtmlElement('<div class=\"k-edit-label\"><label for=\"' + column.field + '\">' + (column.title || column.field || '') + '</label></div>'));\n                    if (this._isEditable(column)) {\n                        form.push(kendoHtmlElement('<div ' + kendo.attr('container-for') + '=\"' + column.field + '\" class=\"k-edit-field\"></div>'));\n                    } else {\n                        form.push(kendoDomElement('div', { 'class': 'k-edit-field' }, [this.options.fieldRenderer(column, this.model)]));\n                    }\n                }\n            },\n            _appendButtons: function (form) {\n                form.push(kendoDomElement('div', { 'class': 'k-edit-buttons k-state-default' }, this.options.commandRenderer()));\n            },\n            _attachHandlers: function () {\n                var closeHandler = this._cancelProxy = proxy(this._cancel, this);\n                this.wrapper.on(CLICK + NS, '.k-grid-cancel', this._cancelProxy);\n                this._saveProxy = proxy(this._save, this);\n                this.wrapper.on(CLICK + NS, '.k-grid-update', this._saveProxy);\n                this.window.bind('close', function (e) {\n                    if (e.userTriggered) {\n                        closeHandler(e);\n                    }\n                });\n            },\n            _detachHandlers: function () {\n                this._cancelProxy = null;\n                this._saveProxy = null;\n                this.wrapper.off(NS);\n            },\n            _cancel: function (e) {\n                this.trigger(CANCEL, e);\n            },\n            _save: function () {\n                this.trigger(SAVE);\n            },\n            open: function () {\n                this.window.center().open();\n            },\n            close: function () {\n                this.window.bind('deactivate', proxy(this.destroy, this)).close();\n            },\n            destroy: function () {\n                this.window.destroy();\n                this.window = null;\n                this._detachHandlers();\n                Editor.fn.destroy.call(this);\n            }\n        });\n        var IncellEditor = Editor.extend({\n            destroy: function () {\n                var that = this;\n                that.editable.destroy();\n                that.editable.element.off().empty().removeAttr(kendo.attr('role'));\n                that.model = that.wrapper = that.element = that.columns = that.editable = null;\n            }\n        });\n        var TreeList = DataBoundWidget.extend({\n            init: function (element, options) {\n                DataBoundWidget.fn.init.call(this, element, options);\n                isRtl = kendo.support.isRtl(element);\n                this._dataSource(this.options.dataSource);\n                this._aria();\n                this._columns();\n                this._layout();\n                this._navigatable();\n                this._selectable();\n                this._sortable();\n                this._resizable();\n                this._filterable();\n                this._attachEvents();\n                this._toolbar();\n                this._scrollable();\n                this._reorderable();\n                this._columnMenu();\n                this._minScreenSupport();\n                this._draggable();\n                this._pageable();\n                if (this.options.autoBind) {\n                    this.dataSource.fetch();\n                }\n                if (this._hasLockedColumns) {\n                    var widget = this;\n                    this.wrapper.addClass('k-grid-lockedcolumns');\n                    this._resizeHandler = function () {\n                        widget.resize();\n                    };\n                    $(window).on('resize' + NS, this._resizeHandler);\n                }\n                kendo.notify(this);\n            },\n            _draggable: function () {\n                var that = this;\n                var editable = this.options.editable;\n                var dataSource = that.dataSource;\n                var idField = dataSource._modelIdField();\n                var parentIdField = dataSource._modelParentIdField();\n                var pageable = that._isPageable();\n                if (!editable || !editable.move) {\n                    return;\n                }\n                this._dragging = new kendo.ui.HierarchicalDragAndDrop(this.wrapper, {\n                    $angular: this.$angular,\n                    autoScroll: true,\n                    filter: 'tbody>tr',\n                    itemSelector: 'tr',\n                    allowedContainers: this.wrapper,\n                    hintText: function (row) {\n                        var text = function () {\n                            return $(this).text();\n                        };\n                        var separator = '<span class=\\'k-header k-drag-separator\\' />';\n                        return row.children('td').map(text).toArray().join(separator);\n                    },\n                    contains: proxy(function (source, destination) {\n                        var dest = this.dataItem(destination);\n                        var src = this.dataItem(source);\n                        return src == dest || this.dataSource.contains(src, dest);\n                    }, this),\n                    itemFromTarget: function (target) {\n                        var tr = target.closest('tr');\n                        return {\n                            item: tr,\n                            content: tr\n                        };\n                    },\n                    dragstart: proxy(function (source) {\n                        this.wrapper.addClass('k-treelist-dragging');\n                        var model = this.dataItem(source);\n                        return this.trigger(DRAGSTART, { source: model });\n                    }, this),\n                    drag: proxy(function (e) {\n                        e.source = this.dataItem(e.source);\n                        this.trigger(DRAG, e);\n                    }, this),\n                    drop: proxy(function (e) {\n                        e.source = this.dataItem(e.source);\n                        e.destination = this.dataItem(e.destination);\n                        this.wrapper.removeClass('k-treelist-dragging');\n                        return this.trigger(DROP, e);\n                    }, this),\n                    dragend: proxy(function (e) {\n                        var dest = this.dataItem(e.destination);\n                        var src = this.dataItem(e.source);\n                        var originalSrcParentId = src[parentIdField];\n                        var originalSrcIndex = dataSource._indexInChildrenMap(src);\n                        if (pageable) {\n                            dataSource._removeFromChildrenMap(src);\n                            src[parentIdField] = dest ? dest[idField] : null;\n                            dataSource._initChildrenMapForParent(dest);\n                            src[parentIdField] = originalSrcParentId;\n                        }\n                        var isPrevented = src.set('parentId', dest ? dest.id : null);\n                        if (pageable && isPrevented) {\n                            dataSource._removeFromChildrenMap(src);\n                            src[parentIdField] = originalSrcParentId;\n                            dataSource._removeFromChildrenMap(src);\n                            dataSource._insertInChildrenMap(src, originalSrcIndex);\n                        }\n                        e.source = src;\n                        e.destination = dest;\n                        this.trigger(DRAGEND, e);\n                    }, this),\n                    reorderable: false,\n                    dropHintContainer: function (item) {\n                        return item.children('td:eq(1)');\n                    },\n                    dropPositionFrom: function (dropHint) {\n                        return dropHint.prevAll('.k-i-none').length > 0 ? 'after' : 'before';\n                    }\n                });\n            },\n            itemFor: function (model) {\n                if (typeof model == 'number') {\n                    model = this.dataSource.get(model);\n                }\n                return this.tbody.find('[' + kendo.attr('uid') + '=' + model.uid + ']');\n            },\n            _itemFor: function (model) {\n                var that = this;\n                var table = that.lockedContent ? that.lockedTable : that.table;\n                if (typeof model == 'number') {\n                    model = this.dataSource.get(model);\n                }\n                return table.find('[' + kendo.attr('uid') + '=' + model.uid + ']');\n            },\n            _scrollable: function () {\n                if (this.options.scrollable) {\n                    var scrollables = this.thead.closest('.k-grid-header-wrap');\n                    var lockedContent = $(this.lockedContent).bind('DOMMouseScroll' + NS + ' mousewheel' + NS, proxy(this._wheelScroll, this));\n                    this.content.bind('scroll' + NS, function () {\n                        scrollables.scrollLeft(this.scrollLeft);\n                        lockedContent.scrollTop(this.scrollTop);\n                    });\n                    var touchScroller = kendo.touchScroller(this.content);\n                    if (touchScroller && touchScroller.movable) {\n                        this._touchScroller = touchScroller;\n                        touchScroller.movable.bind('change', function (e) {\n                            scrollables.scrollLeft(-e.sender.x);\n                            if (lockedContent) {\n                                lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n                    }\n                }\n            },\n            _wheelScroll: function (e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n                var delta = kendo.wheelDeltaY(e);\n                var lockedDiv = $(e.currentTarget);\n                if (delta) {\n                    if (lockedDiv[0].scrollHeight > lockedDiv[0].clientHeight && (lockedDiv[0].scrollTop < lockedDiv[0].scrollHeight - lockedDiv[0].clientHeight && delta < 0 || lockedDiv[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n                    lockedDiv.one('wheel' + NS, false);\n                    this.content.scrollTop(this.content.scrollTop() + -delta);\n                }\n            },\n            _progress: function () {\n                var messages = this.options.messages;\n                if (!this.tbody.find('tr').length) {\n                    this._showStatus(kendo.template('<span class=\\'#= className #\\' /> #: messages.loading #')({\n                        className: classNames.icon + ' ' + classNames.loading,\n                        messages: messages\n                    }));\n                }\n            },\n            _error: function (e) {\n                if (!this.dataSource.rootNodes().length) {\n                    this._render({ error: e });\n                }\n            },\n            refresh: function (e) {\n                e = e || {};\n                if (e.action == 'itemchange' && this.editor) {\n                    return;\n                }\n                if (this.trigger(DATABINDING)) {\n                    return;\n                }\n                var current = $(this.current());\n                var isCurrentInHeader = false;\n                var currentIndex;\n                this._cancelEditor();\n                this._render();\n                this._adjustHeight();\n                if (this.options.navigatable) {\n                    if (this._isActiveInTable() || this.editor) {\n                        isCurrentInHeader = current.is('th');\n                        currentIndex = Math.max(this.cellIndex(current), 0);\n                    }\n                    this._restoreCurrent(currentIndex, isCurrentInHeader);\n                }\n                this.trigger(DATABOUND);\n            },\n            _angularFooters: function (command) {\n                var i, footer, aggregates;\n                var allAggregates = this.dataSource.aggregates();\n                var footerRows = this._footerItems();\n                for (i = 0; i < footerRows.length; i++) {\n                    footer = footerRows.eq(i);\n                    aggregates = allAggregates[footer.attr('data-parentId')];\n                    this._angularFooter(command, footer.find('td').get(), aggregates);\n                }\n            },\n            _angularFooter: function (command, cells, aggregates) {\n                var columns = this.columns;\n                this.angular(command, function () {\n                    return {\n                        elements: cells,\n                        data: map(columns, function (col) {\n                            return {\n                                column: col,\n                                aggregate: aggregates && aggregates[col.field]\n                            };\n                        })\n                    };\n                });\n            },\n            items: function () {\n                if (this._hasLockedColumns) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n            _items: function (container) {\n                return container.find('tr[data-uid]').filter(function () {\n                    return !$(this).hasClass(classNames.footerTemplate);\n                });\n            },\n            _footerItems: function () {\n                var container = this.tbody;\n                if (this._hasLockedColumns) {\n                    container = container.add(this.lockedTable);\n                }\n                return container.find('tr').filter(function () {\n                    return $(this).hasClass(classNames.footerTemplate);\n                });\n            },\n            dataItems: function () {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this._hasLockedColumns) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n                return dataItems;\n            },\n            _showNoRecordsTemplate: function () {\n                var wrapper = '<div class=\"{0}\">{1}</div>';\n                var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n                var scrollableNoGridHeightStyles = this.options.scrollable && !this.wrapper[0].style.height ? ' style=\"margin:0 auto;position:static;\"' : '';\n                var template;\n                this._contentTree.render([]);\n                if (this._hasLockedColumns) {\n                    this._lockedContentTree.render([]);\n                }\n                template = kendo.format(defaultTemplate, this.options.messages.noRows, scrollableNoGridHeightStyles);\n                $(kendo.template(kendo.format(wrapper, NORECORDSCLASS, template))({})).insertAfter(this.table);\n            },\n            _showStatus: function (message) {\n                var status = this.element.find('.k-status');\n                var content = $(this.content).add(this.lockedContent);\n                if (!status.length) {\n                    status = $('<div class=\\'k-status\\' />').appendTo(this.element);\n                }\n                this._contentTree.render([]);\n                if (this._hasLockedColumns) {\n                    this._lockedContentTree.render([]);\n                }\n                content.hide();\n                status.html(message);\n            },\n            _hideStatus: function () {\n                this.element.find('.k-status').remove();\n                this._hideNoRecordsTempalte();\n                $(this.content).add(this.lockedContent).show();\n            },\n            _hideNoRecordsTempalte: function () {\n                this.element.find('.' + NORECORDSCLASS).remove();\n            },\n            _adjustHeight: function () {\n                var that = this;\n                var element = this.element;\n                var contentWrap = element.find(DOT + classNames.gridContentWrap);\n                var header = element.find(DOT + classNames.gridHeader);\n                var toolbar = element.find(DOT + classNames.gridToolbar);\n                var status = element.find(DOT + classNames.status);\n                var pagerHeight = that._isPageable() && that.pager && that.pager.element.is(':visible') ? outerHeight(that.pager.element) : 0;\n                var height;\n                var scrollbar = kendo.support.scrollbar();\n                element.css(HEIGHT, this.options.height);\n                var isHeightSet = function (el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n                    el.height('auto');\n                    newHeight = el.height();\n                    el.height('');\n                    return initialHeight != newHeight;\n                };\n                if (isHeightSet(element)) {\n                    height = element.height() - outerHeight(header) - outerHeight(toolbar) - outerHeight(status) - pagerHeight;\n                    contentWrap.height(height);\n                    if (this._hasLockedColumns) {\n                        scrollbar = this.table[0].offsetWidth > this.table.parent()[0].clientWidth ? scrollbar : 0;\n                        this.lockedContent.height(height - scrollbar);\n                    }\n                }\n            },\n            _resize: function (size, force) {\n                this._applyLockedContainersWidth();\n                this._adjustHeight();\n                if (this.pager && this.pager.element) {\n                    this.pager.resize(force);\n                }\n            },\n            _minScreenSupport: function () {\n                var any = this.hideMinScreenCols();\n                if (any) {\n                    this.minScreenResizeHandler = proxy(this.hideMinScreenCols, this);\n                    $(window).on('resize', this.minScreenResizeHandler);\n                }\n            },\n            _iterateMinScreenCols: function (cols, screenWidth) {\n                var any = false;\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n            hideMinScreenCols: function () {\n                var cols = this.columns, screenWidth = window.innerWidth > 0 ? window.innerWidth : screen.width;\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n            destroy: function () {\n                DataBoundWidget.fn.destroy.call(this);\n                var dataSource = this.dataSource;\n                dataSource.unbind(CHANGE, this._refreshHandler);\n                dataSource.unbind(ERROR, this._errorHandler);\n                dataSource.unbind(PROGRESS, this._progressHandler);\n                this._navigatableTables = null;\n                this._current = null;\n                if (this._resizeHandler) {\n                    $(window).off('resize' + NS, this._resizeHandler);\n                }\n                if (this._dragging) {\n                    this._dragging.destroy();\n                    this._dragging = null;\n                }\n                if (this.resizable) {\n                    this.resizable.destroy();\n                    this.resizable = null;\n                }\n                if (this.reorderable) {\n                    this.reorderable.destroy();\n                    this.reorderable = null;\n                }\n                if (this._draggableInstance && this._draggableInstance.element) {\n                    this._draggableInstance.destroy();\n                    this._draggableInstance = null;\n                }\n                if (this.minScreenResizeHandler) {\n                    $(window).off('resize', this.minScreenResizeHandler);\n                }\n                this._destroyEditor();\n                this.element.off(NS);\n                this.wrapper.off(NS);\n                if (this._touchScroller) {\n                    this._touchScroller.destroy();\n                }\n                this._destroyPager();\n                if (dataSource) {\n                    dataSource._dataMaps = null;\n                }\n                this._autoExpandable = null;\n                this._refreshHandler = this._errorHandler = this._progressHandler = this._dataSourceFetchProxy = null;\n                this.thead = this.content = this.tbody = this.table = this.element = this.lockedHeader = this.lockedContent = null;\n                this._statusTree = this._headerTree = this._contentTree = this._lockedHeaderColsTree = this._lockedContentColsTree = this._lockedHeaderTree = this._lockedContentTree = null;\n            },\n            options: {\n                name: 'TreeList',\n                columns: [],\n                autoBind: true,\n                scrollable: true,\n                selectable: false,\n                sortable: false,\n                toolbar: null,\n                height: null,\n                columnMenu: false,\n                messages: {\n                    noRows: 'No records to display',\n                    loading: 'Loading...',\n                    requestFailed: 'Request failed.',\n                    retry: 'Retry',\n                    search: 'Search...',\n                    commands: {\n                        edit: 'Edit',\n                        update: 'Update',\n                        canceledit: 'Cancel',\n                        create: 'Add new record',\n                        createchild: 'Add child record',\n                        destroy: 'Delete',\n                        excel: 'Export to Excel',\n                        pdf: 'Export to PDF'\n                    }\n                },\n                excel: { hierarchy: true },\n                resizable: false,\n                search: false,\n                filterable: false,\n                editable: false,\n                reorderable: false,\n                pageable: false\n            },\n            events: [\n                CHANGE,\n                BEFORE_EDIT,\n                EDIT,\n                PAGE,\n                SAVE,\n                SAVE_CHANGES,\n                REMOVE,\n                EXPAND,\n                COLLAPSE,\n                DATABINDING,\n                DATABOUND,\n                CANCEL,\n                DRAGSTART,\n                DRAG,\n                DROP,\n                DRAGEND,\n                FILTERMENUINIT,\n                ITEM_CHANGE,\n                CELL_CLOSE,\n                FILTERMENUOPEN,\n                COLUMNHIDE,\n                COLUMNSHOW,\n                COLUMNREORDER,\n                COLUMNRESIZE,\n                COLUMNMENUINIT,\n                COLUMNMENUOPEN,\n                COLUMNLOCK,\n                COLUMNUNLOCK\n            ],\n            _toggle: function (model, expand) {\n                var that = this;\n                var defaultPromise = $.Deferred().resolve().promise();\n                var loaded = model.loaded();\n                if (that._isIncellEditable() && that.editor) {\n                    $(activeElement()).change();\n                    that.closeCell();\n                }\n                if (model._error) {\n                    model.expanded = false;\n                    model._error = undefined;\n                }\n                if (!loaded && model.expanded) {\n                    return defaultPromise;\n                }\n                if (typeof expand == 'undefined') {\n                    expand = !model.expanded;\n                }\n                model.expanded = expand;\n                function afterModelLoaded() {\n                    that._toggleData();\n                    if (that._isPageable()) {\n                        that.refresh();\n                    } else {\n                        that._render();\n                    }\n                    that._syncLockedContentHeight();\n                }\n                if (!loaded) {\n                    defaultPromise = this.dataSource.load(model).always(proxy(function () {\n                        afterModelLoaded();\n                    }, this));\n                }\n                afterModelLoaded();\n                return defaultPromise;\n            },\n            _toggleData: function () {\n                var that = this;\n                if (that._isPageable()) {\n                    that._togglePageableData();\n                }\n            },\n            _togglePageableData: function () {\n                var that = this;\n                var dataSource = that.dataSource;\n                var data = dataSource._getData();\n                var result;\n                var queryOptions = dataSource._defaultPageableQueryOptions();\n                that._renderProgress(true);\n                var childrenMap = dataSource._getChildrenMap() || dataSource.childrenMap(dataSource._getData());\n                dataSource._processDataItemsState(data, childrenMap);\n                result = dataSource._processPageableQuery(data, queryOptions);\n                queryOptions.childrenMap = result.childrenMap;\n                queryOptions.filteredChildrenMap = result.filteredChildrenMap;\n                dataSource._aggregateResult = dataSource._calculateAggregates(result.dataToAggregate, queryOptions);\n                dataSource.view(result.data);\n                dataSource._calculateCollapsedTotal();\n                that._refreshPager();\n                that._renderProgress(false);\n            },\n            _refreshPager: function () {\n                var pager = this.pager;\n                if (pager) {\n                    pager.refresh();\n                }\n            },\n            expand: function (row) {\n                return this._toggle(this.dataItem(row), true);\n            },\n            collapse: function (row) {\n                return this._toggle(this.dataItem(row), false);\n            },\n            _toggleChildren: function (e) {\n                var icon = $(e.currentTarget);\n                var model = this.dataItem(icon);\n                if (!model) {\n                    return;\n                }\n                var event = !model.expanded ? EXPAND : COLLAPSE;\n                if (!this.trigger(event, { model: model })) {\n                    this._toggle(model);\n                }\n                e.preventDefault();\n            },\n            _navigatable: function () {\n                var that = this;\n                if (!that.options.navigatable) {\n                    return;\n                }\n                var tables = that.table.add(that.lockedTable);\n                var headerTables = that.thead.parent().add($('>table', that.lockedHeader));\n                if (that.options.scrollable) {\n                    tables = tables.add(headerTables);\n                    headerTables.attr(TABINDEX, -1);\n                }\n                this._navigatableTables = tables;\n                tables.on(kendo.support.touch ? 'touchstart' + NS : 'mousedown' + NS, NAVROW + '>:visible', proxy(that._tableClick, that)).on('focus' + NS, proxy(that._tableFocus, that)).on('focusout' + NS, proxy(that._tableBlur, that)).on('keydown' + NS, proxy(that._tableKeyDown, that));\n            },\n            cellIndex: function (td) {\n                var lockedColumnOffset = 0;\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n                return $(td).parent().children().index(td) + lockedColumnOffset;\n            },\n            _isActiveInTable: function () {\n                var active = kendo._activeElement();\n                if (!active) {\n                    return false;\n                }\n                return this.table[0] === active || $.contains(this.table[0], active) || this.lockedTable && (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active));\n            },\n            _restoreCurrent: function (currentIndex, isCurrentInHeader) {\n                var rowIndex;\n                var row;\n                var td;\n                if (currentIndex === undefined || currentIndex < 0) {\n                    return;\n                }\n                if (this._current) {\n                    this._current.removeClass('k-state-focused');\n                }\n                if (isCurrentInHeader) {\n                    this.current(this.thead.find('th').eq(currentIndex));\n                } else {\n                    rowIndex = 0;\n                    currentIndex = 0;\n                    row = $();\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find('>tbody>tr:visible').eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n                    td = row.find('>td:visible').eq(currentIndex);\n                    this.current(td);\n                }\n                if (this._current) {\n                    focusTable(this._current.closest('table')[0], true);\n                }\n            },\n            current: function (newCurrent) {\n                var current = this._current;\n                newCurrent = $(newCurrent);\n                if (newCurrent.length && (!current || current[0] !== newCurrent[0])) {\n                    this._updateCurrentAttr(current, newCurrent);\n                    this._scrollCurrent();\n                }\n                if (newCurrent && newCurrent.length) {\n                    this._lastCellIndex = newCurrent.parent().children(DATA_CELL).index(newCurrent);\n                }\n                return this._current;\n            },\n            _setCurrent: function (newCurrent) {\n                var that = this;\n                newCurrent = $(newCurrent);\n                if (newCurrent[0]) {\n                    that._current = newCurrent;\n                    that._updateCurrentAttr(that._current, newCurrent);\n                    that._scrollCurrent();\n                }\n                return that._current;\n            },\n            _scrollCurrent: function () {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n                if (!current || !scrollable) {\n                    return;\n                }\n                var row = current.parent();\n                var tableContainer = row.closest('table').parent();\n                var isInLockedContainer = tableContainer.is('.k-grid-content-locked,.k-grid-header-locked');\n                var isInContent = tableContainer.is('.k-grid-content-locked,.k-grid-content');\n                var scrollableContainer = $(this.content)[0];\n                if (isInContent) {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n                if (this.lockedContent) {\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n            _findCurrentCell: function () {\n                var that = this;\n                var current = that.current();\n                var elements = $(that.table).add(that.header).add(that.lockedTable).add(that.lockedHeader);\n                if (current && elements.find(current).length > 0) {\n                    return current;\n                } else {\n                    return elements.find(DOT + classNames.focused);\n                }\n            },\n            _scrollTo: function (element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === 'td' || elementToLowercase === 'th';\n                var table = $(element).closest('table')[0];\n                var elementOffsetDir = element[isHorizontal ? 'offsetWidth' : 'offsetHeight'];\n                var containerScroll = container[isHorizontal ? 'scrollLeft' : 'scrollTop'];\n                var containerOffsetDir = container[isHorizontal ? 'clientWidth' : 'clientHeight'];\n                var elementOffset = $(element).css('position') === 'relative' && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? 'offsetLeft' : 'offsetTop'];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n                if (isRtl && isHorizontal) {\n                    if (browser.msie || browser.edge) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > containerScroll + containerOffsetDir) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = bottomDistance - containerOffsetDir;\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n                container[isHorizontal ? 'scrollLeft' : 'scrollTop'] = result;\n            },\n            _aria: function () {\n                var id = this.element.attr('id') || 'aria';\n                if (id) {\n                    this._elementId = id + '_active_element';\n                }\n            },\n            _currentDataIndex: function (table, current) {\n                var index = current.attr('data-index');\n                if (!index) {\n                    return undefined;\n                }\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest('div').hasClass('k-grid-content-locked')[0]) {\n                    return index - lockedColumnsCount;\n                }\n                return index;\n            },\n            _prevVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                if (index || current.hasClass('k-header')) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n                index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0);\n                if (row.hasClass('k-filter-row')) {\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n                if (rowIndex == -1) {\n                    row = container.find('tr.k-filter-row:visible');\n                    if (!row[0]) {\n                        return leafDataCells(container).filter(isCellVisible).eq(index);\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _nextVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                if (rowIndex != -1 && index === undefined && current.hasClass('k-header')) {\n                    return childColumnsCells(current).eq(1);\n                }\n                index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n                index = Math.max(index, this._lastCellIndex || 0);\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n                var tmpIndex = index;\n                if (this._currentDataIndex(container, current) !== undefined) {\n                    var currentRowCells = row.children(':not(.k-group-cell):not(.k-hierarchy-cell)');\n                    var hiddenColumns = currentRowCells.filter(':hidden');\n                    for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                        if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                            tmpIndex--;\n                        }\n                    }\n                }\n                index = tmpIndex;\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _verticalContainer: function (container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n                return table.find(up ? 'thead' : 'tbody');\n            },\n            _updateCurrentAttr: function (current, next) {\n                var headerId = $(current).data('headerId');\n                $(current).removeClass(classNames.focused).closest('table').removeAttr('aria-activedescendant');\n                if (headerId) {\n                    headerId = headerId.replace(this._elementId, '');\n                    $(current).attr('id', headerId);\n                } else {\n                    $(current).removeAttr('id');\n                }\n                next.data('headerId', next.attr('id')).attr('id', this._elementId).addClass(classNames.focused).closest('table').attr('aria-activedescendant', this._elementId);\n                this._current = next;\n            },\n            _tableKeyDown: function (e) {\n                var handled = false;\n                var current = this.current();\n                var target = $(e.target);\n                var canHandle = !e.isDefaultPrevented() && !target.is(':button,a,:input,a>.k-icon');\n                current = current ? current : $(this.lockedTable).add(this.table).find(FIRSTNAVITEM);\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey);\n                }\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey);\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    if (e.altKey) {\n                        handled = this._handleExpand(current);\n                    } else {\n                        handled = this._moveRight(current);\n                    }\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    if (e.altKey) {\n                        handled = this._handleCollapse(current);\n                    } else {\n                        handled = this._moveLeft(current);\n                    }\n                }\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, e.currentTarget, target);\n                }\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, e.currentTarget);\n                }\n                if (canHandle && e.keyCode == keys.HOME) {\n                    handled = this._handleHome(current, e.ctrlKey);\n                }\n                if (canHandle && e.keyCode == keys.END) {\n                    handled = this._handleEnd(current, e.ctrlKey);\n                }\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, e.currentTarget, e.shiftKey);\n                }\n                if (handled) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            },\n            _handleExpand: function (current) {\n                var that = this;\n                var row = current.parent();\n                var model = that.dataItem(row);\n                if (current.hasClass('k-header')) {\n                    return false;\n                }\n                if (model && model.hasChildren && !model.expanded && !that.trigger(EXPAND, { model: model })) {\n                    this.expand(row);\n                    return true;\n                }\n                return false;\n            },\n            _handleCollapse: function (current) {\n                var that = this;\n                var row = current.parent();\n                var model = that.dataItem(row);\n                if (current.hasClass('k-header')) {\n                    return false;\n                }\n                if (model && model.hasChildren && model.expanded && !that.trigger(COLLAPSE, { model: model })) {\n                    that.collapse(row);\n                    return true;\n                }\n                return false;\n            },\n            _handleHome: function (current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children('tbody')[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var prev;\n                if (ctrl) {\n                    if (this.lockedTable) {\n                        prev = this.lockedTable.find(FIRSTNAVITEM);\n                    } else {\n                        prev = this.table.find(FIRSTNAVITEM);\n                    }\n                } else if (isInBody || isInLockedTable) {\n                    if (isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    prev = row.children(NAVCELL + ':first');\n                }\n                if (prev && prev.length) {\n                    this.current(prev);\n                    return true;\n                }\n            },\n            _handleEnd: function (current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children('tbody')[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var next;\n                if (ctrl) {\n                    next = this.table.find(LASTITEMROW + '>' + NAVCELL + ':last');\n                } else if (isInBody || isInLockedTable) {\n                    if (!isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    next = row.children(NAVCELL + ':last');\n                }\n                if (next && next.length) {\n                    this.current(next);\n                    return true;\n                }\n            },\n            _handlePageDown: function () {\n                var that = this;\n                if (!that._isPageable()) {\n                    return false;\n                }\n                that.dataSource._restorePageSizeAfterAddChild();\n                that.dataSource.page(that.dataSource.page() + 1);\n                return true;\n            },\n            _handlePageUp: function () {\n                var that = this;\n                if (!that._isPageable()) {\n                    return false;\n                }\n                that.dataSource._restorePageSizeAfterAddChild();\n                that.dataSource.page(that.dataSource.page() - 1);\n                return true;\n            },\n            _handleEscKey: function (current, currentTable) {\n                var active = kendo._activeElement();\n                var currentIndex;\n                var that = this;\n                var row;\n                var rowIndex;\n                var cellIndex;\n                var tbody;\n                if (!current || !current.parent().hasClass('k-grid-edit-row')) {\n                    if (current.has(active).length) {\n                        focusTable(currentTable, true);\n                        return true;\n                    }\n                    return false;\n                }\n                if (that._isIncellEditable()) {\n                    row = current.parent();\n                    cellIndex = current.index();\n                    rowIndex = row.index();\n                    tbody = row.closest('tbody');\n                    that.closeCell(true);\n                    that._setCurrent(tbody.children().eq(rowIndex).children().eq(cellIndex));\n                } else {\n                    currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow();\n                    if (currentIndex >= 0) {\n                        this.current(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n                if (browser.msie && browser.version < 9) {\n                    document.body.focus();\n                }\n                focusTable(currentTable, true);\n                return true;\n            },\n            _handleEnterKey: function (current, currentTable, target) {\n                var editable = this.options.editable;\n                var container = target.closest('[role=gridcell]');\n                var focusable;\n                if (!target.is('table') && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n                if (current.is('th')) {\n                    current.find('.k-link').click();\n                    return true;\n                }\n                focusable = current.find(':kendoFocusable:first');\n                if (focusable[0] && current.hasClass('k-state-focused')) {\n                    focusable.focus();\n                    return true;\n                }\n                if (editable && !target.is(':button,.k-button,textarea')) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n                    this._handleEditing(container, false, currentTable);\n                    return true;\n                }\n                return false;\n            },\n            _handleTabKey: function (current, currentTable, shiftKey) {\n                var that = this;\n                var incellEditing = that.options.editable && that._isIncellEditable();\n                var cell;\n                if (!incellEditing || current.is('th')) {\n                    return false;\n                }\n                cell = $(activeElement()).closest(DOT + classNames.editCell);\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n                cell = that._tabNext(current, currentTable, shiftKey);\n                if (cell.length) {\n                    that._handleEditing(current, cell, cell.closest(TABLE));\n                    return true;\n                } else {\n                    that._preventPageSizeRestore = false;\n                }\n                return false;\n            },\n            _tabNext: function (current, currentTable, back) {\n                var that = this;\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL + ':first') : current.nextAll(':visible:first');\n                if (!next.length) {\n                    next = current.parent();\n                    if (that.lockedTable) {\n                        switchRow = back && currentTable == that.lockedTable[0] || !back && currentTable == that.table[0];\n                        next = that._relatedRow(next);\n                    }\n                    if (switchRow) {\n                        next = next[back ? 'prevAll' : 'nextAll']('tr:not(.k-grouping-row):not(.k-detail-row):visible:first');\n                    }\n                    next = next.children(DATA_CELL + (back ? ':last' : ':first'));\n                    that.dataSource._restorePageSizeAfterAddChild();\n                }\n                return next;\n            },\n            _handleEditing: function (current, next, table) {\n                var that = this, active = $(kendo._activeElement()), isIE = browser.msie, editContainer, focusable, isEdited;\n                var editable = that.options.editable && that.options.editable.update !== false;\n                var incellEditing = that._isIncellEditable();\n                var nextFocusableCellRowIndex = $(next).parents('tr').index();\n                var nextFocusableCellIndex = $(next).index();\n                var currentFocusedCellRowIndex = $(current).parents('tr').index();\n                var currentFocusedCellIndex = current.index();\n                var editedCell;\n                table = $(table);\n                if (incellEditing) {\n                    isEdited = current.hasClass(classNames.editCell);\n                } else {\n                    isEdited = current.parent().hasClass('k-grid-edit-row');\n                }\n                if (that.editor) {\n                    editContainer = that.editor.wrapper;\n                    if (editContainer && $.contains(editContainer[0], active[0])) {\n                        if (browser.opera) {\n                            active.blur().change().triggerHandler('blur');\n                        } else {\n                            active.blur();\n                            if (isIE) {\n                                active.blur();\n                            }\n                        }\n                    }\n                    if (!that.editor) {\n                        focusTable(table);\n                        return;\n                    }\n                    if (that.editor.end()) {\n                        if (incellEditing) {\n                            that._preventPageSizeRestore = true;\n                            that.closeCell();\n                            that._preventPageSizeRestore = false;\n                            if ($(that.table).add(that.lockedTable).find(DOT + classNames.editCell).length === 0) {\n                                that.current(table.find('tbody').children().eq(currentFocusedCellRowIndex).children().eq(currentFocusedCellIndex));\n                            }\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (incellEditing) {\n                            that.current(editContainer);\n                        } else {\n                            that.current(editContainer.children().filter(NAVCELL).first());\n                        }\n                        focusable = editContainer.find(':kendoFocusable:first')[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n                next = $(next).length && table.find(next).length === 0 ? table.find('tbody').children().eq(nextFocusableCellRowIndex).children().eq(nextFocusableCellIndex) : next;\n                if (next) {\n                    that.current(next);\n                }\n                focusTable(table, true);\n                if (!editable) {\n                    return;\n                }\n                if (!isEdited && !next || next) {\n                    var currentIndex = that.current().index();\n                    if (incellEditing) {\n                        that.editCell(that.current());\n                        editedCell = $(that.table).add(that.lockedTable).find(DOT + classNames.editCell)[0];\n                        if (editedCell) {\n                            that._current = $(editedCell);\n                        } else {\n                            that.current(that._findCurrentCell());\n                        }\n                    } else {\n                        that.editRow(that.current().parent());\n                        that.current(that.editor.wrapper.children().eq(currentIndex));\n                        that.current().removeClass('k-state-focused');\n                    }\n                } else {\n                    that.dataSource._restorePageSizeAfterAddChild();\n                }\n            },\n            _moveRight: function (current) {\n                var next = current.nextAll(NAVCELL).first();\n                var row = current.parent();\n                if (current.hasClass('k-header')) {\n                    next = current.nextAll(NAVHEADER).first();\n                    if (!next[0] && this.lockedTable && current.closest('table')[0] === this.lockedHeader.find('table')[0]) {\n                        next = this.thead.find(NAVHEADER + ':first');\n                    }\n                }\n                if (!next[0] && this.lockedTable && current.closest('table')[0] === this.lockedTable[0]) {\n                    next = this._relatedRow(row).children(NAVCELL).first();\n                }\n                if (next[0] && next[0] !== current[0]) {\n                    focusTable(next.closest('table'), true);\n                }\n                this.current(next);\n                return true;\n            },\n            _moveLeft: function (current) {\n                var prev = current.prevAll(NAVCELL).first();\n                var row = current.parent();\n                if (current.hasClass('k-header')) {\n                    prev = current.prevAll(NAVHEADER).first();\n                    if (!prev[0] && this.lockedTable && current.closest('table')[0] === this.thead.parent()[0]) {\n                        prev = this.lockedHeader.find('>table>thead>tr>' + NAVHEADER + ':last');\n                    }\n                }\n                if (!prev[0] && this.lockedTable && current.closest('table')[0] === this.table[0]) {\n                    prev = this._relatedRow(row).children(NAVCELL).last();\n                }\n                if (prev[0] && prev[0] !== current[0]) {\n                    focusTable(prev.closest('table'), true);\n                }\n                this.current(prev);\n                return true;\n            },\n            _moveUp: function (current, shiftKey) {\n                var container = current.parent().parent();\n                var prev;\n                if (shiftKey) {\n                    prev = current.parent();\n                    prev = prev.prevAll(ITEMROW + ':first');\n                    prev = current.parent().is(ITEMROW) ? prev.children().eq(current.index()) : prev.children(DATA_CELL + ':last');\n                } else {\n                    prev = this._prevVerticalCell(container, current);\n                    if (!prev[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container, true);\n                        prev = this._prevVerticalCell(container, current);\n                        if (prev[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this.current(prev);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n            _moveDown: function (current, shiftKey) {\n                var container = current.parent().parent();\n                var next;\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW + ':first');\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL + ':first');\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container);\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this.current(next);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n            _tableClick: function (e) {\n                var currentTarget = $(e.currentTarget), isHeader = currentTarget.is('th'), table = this.table.add(this.lockedTable), headerTable = this.thead.parent().add($('>table', this.lockedHeader)), isInput = isInputElement(e.target), currentTable = currentTarget.closest('table')[0];\n                if (kendo.support.touch) {\n                    return;\n                }\n                if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                    return;\n                }\n                if (this.options.navigatable) {\n                    this.current(currentTarget);\n                }\n                if (isHeader || !isInput) {\n                    setTimeout(function () {\n                        if (!isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement())) {\n                            focusTable(currentTable, true);\n                        }\n                    });\n                }\n                if (isHeader) {\n                    e.preventDefault();\n                }\n            },\n            _setTabIndex: function (table) {\n                this._navigatableTables.attr(TABINDEX, -1);\n                table.attr(TABINDEX, 0);\n            },\n            _tableFocus: function (e) {\n                var current = this.current();\n                var table = $(e.currentTarget);\n                if (current && current.is(':visible')) {\n                    current.addClass(classNames.focused);\n                } else {\n                    this.current(table.find(FIRSTNAVITEM));\n                }\n                this._setTabIndex(table);\n            },\n            _tableBlur: function () {\n                var current = this.current();\n                if (current) {\n                    current.removeClass(classNames.focused);\n                }\n            },\n            _attachEvents: function () {\n                var icons = DOT + classNames.iconCollapse + ', .' + classNames.iconExpand + ', .' + classNames.refresh;\n                var retryButton = DOT + classNames.retry;\n                this.element.on(MOUSEDOWN + NS, icons, proxy(this._toggleChildren, this)).on(CLICK + NS, retryButton, this._dataSourceFetchProxy).on(CLICK + NS, '.k-button[data-command]', proxy(this._commandClick, this)).on(INPUT + NS, '.k-grid-search input', proxy(this._search, this));\n                this._attachCellEditingEventHandlers();\n            },\n            _attachCellEditingEventHandlers: function () {\n                var that = this;\n                var editable = that.options.editable;\n                var selectable = that.selectable && that.selectable.options.multiple;\n                var closeCell = function (e) {\n                    var target = activeElement();\n                    var editor = that.editor || {};\n                    var cell = editor.element;\n                    if (cell && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest('.k-animation-container').length) {\n                        if (editor.end()) {\n                            if (!e.relatedTarget && that._isPageable() && !isUndefined(that.dataSource._addChildPageSize)) {\n                                that._preventPageSizeRestore = false;\n                            }\n                            that.closeCell();\n                        }\n                    }\n                    that._preventPageSizeRestore = false;\n                };\n                if (that._isIncellEditable() && editable.update !== false) {\n                    that.wrapper.on(CLICK + NS, 'tr:not(.k-grouping-row) > td', function (e) {\n                        var td = $(this), isLockedCell = that.lockedTable && td.closest('table')[0] === that.lockedTable[0];\n                        if (td.hasClass(classNames.editCell) || td.has('a.k-grid-delete').length || td.has('button.k-grid-delete').length || td.closest('tbody')[0] !== that.tbody[0] && !isLockedCell || $(e.target).is(':input') || $(e.target).hasClass(classNames.iconExpand) || $(e.target).hasClass(classNames.iconCollapse)) {\n                            if (!that.editor) {\n                                that.dataSource._restorePageSizeAfterAddChild();\n                            }\n                            that._preventPageSizeRestore = false;\n                            return;\n                        }\n                        if (that.editor) {\n                            if (that.editor.end()) {\n                                if (selectable) {\n                                    $(activeElement()).blur();\n                                }\n                                that.closeCell();\n                                that.editCell(td);\n                            }\n                        } else {\n                            that.editCell(td);\n                        }\n                    }).on('mousedown' + NS, 'tr:not(.k-grouping-row) > td', function (e) {\n                        if (that.editor && that._isPageable() && !isUndefined(that.dataSource._addChildPageSize)) {\n                            that._preventPageSizeRestore = $(e.target).parents(DOT + classNames.editRow).length > 0;\n                        } else {\n                            that._preventPageSizeRestore = false;\n                        }\n                    }).on('focusin' + NS, function () {\n                        if (!$.contains(this, activeElement())) {\n                            clearTimeout(that._closeCellTimeout);\n                            that._closeCellTimeout = null;\n                        }\n                    }).on('focusout' + NS, function (e) {\n                        that._closeCellTimeout = setTimeout(function () {\n                            closeCell(e);\n                        }, 1);\n                    });\n                }\n            },\n            _commandByName: function (name) {\n                var columns = this.columns;\n                var toolbar = $.isArray(this.options.toolbar) ? this.options.toolbar : [];\n                var i, j, commands, currentName;\n                name = name.toLowerCase();\n                if (defaultCommands[name]) {\n                    return defaultCommands[name];\n                }\n                for (i = 0; i < columns.length; i++) {\n                    commands = columns[i].command;\n                    if (commands) {\n                        for (j = 0; j < commands.length; j++) {\n                            currentName = commands[j].name;\n                            if (!currentName) {\n                                continue;\n                            }\n                            if (currentName.toLowerCase() == name) {\n                                return commands[j];\n                            }\n                        }\n                    }\n                }\n                for (i = 0; i < toolbar.length; i++) {\n                    currentName = toolbar[i].name;\n                    if (!currentName) {\n                        continue;\n                    }\n                    if (currentName.toLowerCase() == name) {\n                        return toolbar[i];\n                    }\n                }\n            },\n            _commandClick: function (e) {\n                var button = $(e.currentTarget);\n                var commandName = button.attr('data-command');\n                var command = this._commandByName(commandName);\n                var row = button.parentsUntil(this.wrapper, 'tr');\n                row = row.length ? row : undefined;\n                if (command) {\n                    if (command.methodName) {\n                        this[command.methodName](row);\n                    } else if (command.click) {\n                        command.click.call(this, e);\n                    }\n                    e.preventDefault();\n                }\n            },\n            _search: function (e) {\n                var that = this;\n                var input = e.currentTarget;\n                clearTimeout(that._searchTimeOut);\n                that._searchTimeOut = setTimeout(function () {\n                    that._searchTimeOut = null;\n                    var options = that.options;\n                    var searchFields = options.search ? options.search.fields : null;\n                    var expression = {\n                        filters: [],\n                        logic: 'or'\n                    };\n                    var value = input.value;\n                    if (!searchFields) {\n                        searchFields = getColumnsFields(options.columns);\n                    }\n                    if (value) {\n                        for (var i = 0; i < searchFields.length; i++) {\n                            expression.filters.push({\n                                field: searchFields[i],\n                                operator: 'contains',\n                                value: value\n                            });\n                        }\n                    } else {\n                        expression = {};\n                    }\n                    that.dataSource.filter(expression);\n                }, 300);\n            },\n            _ensureExpandableColumn: function () {\n                if (this._autoExpandable) {\n                    delete this._autoExpandable.expandable;\n                }\n                var visibleColumns = grep(this.columns, not(is('hidden')));\n                visibleColumns = grep(visibleColumns, not(is('command')));\n                var expandableColumns = grep(visibleColumns, is('expandable'));\n                if (this.columns.length && !expandableColumns.length) {\n                    this._autoExpandable = visibleColumns[0];\n                    visibleColumns[0].expandable = true;\n                }\n            },\n            _columns: function () {\n                var columns = this.options.columns || [];\n                this.columns = map(columns, function (column) {\n                    column = typeof column === 'string' ? { field: column } : column;\n                    return extend({ encoded: true }, column);\n                });\n                var lockedCols = lockedColumns(columns);\n                if (lockedCols.length > 0) {\n                    this._hasLockedColumns = true;\n                    this.columns = lockedCols.concat(nonLockedColumns(this.columns));\n                }\n                this.columns = normalizeColumns(this.columns);\n                this._ensureExpandableColumn();\n                this._columnTemplates();\n                this._columnAttributes();\n            },\n            _columnTemplates: function () {\n                var idx, length, column;\n                var columns = leafColumns(this.columns);\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.template) {\n                        column.template = kendo.template(column.template);\n                    }\n                    if (column.headerTemplate) {\n                        column.headerTemplate = kendo.template(column.headerTemplate);\n                    }\n                    if (column.footerTemplate) {\n                        column.footerTemplate = kendo.template(column.footerTemplate);\n                    }\n                }\n            },\n            _columnAttributes: function () {\n                var idx, length;\n                var columns = this.columns;\n                function convertStyle(attr) {\n                    var properties, i, declaration;\n                    if (attr && attr.style) {\n                        properties = attr.style.split(';');\n                        attr.style = {};\n                        for (i = 0; i < properties.length; i++) {\n                            declaration = properties[i].split(':');\n                            var name = $.trim(declaration[0]);\n                            if (name) {\n                                attr.style[$.camelCase(name)] = $.trim(declaration[1]);\n                            }\n                        }\n                    }\n                }\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    convertStyle(columns[idx].attributes);\n                    convertStyle(columns[idx].headerAttributes);\n                }\n            },\n            _clearSortClasses: function () {\n                var that = this;\n                if (that.content) {\n                    that.content.find('col:not(.k-group-col):not(.k-hierarchy-col)').removeClass('k-sorted');\n                }\n                if (that.lockedContent) {\n                    that.lockedContent.find('col:not(.k-group-col):not(.k-hierarchy-col)').removeClass('k-sorted');\n                }\n            },\n            _layout: function () {\n                var columns = this.columns;\n                var element = this.element;\n                var layout = '';\n                this.wrapper = element.addClass(classNames.wrapper);\n                layout = '<div class=\\'#= gridHeader #\\'>';\n                if (this._hasLockedColumns) {\n                    layout += '<div class=\\'k-grid-header-locked\\'>' + '<table role=\\'grid\\'>' + '<colgroup></colgroup>' + '<thead role=\\'rowgroup\\' />' + '</table>' + '</div>';\n                }\n                layout += '<div class=\\'#= gridHeaderWrap #\\'>' + '<table role=\\'grid\\'>' + '<colgroup></colgroup>' + '<thead role=\\'rowgroup\\' />' + '</table>' + '</div>' + '</div>';\n                if (this._hasLockedColumns) {\n                    layout += '<div class=\\'k-grid-content-locked\\'>' + '<table role=\\'treegrid\\' tabindex=\\'0\\'>' + '<colgroup></colgroup>' + '<tbody />' + '</table>' + '</div>';\n                }\n                layout += '<div class=\\'#= gridContentWrap # k-auto-scrollable\\'>' + '<table role=\\'treegrid\\' tabindex=\\'0\\'>' + '<colgroup></colgroup>' + '<tbody />' + '</table>' + '</div>';\n                if (!this.options.scrollable) {\n                    layout = '<table role=\\'treegrid\\' tabindex=\\'0\\'>' + '<colgroup></colgroup>' + '<thead class=\\'#= gridHeader #\\' role=\\'rowgroup\\' />' + '<tbody />' + '</table>';\n                }\n                if (this.options.toolbar) {\n                    layout = '<div class=\\'#= header # #= gridToolbar #\\' />' + layout;\n                }\n                element.append(kendo.template(layout)(classNames) + '<div class=\\'k-status\\' />');\n                this.toolbar = element.find(DOT + classNames.gridToolbar);\n                var header = element.find(DOT + classNames.gridHeader).find('thead').addBack().filter('thead');\n                this.thead = header.last();\n                if (this.options.scrollable) {\n                    var rtl = kendo.support.isRtl(element);\n                    element.find('div.' + classNames.gridHeader).css(rtl ? 'padding-left' : 'padding-right', kendo.support.scrollbar());\n                }\n                var content = element.find(DOT + classNames.gridContentWrap);\n                if (!content.length) {\n                    content = element;\n                } else {\n                    this.content = content;\n                }\n                this.table = content.find('>table');\n                this.tbody = this.table.find('>tbody');\n                if (this._hasLockedColumns) {\n                    this.lockedHeader = header.first().closest('.k-grid-header-locked');\n                    this.lockedContent = element.find('.k-grid-content-locked');\n                    this.lockedTable = this.lockedContent.children();\n                }\n                this._initVirtualTrees();\n                this._renderCols();\n                this._renderHeader();\n                this.angular('compile', function () {\n                    return {\n                        elements: header.find('th.k-header').get(),\n                        data: map(columns, function (col) {\n                            return { column: col };\n                        })\n                    };\n                });\n            },\n            _initVirtualTrees: function () {\n                this._headerColsTree = new kendoDom.Tree(this.thead.prev()[0]);\n                this._contentColsTree = new kendoDom.Tree(this.tbody.prev()[0]);\n                this._headerTree = new kendoDom.Tree(this.thead[0]);\n                this._contentTree = new kendoDom.Tree(this.tbody[0]);\n                this._statusTree = new kendoDom.Tree(this.element.children('.k-status')[0]);\n                if (this.lockedHeader) {\n                    this._lockedHeaderColsTree = new kendoDom.Tree(this.lockedHeader.find('colgroup')[0]);\n                    this._lockedContentColsTree = new kendoDom.Tree(this.lockedTable.find('>colgroup')[0]);\n                    this._lockedHeaderTree = new kendoDom.Tree(this.lockedHeader.find('thead')[0]);\n                    this._lockedContentTree = new kendoDom.Tree(this.lockedTable.find('>tbody')[0]);\n                }\n            },\n            _toolbar: function () {\n                var options = this.options.toolbar;\n                var toolbar = this.toolbar;\n                if (!options) {\n                    return;\n                }\n                if ($.isArray(options)) {\n                    var buttons = this._buildCommands(options);\n                    new kendoDom.Tree(toolbar[0]).render(buttons);\n                } else {\n                    toolbar.append(kendo.template(options)({}));\n                }\n                this.angular('compile', function () {\n                    return { elements: toolbar.get() };\n                });\n            },\n            _lockedColumns: function () {\n                return grep(this.columns, is('locked'));\n            },\n            _nonLockedColumns: function () {\n                return grep(this.columns, not(is('locked')));\n            },\n            _templateColumns: function () {\n                return grep(this.columns, is('template'));\n            },\n            _flushCache: function () {\n                if (this.options.$angular && this._templateColumns().length) {\n                    this._contentTree.render([]);\n                    if (this._hasLockedColumns) {\n                        this._lockedContentTree.render([]);\n                    }\n                }\n            },\n            _render: function (options) {\n                var that = this;\n                options = options || {};\n                options = that._renderOptions(options);\n                var messages = this.options.messages;\n                var pageable = that._isPageable();\n                var dataSource = that.dataSource;\n                var maps = {\n                    children: options.filteredChildrenMap || options.childrenMap,\n                    ids: options.idsMap\n                };\n                var dataMaps = pageable ? maps && maps.children && maps.ids ? maps : dataSource._initDataMaps(dataSource._getData()) : {};\n                var childrenMap = dataMaps.children;\n                var idsMap = dataMaps.ids;\n                options.childrenMap = childrenMap;\n                options.idsMap = idsMap;\n                var data = that._dataToRender(options);\n                var level = that._renderedModelLevel(data[0], options);\n                var uidAttr = kendo.attr('uid');\n                var selected = this.select().removeClass('k-state-selected').map(function (_, row) {\n                    return $(row).attr(uidAttr);\n                });\n                var viewChildrenMap;\n                this._absoluteIndex = 0;\n                this._angularItems('cleanup');\n                this._angularFooters('cleanup');\n                this._flushCache();\n                that._clearRenderMap();\n                if (options.error) {\n                    this._showStatus(kendo.template('#: messages.requestFailed # ' + '<button class=\\'#= buttonClass #\\'>#: messages.retry #</button>')({\n                        buttonClass: [\n                            classNames.button,\n                            classNames.retry\n                        ].join(' '),\n                        messages: messages\n                    }));\n                } else if (!data.length) {\n                    this._hideStatus();\n                    this._showNoRecordsTemplate();\n                } else {\n                    if (pageable) {\n                        viewChildrenMap = that._viewChildrenMap(options);\n                    }\n                    this._hideStatus();\n                    this._contentTree.render(this._trs({\n                        columns: leafColumns(nonLockedColumns(this.columns)),\n                        editedColumn: options.editedColumn,\n                        editedColumnIndex: options.editedColumnIndex,\n                        aggregates: options.aggregates,\n                        selected: selected,\n                        data: data,\n                        childrenMap: childrenMap,\n                        viewChildrenMap: viewChildrenMap,\n                        visible: true,\n                        level: 0\n                    }));\n                    if (this._hasLockedColumns) {\n                        this._absoluteIndex = 0;\n                        this._lockedContentTree.render(this._trs({\n                            columns: leafColumns(lockedColumns(this.columns)),\n                            editedColumn: options.editedColumn,\n                            editedColumnIndex: options.editedColumnIndex,\n                            aggregates: options.aggregates,\n                            selected: selected,\n                            data: data,\n                            childrenMap: childrenMap,\n                            viewChildrenMap: viewChildrenMap,\n                            visible: true,\n                            level: level\n                        }));\n                    }\n                }\n                if (this._touchScroller) {\n                    this._touchScroller.contentResized();\n                }\n                this._muteAngularRebind(function () {\n                    this._angularItems('compile');\n                    this._angularFooters('compile');\n                });\n                this.items().filter(function () {\n                    return $.inArray($(this).attr(uidAttr), selected) >= 0;\n                }).addClass('k-state-selected');\n                this._syncLockedContentHeight();\n                that._togglePagerVisibility();\n                that._setExpanderElement();\n            },\n            _setExpanderElement: function () {\n                var that = this, hiddenDivClass = 'k-grid-content-expander', hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>', expander;\n                if (that.options.scrollable && that.wrapper.is(':visible')) {\n                    expander = that.table.parent().children('.' + hiddenDivClass);\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        if (!expander[0]) {\n                            expander = $(hiddenDiv).appendTo(that.table.parent());\n                        }\n                        if (that.thead) {\n                            expander.width(that.thead.width());\n                        }\n                    } else if (expander[0]) {\n                        expander.remove();\n                    }\n                }\n            },\n            _renderProgress: function (toggle) {\n                kendo.ui.progress(this.wrapper, toggle);\n            },\n            _renderOptions: function (options) {\n                options = options || {};\n                var that = this;\n                var dataMaps = that.dataSource._getDataMaps();\n                var filter = that.dataSource.filter();\n                if (that._isPageable()) {\n                    options.childrenMap = dataMaps.children;\n                    options.idsMap = dataMaps.ids;\n                    if (filter) {\n                        options.filteredChildrenMap = dataMaps.filteredChildren;\n                    }\n                }\n                return options;\n            },\n            _renderedModelLevel: function (model, options) {\n                return !this._isPageable() ? 0 : this.dataSource._pageableModelLevel(model, options);\n            },\n            _viewChildrenMap: function (options) {\n                options = options || {};\n                var that = this;\n                var dataSource = that.dataSource;\n                var viewChildrenMap = dataSource.childrenMap(dataSource.view());\n                var idField = dataSource._modelIdField();\n                var parentsNotInView = dataSource._parentNodesNotInView();\n                var parentNotInView;\n                var parentNotInViewId;\n                var parents;\n                var parent;\n                var parentId;\n                var child;\n                var childId;\n                var parentsCopy;\n                that._clearRenderMap();\n                for (var i = 0; i < parentsNotInView.length; i++) {\n                    parentNotInView = parentsNotInView[i];\n                    parentNotInViewId = parentNotInView[idField];\n                    that._markNodeAsNonRenderable(parentNotInViewId);\n                    viewChildrenMap[parentNotInViewId] = viewChildrenMap[parentNotInViewId] || [];\n                    parents = dataSource._parentNodes(parentNotInView);\n                    parentsCopy = parents.slice();\n                    parentsCopy.push(parentNotInView);\n                    for (var parentIndex = 0; parentIndex < parentsCopy.length - 1; parentIndex++) {\n                        parent = parentsCopy[parentIndex];\n                        parentId = parent[idField];\n                        that._markNodeAsNonRenderable(parentId);\n                        viewChildrenMap[parentId] = viewChildrenMap[parentId] || [];\n                        child = parentsCopy[parentIndex + 1];\n                        childId = child[idField];\n                        that._markNodeAsNonRenderable(childId);\n                        viewChildrenMap[childId] = viewChildrenMap[childId] || [];\n                        if (viewChildrenMap[parentId].indexOf(child) === -1) {\n                            viewChildrenMap[parentId].unshift(child);\n                        }\n                    }\n                }\n                return viewChildrenMap;\n            },\n            _clearRenderMap: function () {\n                this._skipRenderingMap = {};\n            },\n            _dataToRender: function (options) {\n                var that = this;\n                if (that._isPageable()) {\n                    return that.dataSource._pageableRootNodes(options);\n                }\n                return that.dataSource.rootNodes();\n            },\n            _markNodeAsNonRenderable: function (nodeId) {\n                this._skipRenderingMap[nodeId] = true;\n            },\n            _adjustRowsHeight: function (table1, table2) {\n                if (!this._hasLockedColumns) {\n                    return;\n                }\n                var rows = table1[0].rows;\n                var length = rows.length;\n                var idx;\n                var rows2 = table2[0].rows;\n                var containers = table1.add(table2);\n                var containersLength = containers.length;\n                var heights = [];\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    if (rows[idx].style.height) {\n                        rows[idx].style.height = rows2[idx].style.height = '';\n                    }\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    var offsetHeight1 = rows[idx].offsetHeight;\n                    var offsetHeight2 = rows2[idx].offsetHeight;\n                    var height = 0;\n                    if (offsetHeight1 > offsetHeight2) {\n                        height = offsetHeight1;\n                    } else if (offsetHeight1 < offsetHeight2) {\n                        height = offsetHeight2;\n                    }\n                    heights.push(height);\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = 'none';\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (heights[idx]) {\n                        rows[idx].style.height = rows2[idx].style.height = heights[idx] + 1 + 'px';\n                    }\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = '';\n                }\n            },\n            _ths: function (columns, rowSpan) {\n                var ths = [];\n                var column, title, children, cellClasses, attr, headerContent;\n                for (var i = 0, length = columns.length; i < length; i++) {\n                    column = columns[i];\n                    children = [];\n                    cellClasses = [classNames.header];\n                    if (column.headerTemplate) {\n                        title = column.headerTemplate({});\n                    } else {\n                        title = column.title || column.field || '';\n                    }\n                    if (column.headerTemplate) {\n                        headerContent = kendoHtmlElement(title);\n                    } else {\n                        headerContent = kendoTextElement(title);\n                    }\n                    if (column.sortable) {\n                        children.push(kendoDomElement('a', {\n                            href: '#',\n                            className: classNames.link\n                        }, [headerContent]));\n                    } else {\n                        children.push(headerContent);\n                    }\n                    attr = {\n                        'data-field': column.field,\n                        'data-title': column.title,\n                        'style': column.hidden === true ? { 'display': 'none' } : {},\n                        className: cellClasses.join(' '),\n                        'role': 'columnheader'\n                    };\n                    if (!column.columns) {\n                        attr.rowSpan = rowSpan ? rowSpan : 1;\n                    }\n                    if (column.headerAttributes) {\n                        if (column.headerAttributes.colSpan === 1) {\n                            delete column.headerAttributes.colSpan;\n                        }\n                        if (column.headerAttributes['class']) {\n                            attr.className += ' ' + column.headerAttributes['class'];\n                            delete column.headerAttributes['class'];\n                        }\n                    }\n                    if (column['data-index'] > -1) {\n                        attr['data-index'] = column['data-index'];\n                    }\n                    attr = extend(true, {}, attr, column.headerAttributes);\n                    ths.push(kendoDomElement('th', attr, children));\n                }\n                return ths;\n            },\n            _cols: function (columns) {\n                var cols = [];\n                var width, attr;\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].hidden === true) {\n                        continue;\n                    }\n                    width = columns[i].width;\n                    attr = {};\n                    if (width && parseInt(width, 10) !== 0) {\n                        attr.style = { width: typeof width === 'string' ? width : width + 'px' };\n                    }\n                    cols.push(kendoDomElement('col', attr));\n                }\n                return cols;\n            },\n            _clearColsCache: function () {\n                this._headerColsTree.render([]);\n                if (this.options.scrollable) {\n                    this._contentColsTree.render([]);\n                }\n                if (this._hasLockedColumns) {\n                    this._lockedHeaderColsTree.render([]);\n                    this._lockedContentColsTree.render([]);\n                }\n            },\n            _renderCols: function () {\n                var columns = nonLockedColumns(this.columns);\n                this._headerColsTree.render(this._cols(leafColumns(columns)));\n                if (this.options.scrollable) {\n                    this._contentColsTree.render(this._cols(leafColumns(columns)));\n                }\n                if (this._hasLockedColumns) {\n                    columns = lockedColumns(this.columns);\n                    this._lockedHeaderColsTree.render(this._cols(leafColumns(columns)));\n                    this._lockedContentColsTree.render(this._cols(leafColumns(columns)));\n                }\n            },\n            _retrieveFirstColumn: function (columns, rows) {\n                var result = $();\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(':not(:first())');\n                    }\n                    result = result.add(rows);\n                }\n                return result;\n            },\n            _updateFirstColumnClass: function () {\n                var that = this;\n                var columns = that.columns || [];\n                var tr = that.thead.find('>tr:not(:first)');\n                var rows;\n                columns = nonLockedColumns(columns);\n                rows = that._retrieveFirstColumn(columns, tr);\n                if (that.lockedHeader) {\n                    tr = that.lockedHeader.find('thead>tr:not(.k-filter-row):not(:first)');\n                    columns = lockedColumns(that.columns);\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n                rows.each(function () {\n                    var ths = $(this).find('th');\n                    ths.removeClass('k-first');\n                    ths.eq(0).addClass('k-first');\n                });\n            },\n            _updateRowSpans: function (rows) {\n                for (var i = rows.length - 1; i >= 0; i--) {\n                    var included = visibleChildColumns(rows[i].cells).length > 0;\n                    if (included) {\n                        rows[i].rowSpan = rows.length - i;\n                    }\n                }\n            },\n            _setColumnDataIndexes: function (columns) {\n                for (var i = 0; i < columns.length; i++) {\n                    columns[i]['data-index'] = i;\n                }\n            },\n            _updateColumnCellIndex: function () {\n                var header;\n                var offset = 0;\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find('thead');\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n            _setParentsVisibility: function (column, visible) {\n                var columns = this.columns;\n                var idx;\n                var parents = [];\n                var parent;\n                var predicate = visible ? function (p) {\n                    return visibleColumns(p.columns).length && p.hidden;\n                } : function (p) {\n                    return !visibleColumns(p.columns).length && !p.hidden;\n                };\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n                        if (predicate(parent)) {\n                            parent.hidden = !visible;\n                        }\n                    }\n                }\n            },\n            _prepareColumns: function (rows, columns, parentCell, parentRow, parentColumn) {\n                var row = parentRow || rows[rows.length - 1];\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = $.extend({}, columns[idx], { headerAttributes: columns[idx].headerAttributes || {} });\n                    row.cells.push(cell);\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = {\n                                rowSpan: 0,\n                                cells: [],\n                                index: rows.length\n                            };\n                            rows.push(childRow);\n                        }\n                        if (columns[idx].columns.length) {\n                            cell.headerAttributes.colSpan = visibleChildColumns(columns[idx].columns).length || 1;\n                            cell.headerAttributes['data-colspan'] = leafColumns(columns[idx].columns).length;\n                        }\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow, columns[idx]);\n                        if (!cell.hidden) {\n                            totalColSpan += cell.headerAttributes.colSpan - 1;\n                        }\n                        row.rowSpan = rows.length - row.index;\n                    }\n                    columns[idx].rowIndex = row.index;\n                    if (parentColumn) {\n                        columns[idx].parentColumn = parentColumn;\n                    }\n                    columns[idx].cellIndex = row.cells.length - 1;\n                }\n                if (parentCell) {\n                    parentCell.headerAttributes.colSpan += totalColSpan;\n                }\n            },\n            _renderHeaderTree: function (tree, columns, hasMultiColumnHeaders) {\n                var idx;\n                var rows = [];\n                var rowsToRender = [];\n                if (hasMultiColumnHeaders) {\n                    rows = [{\n                            rowSpan: 1,\n                            cells: [],\n                            index: 0\n                        }];\n                    this._prepareColumns(rows, columns);\n                    this._updateRowSpans(rows);\n                    for (idx = 0; idx < rows.length; idx++) {\n                        rowsToRender.push(kendoDomElement('tr', { 'role': 'row' }, this._ths(rows[idx].cells, rows[idx].rowSpan)));\n                    }\n                    tree.render(rowsToRender);\n                } else {\n                    tree.render([kendoDomElement('tr', { 'role': 'row' }, this._ths(columns))]);\n                }\n            },\n            _renderHeader: function () {\n                var columns = nonLockedColumns(this.columns);\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                this._setColumnDataIndexes(leafColumns(this.columns));\n                this._renderHeaderTree(this._headerTree, columns, hasMultiColumnHeaders);\n                if (this._hasLockedColumns) {\n                    columns = lockedColumns(this.columns);\n                    this._renderHeaderTree(this._lockedHeaderTree, columns, hasMultiColumnHeaders);\n                    this._applyLockedContainersWidth();\n                    this._syncLockedHeaderHeight();\n                }\n                this._updateFirstColumnClass();\n            },\n            _applyLockedContainersWidth: function () {\n                if (!this._hasLockedColumns) {\n                    return;\n                }\n                var lockedWidth = columnsWidth(this.lockedHeader.find('>table>colgroup>col'));\n                var headerTable = this.thead.parent();\n                var nonLockedWidth = columnsWidth(headerTable.find('>colgroup>col'));\n                var wrapperWidth = this.wrapper[0].clientWidth;\n                var scrollbar = kendo.support.scrollbar();\n                if (lockedWidth >= wrapperWidth) {\n                    lockedWidth = wrapperWidth - 3 * scrollbar;\n                }\n                this.lockedHeader.add(this.lockedContent).width(lockedWidth);\n                headerTable.add(this.table).width(nonLockedWidth);\n                var width = wrapperWidth - lockedWidth;\n                this.content.width(width - 1);\n                headerTable.parent().width(width - scrollbar - 2);\n            },\n            _trs: function (options) {\n                var that = this;\n                var model, attr, className, hasChildren, childNodes, i, length;\n                var modelId;\n                var rows = [];\n                var level = options.level;\n                var data = options.data;\n                var dataSource = this.dataSource;\n                var aggregates = dataSource.aggregates() || {};\n                var idField = dataSource._modelIdField();\n                var parentIdField = dataSource._modelParentIdField();\n                var columns = options.columns;\n                var pageable = that._isPageable();\n                var childrenMap = options.childrenMap || dataSource.childrenMap(dataSource._getData());\n                for (i = 0, length = data.length; i < length; i++) {\n                    className = [];\n                    model = data[i];\n                    modelId = model[idField];\n                    childNodes = pageable ? childrenMap[modelId] : model.loaded() ? dataSource.childNodes(model) : [];\n                    hasChildren = childNodes && childNodes.length;\n                    attr = { 'role': 'row' };\n                    attr[kendo.attr('uid')] = model.uid;\n                    if (hasChildren) {\n                        attr['aria-expanded'] = !!model.expanded;\n                    }\n                    if (options.visible) {\n                        if (!pageable || pageable && !that._skipRenderingMap[modelId]) {\n                            if (this._absoluteIndex % 2 !== 0) {\n                                className.push(classNames.alt);\n                            }\n                            this._absoluteIndex++;\n                        }\n                    } else {\n                        attr.style = { display: 'none' };\n                    }\n                    if ($.inArray(model.uid, options.selected) >= 0) {\n                        className.push(classNames.selected);\n                    }\n                    if (hasChildren) {\n                        className.push(classNames.group);\n                    }\n                    if (model._edit) {\n                        className.push('k-grid-edit-row');\n                    }\n                    attr.className = className.join(' ');\n                    if (!that._skipRenderingMap[modelId]) {\n                        var row = this._tds({\n                            model: model,\n                            attr: attr,\n                            level: pageable ? that._renderedModelLevel(model, options) : level,\n                            editedColumn: options.editedColumn,\n                            editedColumnIndex: options.editedColumnIndex\n                        }, columns, proxy(this._td, this));\n                        rows.push(row);\n                    }\n                    if (hasChildren) {\n                        if (pageable) {\n                            childNodes = (options.viewChildrenMap || {})[modelId] || [];\n                        }\n                        if (childNodes.length === 0) {\n                            continue;\n                        }\n                        rows = rows.concat(this._trs({\n                            columns: columns,\n                            editedColumn: options.editedColumn,\n                            editedColumnIndex: options.editedColumnIndex,\n                            aggregates: aggregates,\n                            selected: options.selected,\n                            visible: pageable ? options.visible : options.visible && !!model.expanded,\n                            data: childNodes,\n                            childrenMap: options.childrenMap || childrenMap,\n                            viewChildrenMap: options.viewChildrenMap,\n                            level: level + 1\n                        }));\n                    }\n                }\n                if (this._hasFooterTemplate() && model) {\n                    attr = {\n                        className: classNames.footerTemplate,\n                        'data-parentId': model[parentIdField]\n                    };\n                    if (!options.visible) {\n                        attr.style = { display: 'none' };\n                    }\n                    rows.push(this._tds({\n                        model: aggregates[model[parentIdField]],\n                        attr: attr,\n                        level: level,\n                        editedColumn: options.editedColumn,\n                        editedColumnIndex: options.editedColumnIndex\n                    }, columns, this._footerId));\n                }\n                return rows;\n            },\n            _footerId: function (options) {\n                var content = [];\n                var column = options.column;\n                var template = options.column.footerTemplate || $.noop;\n                var aggregates = options.model[column.field] || {};\n                var attr = {\n                    'role': 'gridcell',\n                    'style': column.hidden === true ? { 'display': 'none' } : {}\n                };\n                if (column.expandable) {\n                    content = content.concat(createPlaceholders({\n                        level: options.level + 1,\n                        className: classNames.iconPlaceHolder\n                    }));\n                }\n                if (column.attributes) {\n                    extend(true, attr, column.attributes, { 'style': column.hidden === true ? { 'display': 'none' } : {} });\n                }\n                content.push(kendoHtmlElement(template(aggregates) || ''));\n                return kendoDomElement('td', attr, content);\n            },\n            _hasFooterTemplate: function () {\n                return !!grep(this.columns, function (c) {\n                    return c.footerTemplate;\n                }).length;\n            },\n            _tds: function (options, columns, renderer) {\n                var children = [];\n                var column;\n                var editedColumnField = (options.editedColumn || {}).field;\n                var incellEditing = this._isIncellEditable();\n                var length = columns.length;\n                for (var i = 0; i < length; i++) {\n                    column = columns[i];\n                    var col = renderer({\n                        model: options.model,\n                        column: column,\n                        editColumn: !incellEditing || incellEditing && column.field === editedColumnField && options.editedColumnIndex === i,\n                        level: options.level\n                    });\n                    children.push(col);\n                }\n                return kendoDomElement('tr', options.attr, children);\n            },\n            _td: function (options) {\n                var children = [];\n                var model = options.model;\n                var column = options.column;\n                var iconClass;\n                var attr = {\n                    'role': 'gridcell',\n                    'style': column.hidden === true ? { 'display': 'none' } : {}\n                };\n                var incellEditing = this._isIncellEditable();\n                var columnHasEditCommand = false;\n                if (column.attributes) {\n                    extend(true, attr, column.attributes);\n                }\n                if (model._edit && column.field && options.editColumn && (incellEditing || !incellEditing && isColumnEditable(column, model))) {\n                    attr[kendo.attr('container-for')] = column.field;\n                    if (incellEditing) {\n                        if (attr.className && attr.className.indexOf(classNames.editCell) !== -1) {\n                            attr.className += ' ' + classNames.editCell;\n                        } else if (!attr.className) {\n                            attr.className = classNames.editCell;\n                        }\n                    }\n                } else {\n                    if (column.expandable) {\n                        children = createPlaceholders({\n                            level: options.level,\n                            className: classNames.iconPlaceHolder\n                        });\n                        iconClass = [classNames.icon];\n                        if (model.hasChildren) {\n                            iconClass.push(model.expanded ? classNames.iconCollapse : classNames.iconExpand);\n                        } else {\n                            iconClass.push(classNames.iconHidden);\n                        }\n                        if (model._error) {\n                            iconClass.push(classNames.refresh);\n                        } else if (!model.loaded() && model.expanded) {\n                            iconClass.push(classNames.loading);\n                        }\n                        children.push(kendoDomElement('span', { className: iconClass.join(' ') }));\n                        attr.style['white-space'] = 'nowrap';\n                    }\n                    if (isDirtyColumn(column, model)) {\n                        if (attr.className) {\n                            attr.className += classNames.dirtyCell;\n                        } else if (!attr.className) {\n                            attr.className = classNames.dirtyCell;\n                        }\n                    }\n                    if (column.command) {\n                        if (attr.className && attr.className.indexOf('k-command-cell') !== -1) {\n                            attr.className += ' k-command-cell';\n                        } else if (!attr.className) {\n                            attr.className = 'k-command-cell';\n                        }\n                        columnHasEditCommand = grep(column.command, function (command) {\n                            return command === EDIT || command.name === EDIT;\n                        }).length > 0;\n                        if (model._edit && !this._isIncellEditable() && columnHasEditCommand) {\n                            children = this._buildCommands([\n                                'update',\n                                'canceledit'\n                            ]);\n                        } else {\n                            children = this._buildCommands(column.command);\n                        }\n                    } else {\n                        children.push(this._cellContent(column, model));\n                    }\n                    if (attr['class']) {\n                        attr.className = attr['class'] + ' ' + attr.className;\n                    }\n                }\n                return kendoDomElement('td', attr, children);\n            },\n            _cellContent: function (column, model) {\n                var that = this;\n                var value;\n                var incellEditing = that._isIncellEditable();\n                var dirtyIndicator = incellEditing ? that._evalDirtyIndicatorTemplate(column, model) : '';\n                if (column.template) {\n                    value = that._evalColumnTemplate(column, model);\n                } else if (column.field) {\n                    value = model.get(column.field);\n                    if (value !== null && !isUndefined(value)) {\n                        if (column.format) {\n                            value = kendo.format(column.format, value);\n                        }\n                        value = dirtyIndicator + value;\n                    } else {\n                        value = dirtyIndicator;\n                    }\n                } else if (value === null || isUndefined(value)) {\n                    value = '';\n                }\n                if (column.template || !column.encoded) {\n                    return kendoHtmlElement(value);\n                } else {\n                    if (incellEditing) {\n                        return kendoHtmlElement(value);\n                    } else {\n                        return kendoTextElement(value);\n                    }\n                }\n            },\n            _evalColumnTemplate: function (column, model) {\n                if (this._isIncellEditable()) {\n                    return this._evalCustomColumnTemplate(column, model);\n                } else {\n                    return column.template(model);\n                }\n            },\n            _evalCustomColumnTemplate: function (column, model) {\n                var that = this;\n                var templateSettings = that._customTemplateSettings();\n                var columnTemplateAlias = '#=this.columnTemplate(' + templateSettings.paramName + ')#';\n                var templateString = that._dirtyIndicatorTemplate(column.field) + columnTemplateAlias;\n                var templateFunction = proxy(kendoTemplate(templateString, templateSettings), { columnTemplate: column.template });\n                return templateFunction(model);\n            },\n            _evalDirtyIndicatorTemplate: function (column, model) {\n                var dirtyIndicatorTemplate = this._dirtyIndicatorTemplate(column.field);\n                return kendoTemplate(dirtyIndicatorTemplate)(model);\n            },\n            _dirtyIndicatorTemplate: function (field) {\n                var that = this;\n                var dirtyField;\n                var templateSettings = that._customTemplateSettings();\n                var paramName = templateSettings.paramName;\n                if (field && paramName) {\n                    dirtyField = field.charAt(0) === '[' ? kendo.expr(field, paramName + '.dirtyFields') : paramName + '.dirtyFields[\\'' + field + '\\']';\n                    return '#= ' + paramName + ' && ' + paramName + '.dirty && ' + paramName + '.dirtyFields && ' + dirtyField + ' ? \\'<span class=\"k-dirty\"></span>\\' : \\'\\' #';\n                }\n                return '';\n            },\n            _customTemplateSettings: function () {\n                return extend({}, kendo.Template, this.options.templateSettings);\n            },\n            _buildCommands: function (commands) {\n                var i, result = [];\n                for (i = 0; i < commands.length; i++) {\n                    result.push(this._handleCommand(commands[i]));\n                }\n                return result;\n            },\n            _handleCommand: function (command) {\n                var name = (command.name || command).toLowerCase();\n                var text = this.options.messages.commands[name];\n                var icon = [];\n                command = extend({}, defaultCommands[name], { text: text }, command);\n                if (command.imageClass) {\n                    icon.push(kendoDomElement('span', {\n                        className: [\n                            'k-icon',\n                            command.imageClass\n                        ].join(' ')\n                    }));\n                }\n                if (command.template) {\n                    return kendoHtmlElement(kendo.template(command.template)({ messages: this.options.messages }));\n                } else {\n                    return this._button(command, name, icon);\n                }\n            },\n            _button: function (command, name, icon) {\n                return kendoDomElement('button', {\n                    'type': 'button',\n                    'data-command': name,\n                    className: [\n                        'k-button',\n                        'k-button-icontext',\n                        command.className\n                    ].join(' ')\n                }, icon.concat([kendoTextElement(command.text || command.name)]));\n            },\n            _positionResizeHandle: function (e) {\n                var th = $(e.currentTarget);\n                var resizeHandle = this.resizeHandle;\n                var position = th.position();\n                var left;\n                var cellWidth = outerWidth(th);\n                var container = th.closest('div');\n                var button = typeof e.buttons !== 'undefined' ? e.buttons : e.which || e.button;\n                var indicatorWidth = this.options.columnResizeHandleWidth || 3;\n                left = cellWidth;\n                if (typeof button !== 'undefined' && button !== 0) {\n                    return;\n                }\n                if (!resizeHandle) {\n                    resizeHandle = this.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\" /></div>');\n                }\n                var cells = leafDataCells(th.closest('thead')).filter(':visible');\n                if (isRtl) {\n                    left = th.position().left;\n                } else {\n                    for (var idx = 0; idx < cells.length; idx++) {\n                        if (cells[idx] == th[0]) {\n                            break;\n                        }\n                        left += cells[idx].offsetWidth;\n                    }\n                }\n                container.append(resizeHandle);\n                resizeHandle.show().css({\n                    top: position.top,\n                    left: left - indicatorWidth * 3 / 2,\n                    height: outerHeight(th),\n                    width: indicatorWidth * 3\n                }).data('th', th);\n                var that = this;\n                resizeHandle.off('dblclick' + NS).on('dblclick' + NS, function () {\n                    var index = th.index();\n                    if ($.contains(that.thead[0], th[0])) {\n                        index += grep(that.columns, function (val) {\n                            return val.locked && !val.hidden;\n                        }).length;\n                    }\n                    that.autoFitColumn(index);\n                });\n            },\n            autoFitColumn: function (column) {\n                var that = this, options = that.options, columns = that.columns, index, browser = kendo.support.browser, th, headerTable, isLocked, visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).filter(isCellVisible).length : 0, col;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(columns, function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.hidden) {\n                    return;\n                }\n                index = inArray(column, columns);\n                isLocked = column.locked;\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children('table');\n                } else {\n                    headerTable = that.thead.parent();\n                }\n                th = headerTable.find('[data-index=\\'' + index + '\\']');\n                var contentTable = isLocked ? that.lockedTable : that.table, footer = that.footer || $();\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                }\n                var footerTable = footer.find('table').first();\n                if (that.lockedHeader && visibleLocked >= index && !isLocked) {\n                    index -= visibleLocked;\n                }\n                for (var j = 0; j < columns.length; j++) {\n                    if (columns[j] === column) {\n                        break;\n                    } else {\n                        if (columns[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n                if (options.scrollable) {\n                    col = headerTable.find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')').add(contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')')).add(footerTable.find('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')'));\n                } else {\n                    col = contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')');\n                }\n                var tables = headerTable.add(contentTable).add(footerTable);\n                var oldColumnWidth = outerWidth(th);\n                col.width('');\n                tables.css('table-layout', 'fixed');\n                col.width('auto');\n                tables.addClass('k-autofitting');\n                tables.css('table-layout', '');\n                var newColumnWidth = Math.ceil(Math.max(outerWidth(th), outerWidth(contentTable.find('tr').eq(0).children('td:visible').eq(index)), outerWidth(footerTable.find('tr').eq(0).children('td:visible').eq(index))));\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n                if (options.scrollable) {\n                    var cols = headerTable.find('col'), colWidth, totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf('%') == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n                    if (totalWidth) {\n                        tables.each(function () {\n                            this.style.width = totalWidth + 'px';\n                        });\n                    }\n                }\n                if (browser.msie && browser.version == 8) {\n                    tables.css('display', 'inline-table');\n                    setTimeout(function () {\n                        tables.css('display', 'table');\n                    }, 1);\n                }\n                tables.removeClass('k-autofitting');\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            },\n            _adjustLockedHorizontalScrollBar: function () {\n                var table = this.table, content = table.parent();\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(content.height() - scrollbar);\n            },\n            _syncLockedContentHeight: function () {\n                if (this.lockedTable) {\n                    if (!this._touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                }\n            },\n            _syncLockedHeaderHeight: function () {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children('table');\n                    var table = this.thead.parent();\n                    this._adjustRowsHeight(lockedTable, table);\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n            _resizable: function () {\n                if (!this.options.resizable) {\n                    return;\n                }\n                if (this.resizable) {\n                    this.resizable.destroy();\n                }\n                var treelist = this;\n                $(this.lockedHeader).find('thead').add(this.thead).on('mousemove' + NS, 'th', $.proxy(this._positionResizeHandle, this));\n                this.resizable = new kendo.ui.Resizable(this.wrapper, {\n                    handle: '.k-resize-handle',\n                    start: function (e) {\n                        var th = $(e.currentTarget).data('th');\n                        var index = $.inArray(th[0], leafDataCells(th.closest('thead')).filter(':visible'));\n                        var colSelector = 'col:eq(' + index + ')';\n                        var header, contentTable;\n                        treelist.wrapper.addClass('k-grid-column-resizing');\n                        if (treelist.lockedHeader && $.contains(treelist.lockedHeader[0], th[0])) {\n                            header = treelist.lockedHeader;\n                            contentTable = treelist.lockedTable;\n                        } else {\n                            header = treelist.thead.parent();\n                            contentTable = treelist.table;\n                        }\n                        this.col = contentTable.children('colgroup').find(colSelector).add(header.find(colSelector));\n                        this.th = th;\n                        this.startLocation = e.x.location;\n                        this.columnWidth = outerWidth(th);\n                        this.table = this.col.closest('table');\n                        this.totalWidth = this.table.width();\n                    },\n                    resize: function (e) {\n                        var rtlModifier = isRtl ? -1 : 1;\n                        var minColumnWidth = 11;\n                        var delta = e.x.location * rtlModifier - this.startLocation * rtlModifier;\n                        if (this.columnWidth + delta < minColumnWidth) {\n                            delta = minColumnWidth - this.columnWidth;\n                        }\n                        this.table.width(this.totalWidth + delta);\n                        this.col.width(this.columnWidth + delta);\n                    },\n                    resizeend: function () {\n                        treelist.wrapper.removeClass('k-grid-column-resizing');\n                        var field = this.th.attr('data-field');\n                        var column = grep(leafColumns(treelist.columns), function (c) {\n                            return c.field == field;\n                        });\n                        var newWidth = Math.floor(outerWidth(this.th));\n                        column[0].width = newWidth;\n                        treelist._resize();\n                        treelist._syncLockedContentHeight();\n                        treelist._syncLockedHeaderHeight();\n                        treelist.trigger(COLUMNRESIZE, {\n                            column: column,\n                            oldWidth: this.columnWidth,\n                            newWidth: newWidth\n                        });\n                        this.table = this.col = this.th = null;\n                    }\n                });\n            },\n            _sortable: function () {\n                var columns;\n                var column;\n                var sortableInstance;\n                var cells;\n                var cell, idx, length;\n                var sortable = this.options.sortable;\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                if (!sortable) {\n                    return;\n                }\n                if (hasMultiColumnHeaders) {\n                    if (this.lockedHeader) {\n                        cells = sortCells(leafDataCells(this.lockedHeader.find('>table>thead')).add(leafDataCells(this.thead)));\n                    } else {\n                        cells = leafDataCells(this.thead);\n                    }\n                } else {\n                    cells = $(this.lockedHeader).add(this.thead).find('th');\n                }\n                columns = leafColumns(this.columns);\n                for (idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n                        sortableInstance = cell.data('kendoColumnSorter');\n                        if (sortableInstance) {\n                            sortableInstance.destroy();\n                        }\n                        cell.kendoColumnSorter(extend({}, sortable, column.sortable, { dataSource: this.dataSource }));\n                    }\n                }\n            },\n            _filterable: function () {\n                var cells;\n                var filterable = this.options.filterable;\n                var idx;\n                var length;\n                var columns;\n                var column;\n                var cell;\n                var filterMenuInstance;\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                if (!filterable || this.options.columnMenu) {\n                    return;\n                }\n                var filterInit = proxy(function (e) {\n                    this.trigger(FILTERMENUINIT, {\n                        field: e.field,\n                        container: e.container\n                    });\n                }, this);\n                var filterOpen = proxy(function (e) {\n                    this.trigger(FILTERMENUOPEN, {\n                        field: e.field,\n                        container: e.container\n                    });\n                }, this);\n                if (hasMultiColumnHeaders) {\n                    if (this.lockedHeader) {\n                        cells = leafDataCells(this.lockedHeader.find('>table>thead')).add(leafDataCells(this.thead));\n                    } else {\n                        cells = leafDataCells(this.thead);\n                    }\n                } else {\n                    cells = $(this.lockedHeader).add(this.thead).find('th');\n                }\n                columns = leafColumns(this.columns);\n                for (idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    cell = cells.eq(idx);\n                    filterMenuInstance = cell.data('kendoFilterMenu');\n                    if (filterMenuInstance) {\n                        filterMenuInstance.destroy();\n                    }\n                    if (column.command || column.filterable === false) {\n                        continue;\n                    }\n                    cell.kendoFilterMenu(extend(true, {}, filterable, column.filterable, {\n                        dataSource: this.dataSource,\n                        init: filterInit,\n                        open: filterOpen\n                    }));\n                }\n            },\n            _change: function () {\n                this.trigger(CHANGE);\n            },\n            _isLocked: function () {\n                return this.lockedHeader !== null;\n            },\n            _selectable: function () {\n                var that = this;\n                var selectable = this.options.selectable;\n                var filter;\n                var element = this.table;\n                var useAllItems;\n                var isLocked = that._isLocked();\n                var multi;\n                var cell;\n                if (selectable) {\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n                    if (this._hasLockedColumns) {\n                        element = element.add(this.lockedTable);\n                        useAllItems = selectable.multiple && selectable.cell;\n                    }\n                    filter = '>tbody>tr:not(.k-footer-template)';\n                    if (selectable.cell) {\n                        filter = filter + '>td';\n                    }\n                    this.selectable = new kendo.ui.Selectable(element, {\n                        filter: filter,\n                        aria: true,\n                        multiple: selectable.multiple,\n                        change: proxy(this._change, this),\n                        useAllItems: useAllItems,\n                        continuousItems: proxy(this._continuousItems, this, filter, selectable.cell),\n                        relatedTarget: !selectable.cell && this._hasLockedColumns ? proxy(this._selectableTarget, this) : undefined\n                    });\n                    if (that.options.navigatable) {\n                        multi = selectable.multiple;\n                        cell = selectable.cell;\n                        element.on('keydown' + NS, function (e) {\n                            var current = that.current();\n                            var target = e.target;\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, element) > -1 && !current.is('.k-header')) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(classNames.selected)) {\n                                            current.removeClass(classNames.selected);\n                                            that.trigger(CHANGE);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                            } else if (!cell && (e.shiftKey && e.keyCode == keys.LEFT || e.shiftKey && e.keyCode == keys.RIGHT || e.shiftKey && e.keyCode == keys.UP || e.shiftKey && e.keyCode == keys.DOWN || e.keyCode === keys.SPACEBAR && e.shiftKey)) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n                                } else {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                }\n                            }\n                        });\n                    }\n                }\n            },\n            _continuousItems: function (filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n                var lockedItems = $(filter, this.lockedTable);\n                var nonLockedItems = $(filter, this.table);\n                var columns = cell ? lockedColumns(this.columns).length : 1;\n                var nonLockedColumns = cell ? this.columns.length - columns : 1;\n                var result = [];\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n                }\n                return result;\n            },\n            _selectableTarget: function (items) {\n                var related;\n                var result = $();\n                for (var idx = 0, length = items.length; idx < length; idx++) {\n                    related = this._relatedRow(items[idx]);\n                    if (inArray(related[0], items) < 0) {\n                        result = result.add(related);\n                    }\n                }\n                return result;\n            },\n            _relatedRow: function (row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n                if (!lockedTable) {\n                    return row;\n                }\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find('>tbody>tr').index(row);\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n                return table.find('>tbody>tr').eq(index);\n            },\n            select: function (value) {\n                var selectable = this.selectable;\n                if (!selectable) {\n                    return $();\n                }\n                if (typeof value !== 'undefined') {\n                    if (!selectable.options.multiple) {\n                        selectable.clear();\n                        value = value.first();\n                    }\n                    if (this._hasLockedColumns) {\n                        value = value.add($.map(value, proxy(this._relatedRow, this)));\n                    }\n                }\n                return selectable.value(value);\n            },\n            clearSelection: function () {\n                var selected = this.select();\n                if (selected.length) {\n                    this.selectable.clear();\n                    this.trigger(CHANGE);\n                }\n            },\n            _dataSource: function (dataSource) {\n                var that = this;\n                var ds = this.dataSource;\n                var pageable = that.options.pageable;\n                if (ds) {\n                    ds.unbind(CHANGE, this._refreshHandler);\n                    ds.unbind(ERROR, this._errorHandler);\n                    ds.unbind(SORT, this._sortHandler);\n                    ds.unbind(PROGRESS, this._progressHandler);\n                }\n                this._refreshHandler = proxy(this.refresh, this);\n                this._errorHandler = proxy(this._error, this);\n                this._sortHandler = proxy(this._clearSortClasses, this);\n                this._progressHandler = proxy(this._progress, this);\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, {\n                        table: that.table,\n                        fields: that.columns\n                    });\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n                ds = this.dataSource = TreeListDataSource.create(dataSource);\n                if (pageable) {\n                    ds._collapsedTotal = undefined;\n                }\n                ds.bind(CHANGE, this._refreshHandler);\n                ds.bind(ERROR, this._errorHandler);\n                ds.bind(SORT, this._sortHandler);\n                ds.bind(PROGRESS, this._progressHandler);\n                this._dataSourceFetchProxy = proxy(function () {\n                    this.dataSource.fetch();\n                }, this);\n            },\n            setDataSource: function (dataSource) {\n                this._dataSource(dataSource);\n                this._sortable();\n                this._filterable();\n                this._columnMenu();\n                this._pageable();\n                this._contentTree.render([]);\n                if (this.options.autoBind) {\n                    this.dataSource.fetch();\n                }\n            },\n            dataItem: function (element) {\n                if (element instanceof TreeListModel) {\n                    return element;\n                }\n                var row = $(element).closest('tr');\n                var uid = row.attr(kendo.attr('uid'));\n                var model = isUndefined(uid) ? null : this.dataSource.getByUid(uid);\n                return model;\n            },\n            editRow: function (row) {\n                var that = this;\n                var model;\n                if (this._isIncellEditable() || !this.options.editable) {\n                    return;\n                }\n                if (typeof row === STRING) {\n                    row = this.tbody.find(row);\n                }\n                if (that._isPageable() && that._isPopupEditable() && row instanceof TreeListModel) {\n                    model = row;\n                } else {\n                    model = this.dataItem(row);\n                }\n                if (!model) {\n                    return;\n                }\n                if (that.editor) {\n                    model._edit = true;\n                    this._render();\n                    this._cancelEditor();\n                } else {\n                    that._preventPageSizeRestore = false;\n                }\n                if (this._editMode() != 'popup') {\n                    model._edit = true;\n                }\n                if (this.trigger(BEFORE_EDIT, { model: model })) {\n                    that.dataSource._restorePageSizeAfterAddChild();\n                    return;\n                }\n                this._render();\n                this._createEditor(model);\n                this.trigger(EDIT, {\n                    container: this.editor.wrapper,\n                    model: model\n                });\n            },\n            _cancelEdit: function (e) {\n                if (!this.editor) {\n                    return;\n                }\n                var currentIndex;\n                e = extend(e, {\n                    container: this.editor.wrapper,\n                    model: this.editor.model\n                });\n                if (this.trigger(CANCEL, e)) {\n                    return;\n                }\n                if (this.options.navigatable) {\n                    currentIndex = this.items().index($(this.current()).parent());\n                }\n                this.cancelRow();\n                if (this.options.navigatable) {\n                    this.current(this.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(this.table, true);\n                }\n            },\n            cancelRow: function () {\n                if (this._isIncellEditable()) {\n                    return;\n                }\n                this._cancelEditor();\n                this._render();\n            },\n            saveRow: function () {\n                var editor = this.editor;\n                var args;\n                if (this._isIncellEditable()) {\n                    return;\n                }\n                if (!editor) {\n                    return;\n                }\n                args = {\n                    model: editor.model,\n                    container: editor.wrapper\n                };\n                if (editor.end() && !this.trigger(SAVE, args)) {\n                    this.dataSource.sync();\n                }\n            },\n            addRow: function (parent) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var pageable = that._isPageable();\n                var incellEditing = that._isIncellEditable();\n                var inlineEditing = that._isInlineEditable();\n                var editor = this.editor;\n                var index = 0;\n                var model = {};\n                if (editor && !editor.end() || !this.options.editable) {\n                    return;\n                }\n                if (parent) {\n                    if (!(parent instanceof TreeListModel)) {\n                        parent = this.dataItem(parent);\n                    }\n                    model[parent.parentIdField] = parent.id;\n                    index = this.dataSource.indexOf(parent) + 1;\n                    this.expand(parent).then(function () {\n                        var showNewModelInView = pageable && dataSource._isLastItemInView(parent) && (incellEditing || inlineEditing);\n                        that._insertAt(model, index, showNewModelInView);\n                    });\n                    return;\n                }\n                this._insertAt(model, index);\n            },\n            _insertAt: function (model, index, showNewModelInView) {\n                var that = this;\n                var dataSource = that.dataSource;\n                model = that.dataSource.insert(index, model);\n                if (showNewModelInView) {\n                    dataSource._setAddChildPageSize();\n                }\n                var row = this._itemFor(model);\n                var cell;\n                if (that._isIncellEditable()) {\n                    cell = row.children('td').eq(that._firstEditableColumnIndex(row));\n                    that.editCell(cell);\n                } else if (row && row[0]) {\n                    that.editRow(row);\n                } else if (that._isPageable() && that._isPopupEditable()) {\n                    that.editRow(model);\n                }\n            },\n            _firstEditableColumnIndex: function (container) {\n                var that = this;\n                var model = that.dataItem(container);\n                var columns = leafColumns(that.columns);\n                var length = columns.length;\n                var column;\n                var idx;\n                for (idx = 0; idx < length; idx++) {\n                    column = columns[idx];\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n                return -1;\n            },\n            removeRow: function (row) {\n                var model = this.dataItem(row);\n                var args = {\n                    model: model,\n                    row: row\n                };\n                if (this.options.editable && model && !this.trigger(REMOVE, args)) {\n                    if (document.activeElement === $(row).find('.k-grid-delete')[0]) {\n                        $(row).find('.k-grid-delete').blur();\n                    }\n                    this.dataSource.remove(model);\n                    if (!this._isIncellEditable()) {\n                        this.dataSource.sync();\n                    }\n                }\n            },\n            _cancelEditor: function () {\n                var that = this;\n                var model;\n                var editor = that.editor;\n                if (editor) {\n                    model = editor.model;\n                    that._destroyEditor();\n                    if (!that._isIncellEditable()) {\n                        that.dataSource.cancelChanges(model);\n                    } else if (that._shouldRestorePageSize()) {\n                        that.dataSource._restorePageSizeAfterAddChild();\n                    }\n                    model._edit = false;\n                }\n                that._preventPageSizeRestore = false;\n            },\n            _shouldRestorePageSize: function () {\n                var that = this;\n                return that._isPageable() && that._isIncellEditable() && !that._preventPageSizeRestore;\n            },\n            _destroyEditor: function () {\n                if (!this.editor) {\n                    return;\n                }\n                this.editor.close();\n                this.editor = null;\n            },\n            _createEditor: function (model) {\n                var row = this.itemFor(model);\n                var columns = leafColumns(this.columns);\n                var leafCols = [];\n                for (var idx = 0; idx < columns.length; idx++) {\n                    leafCols.push(extend({}, columns[idx]));\n                    delete leafCols[idx].parentColumn;\n                }\n                row = row.add(this._relatedRow(row));\n                var mode = this._editMode();\n                var options = {\n                    columns: leafCols,\n                    model: model,\n                    target: this,\n                    clearContainer: false,\n                    template: this.options.editable.template\n                };\n                if (mode == 'inline') {\n                    this.editor = new Editor(row, options);\n                } else {\n                    extend(options, {\n                        window: this.options.editable.window,\n                        commandRenderer: proxy(function () {\n                            return this._buildCommands([\n                                'update',\n                                'canceledit'\n                            ]);\n                        }, this),\n                        fieldRenderer: proxy(this._cellContent, this),\n                        save: proxy(this.saveRow, this),\n                        cancel: proxy(this._cancelEdit, this),\n                        appendTo: this.wrapper\n                    });\n                    this.editor = new PopupEditor(row, options);\n                }\n            },\n            _createIncellEditor: function (cell, options) {\n                var that = this;\n                var column = extend({}, options.columns[0]);\n                delete column.parentColumn;\n                return new IncellEditor(cell, extend({}, {\n                    fieldRenderer: proxy(that._cellContent, that),\n                    appendTo: that.wrapper,\n                    clearContainer: false,\n                    target: that,\n                    columns: [column],\n                    model: options.model,\n                    change: options.change\n                }));\n            },\n            editCell: function (cell) {\n                var that = this;\n                cell = $(cell);\n                var column = leafColumns(that.columns)[that.cellIndex(cell)];\n                var model = that.dataItem(cell);\n                if (that._isIncellEditable() && model && isColumnEditable(column, model)) {\n                    that._editCell(cell, column, model);\n                }\n            },\n            _editCell: function (cell, column, model) {\n                var that = this;\n                var editedCell;\n                if (that.trigger(BEFORE_EDIT, { model: model })) {\n                    that.dataSource._restorePageSizeAfterAddChild();\n                    return;\n                }\n                that.closeCell();\n                model._edit = true;\n                that._cancelEditor();\n                that._render({\n                    editedColumn: column,\n                    editedColumnIndex: cell.index()\n                });\n                editedCell = that.table.add(that.lockedTable).find(DOT + classNames.editCell).first();\n                that.editor = that._createIncellEditor(editedCell, {\n                    columns: [column],\n                    model: model,\n                    change: function (e) {\n                        if (that.trigger(SAVE, {\n                                values: e.values,\n                                container: cell,\n                                model: model\n                            })) {\n                            e.preventDefault();\n                        }\n                    }\n                });\n                that._current = editedCell;\n                that.trigger(EDIT, {\n                    container: cell,\n                    model: model\n                });\n            },\n            closeCell: function (isCancel) {\n                var that = this;\n                var cell = (that.editor || {}).element;\n                var tr;\n                var model;\n                if (!cell || !cell[0] || !that._isIncellEditable()) {\n                    return;\n                }\n                model = that.dataItem(cell);\n                if (isCancel && that.trigger(CANCEL, {\n                        container: cell,\n                        model: model\n                    })) {\n                    return;\n                }\n                that.trigger(CELL_CLOSE, {\n                    type: isCancel ? CANCEL : SAVE,\n                    model: model,\n                    container: cell\n                });\n                that._cancelEditor();\n                cell.removeClass(classNames.editCell);\n                tr = cell.parent().removeClass(classNames.editRow);\n                if (that.lockedContent) {\n                    that._relatedRow(tr).removeClass(classNames.editRow);\n                }\n                that._render();\n                that.trigger(ITEM_CHANGE, {\n                    item: tr,\n                    data: model,\n                    ns: ui\n                });\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css('height', '')[0], that._relatedRow(tr).css('height', '')[0]);\n                }\n            },\n            cancelChanges: function () {\n                this.dataSource.cancelChanges();\n            },\n            saveChanges: function () {\n                var that = this;\n                var editable = (that.editor || {}).editable;\n                var valid = editable && editable.end();\n                if ((valid || !editable) && !that.trigger(SAVE_CHANGES)) {\n                    that.dataSource.sync();\n                }\n            },\n            _editMode: function () {\n                var mode = 'inline', editable = this.options.editable;\n                if (editable !== true) {\n                    if (typeof editable == 'string') {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n                return mode.toLowerCase();\n            },\n            _isIncellEditable: function () {\n                return this._editMode() === INCELL;\n            },\n            _isInlineEditable: function () {\n                return this._editMode() === INLINE;\n            },\n            _isPopupEditable: function () {\n                return this._editMode() === POPUP;\n            },\n            hideColumn: function (column) {\n                this._toggleColumnVisibility(column, true);\n            },\n            showColumn: function (column) {\n                this._toggleColumnVisibility(column, false);\n            },\n            _toggleColumnVisibility: function (column, hidden) {\n                column = this._findColumn(column);\n                if (!column || column.hidden === hidden) {\n                    return;\n                }\n                column.hidden = hidden;\n                this._setParentsVisibility(column, !hidden);\n                this._ensureExpandableColumn();\n                this._clearColsCache();\n                this._renderCols();\n                this._renderHeader();\n                this._render();\n                this._adjustTablesWidth();\n                this.trigger(hidden ? COLUMNHIDE : COLUMNSHOW, { column: column });\n                if (!hidden && !column.width) {\n                    this.table.add(this.thead.closest('table')).width('');\n                }\n                this._updateFirstColumnClass();\n            },\n            _findColumn: function (column) {\n                if (typeof column == 'number') {\n                    column = this.columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(leafColumns(this.columns), function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(leafColumns(this.columns), function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                return column;\n            },\n            _adjustTablesWidth: function () {\n                var idx, length;\n                var cols = this.thead.prev().children();\n                var colWidth, width = 0;\n                for (idx = 0, length = cols.length; idx < length; idx++) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf('%') == -1) {\n                        width += parseInt(colWidth, 10);\n                    } else {\n                        width = 0;\n                        break;\n                    }\n                }\n                if (width) {\n                    this.table.add(this.thead.closest('table')).width(width);\n                }\n            },\n            _reorderable: function () {\n                if (!this.options.reorderable) {\n                    return;\n                }\n                var scrollable = this.options.scrollable === true;\n                var selector = (scrollable ? '.k-grid-header:first ' : 'table:first>.k-grid-header ') + HEADERCELLS;\n                var that = this;\n                this._draggableInstance = new ui.Draggable(this.wrapper, {\n                    group: kendo.guid(),\n                    filter: selector,\n                    hint: function (target) {\n                        return $('<div class=\"k-header k-reorder-clue k-drag-clue\" />').html(target.attr(kendo.attr('title')) || target.attr(kendo.attr('field')) || target.text()).prepend('<span class=\"k-icon k-drag-status k-i-cancel\" />');\n                    }\n                });\n                this.reorderable = new ui.Reorderable(this.wrapper, {\n                    draggable: this._draggableInstance,\n                    dragOverContainers: proxy(this._allowDragOverContainers, this),\n                    inSameContainer: function (e) {\n                        return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                    },\n                    change: function (e) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        var column = columns[e.oldIndex];\n                        var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n                        that.reorderColumn(newIndex, column, e.position === 'before');\n                    }\n                });\n            },\n            _allowDragOverContainers: function (sourceIndex, targetIndex) {\n                var columns = flatColumnsInDomOrder(this.columns);\n                return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, this.columns, sourceIndex, targetIndex) > -1;\n            },\n            _reorderTrees: function (destSources, destContainer, destDomTree, sources, sourcesContainer, sourcesDomTree, before, depth) {\n                var ths = $();\n                var source = sourcesContainer.find('tr:eq(' + sources[0].rowIndex + ')');\n                var sourceDOM = sourcesDomTree.children[sources[0].rowIndex];\n                var sourceChildren = source.children();\n                var destDomChildren;\n                var currentIndex;\n                var destColumn = before ? destSources[0] : destSources[destSources.length - 1];\n                var destRow;\n                var sourcesLeafs;\n                var destLeafs;\n                var reorderTaget;\n                var destThs;\n                for (var idx = 0; idx < sources.length; idx++) {\n                    currentIndex = sources[idx].cellIndex;\n                    ths = ths.add(sourceChildren.eq(currentIndex));\n                    destDomChildren = destDomTree.children[destColumn.rowIndex].children;\n                    if (destDomTree === sourcesDomTree && before) {\n                        currentIndex += idx;\n                    }\n                    destDomChildren.splice(before ? destColumn.cellIndex + idx : destColumn.cellIndex + 1 + idx, 0, sourceDOM.children[currentIndex]);\n                }\n                if (destDomTree === sourcesDomTree && before) {\n                    sourceDOM.children.splice(sources[0].cellIndex + sources.length, sources.length);\n                } else {\n                    sourceDOM.children.splice(sources[0].cellIndex, sources.length);\n                }\n                destRow = destContainer.find('tr:eq(' + destColumn.rowIndex + ')');\n                destThs = destRow.find('>th.k-header:eq(' + destColumn.cellIndex + ')');\n                if (destThs.length && ths[0] !== destThs[0]) {\n                    ths[before ? 'insertBefore' : 'insertAfter'](destThs);\n                }\n                if (depth >= sources[0].rowIndex + 1 && depth != 1) {\n                    sourcesLeafs = [];\n                    for (idx = 0; idx < sources.length; idx++) {\n                        if (sources[idx].columns) {\n                            sourcesLeafs = sourcesLeafs.concat(sources[idx].columns);\n                        }\n                    }\n                    if (!sourcesLeafs.length) {\n                        return;\n                    }\n                    destLeafs = [];\n                    for (idx = 0; idx < destSources.length; idx++) {\n                        if (destSources[idx].columns) {\n                            destLeafs = destLeafs.concat(destSources[idx].columns);\n                        }\n                    }\n                    if (!destLeafs.length && (destContainer !== sourcesContainer || (destColumn.cellIndex - sources[0].cellIndex > 1 || sources[0].cellIndex - destColumn.cellIndex > 1))) {\n                        reorderTaget = findReorderTarget(this.columns, destColumn, sources[0], before, this.columns);\n                        destLeafs = [reorderTaget];\n                        if (!reorderTaget && sourcesLeafs.length && destContainer.find('tr').length > sources[0].rowIndex + 1) {\n                            this._insertTree(sourcesLeafs, sourcesContainer, sourcesDomTree, destContainer, destDomTree);\n                            return;\n                        }\n                    }\n                    if (!destLeafs.length) {\n                        return;\n                    }\n                    this._reorderTrees(destLeafs, destContainer, destDomTree, sourcesLeafs, sourcesContainer, sourcesDomTree, before, depth);\n                }\n            },\n            _insertTree: function (columns, sourcesContainer, sourcesDomTree, destContainer, destDomTree) {\n                var leafs = [];\n                var row;\n                var ths = $();\n                var domTr;\n                row = sourcesContainer.find('tr:eq(' + columns[0].rowIndex + ')');\n                domTr = sourcesDomTree.children[columns[0].rowIndex];\n                for (var idx = 0; idx < columns.length; idx++) {\n                    if (columns[idx].columns) {\n                        leafs = leafs.concat(columns[idx].columns);\n                    }\n                    destDomTree.children[columns[0].rowIndex].children.splice(idx, 0, domTr.children[columns[idx].rowIndex]);\n                    ths = ths.add(row.find('>th.k-header:eq(' + columns[idx].cellIndex + ')'));\n                }\n                sourcesDomTree.children[columns[0].rowIndex].children.splice(columns[0].cellIndex, columns.length);\n                destContainer.find('tr:eq(' + columns[0].rowIndex + ')').append(ths);\n                if (leafs.length) {\n                    this._insertTree(leafs, sourcesContainer, sourcesDomTree, destContainer, destDomTree);\n                }\n            },\n            _reorderHeader: function (destColumn, column, before) {\n                var sourcesDepth = column.columns ? depth([column]) : 1;\n                var targetDepth = destColumn.columns ? depth([destColumn]) : 1;\n                var sourceLocked = isLocked(column);\n                var destLocked = isLocked(destColumn);\n                var destContainer = destLocked ? this.lockedHeader : this.thead;\n                var sourcesContainer = sourceLocked ? this.lockedHeader : this.thead;\n                var destDomTree = destLocked ? this._lockedHeaderTree : this._headerTree;\n                var sourcesDomTree = sourceLocked ? this._lockedHeaderTree : this._headerTree;\n                var rowsToAdd;\n                var destRows = destContainer.find('tr');\n                if (sourcesDepth === targetDepth || sourcesDepth < destRows.length) {\n                    this._reorderTrees([destColumn], destContainer, destDomTree, [column], sourcesContainer, sourcesDomTree, before, sourcesDepth);\n                    updateRowSpans(destContainer, destDomTree);\n                    removeEmptyRows(sourcesContainer, sourcesDomTree);\n                } else {\n                    if (destContainer !== sourcesContainer) {\n                        rowsToAdd = sourcesDepth - destRows.length;\n                        destRows.each(function (idx) {\n                            var cells = this.cells;\n                            for (var i = 0; i < cells.length; i++) {\n                                if (cells[i].colSpan <= 1 && cells[i].attributes.rowspan) {\n                                    destDomTree.children[idx].children[i].attr.rowSpan += rowsToAdd;\n                                    cells[i].rowSpan += rowsToAdd;\n                                }\n                            }\n                        });\n                        for (var j = 0; j < rowsToAdd; j++) {\n                            destDomTree.children.push(kendoDomElement('tr', { 'role': 'row' }));\n                            if (destContainer.is('thead')) {\n                                destContainer.append('<tr role=\\'row\\'></tr>');\n                            } else {\n                                destContainer.find('thead').append('<tr role=\\'row\\'></tr>');\n                            }\n                        }\n                    }\n                    this._reorderTrees([destColumn], destContainer, destDomTree, [column], sourcesContainer, sourcesDomTree, before, sourcesDepth);\n                    removeEmptyRows(sourcesContainer, sourcesDomTree);\n                }\n            },\n            reorderColumn: function (destIndex, column, before) {\n                var lockChanged;\n                var parent = column.parentColumn;\n                var columns = parent ? parent.columns : this.columns;\n                var sourceIndex = inArray(column, columns);\n                var destColumn = columns[destIndex];\n                var isLocked = !!destColumn.locked;\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                var nonLockedColumnsLength = nonLockedColumns(columns).length;\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n                if (isLocked && !column.locked && nonLockedColumnsLength == 1) {\n                    return;\n                }\n                if (!isLocked && column.locked && columns.length - nonLockedColumnsLength == 1) {\n                    return;\n                }\n                if (before === undefined) {\n                    before = destIndex < sourceIndex;\n                }\n                if (hasMultiColumnHeaders) {\n                    this._reorderHeader(destColumn, column, before);\n                }\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n                column.locked = isLocked;\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n                this._setColumnDataIndexes(leafColumns(this.columns));\n                this._clearColsCache();\n                this._renderCols();\n                if (!hasMultiColumnHeaders) {\n                    var ths = $(this.lockedHeader).add(this.thead).find('th');\n                    ths.eq(sourceIndex)[before ? 'insertBefore' : 'insertAfter'](ths.eq(destIndex));\n                    var dom = this._headerTree.children[0].children;\n                    if (this._hasLockedColumns) {\n                        dom = this._lockedHeaderTree.children[0].children.concat(dom);\n                    }\n                    dom.splice(before ? destIndex : destIndex + 1, 0, dom[sourceIndex]);\n                    dom.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n                    if (this._hasLockedColumns) {\n                        this._lockedHeaderTree.children[0].children = dom.splice(0, lockedColumns(columns).length);\n                        this._headerTree.children[0].children = dom;\n                    }\n                } else {\n                    if (this.lockedHeader) {\n                        columns = nonLockedColumns(this.columns);\n                        this._prepareColumns([{\n                                rowSpan: 1,\n                                cells: [],\n                                index: 0\n                            }], columns);\n                        columns = lockedColumns(this.columns);\n                        this._prepareColumns([{\n                                rowSpan: 1,\n                                cells: [],\n                                index: 0\n                            }], columns);\n                    } else {\n                        this._prepareColumns([{\n                                rowSpan: 1,\n                                cells: [],\n                                index: 0\n                            }], this.columns);\n                    }\n                }\n                this._updateColumnCellIndex();\n                this._applyLockedContainersWidth();\n                this._syncLockedHeaderHeight();\n                this._updateFirstColumnClass();\n                this.refresh();\n                if (!lockChanged) {\n                    return;\n                }\n                if (isLocked) {\n                    this.trigger(COLUMNLOCK, { column: column });\n                } else {\n                    this.trigger(COLUMNUNLOCK, { column: column });\n                }\n            },\n            lockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.hidden) {\n                    return;\n                }\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n            unlockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.hidden) {\n                    return;\n                }\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n            _columnMenu: function () {\n                var ths = $(this.lockedHeader).add(this.thead).find('th');\n                var columns = this.columns;\n                var options = this.options;\n                var columnMenu = options.columnMenu;\n                var column, menu, menuOptions, sortable, filterable;\n                var initHandler = proxy(this._columnMenuInit, this);\n                var openHandler = proxy(this._columnMenuOpen, this);\n                var lockedColumnsLength = lockedColumns(columns).length;\n                var hasMultiColumnHeaders = grep(this.columns, function (item) {\n                    return item.columns !== undefined;\n                }).length > 0;\n                if (hasMultiColumnHeaders) {\n                    columns = leafColumns(columns);\n                    if (this.lockedHeader) {\n                        ths = sortCells(leafDataCells(this.lockedHeader.find('>table>thead')).add(leafDataCells(this.thead)));\n                    } else {\n                        ths = leafDataCells(this.thead);\n                    }\n                } else {\n                    ths = $(this.lockedHeader).add(this.thead).find('th');\n                }\n                if (!columnMenu) {\n                    return;\n                }\n                if (typeof columnMenu == 'boolean') {\n                    columnMenu = {};\n                }\n                for (var i = 0; i < ths.length; i++) {\n                    column = columns[i];\n                    if (!column.field) {\n                        continue;\n                    }\n                    menu = ths.eq(i).data('kendoColumnMenu');\n                    if (menu) {\n                        menu.destroy();\n                    }\n                    sortable = false;\n                    if (column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false) {\n                        sortable = extend({}, options.sortable, { compare: (column.sortable || {}).compare });\n                    }\n                    filterable = false;\n                    if (options.filterable && column.filterable !== false && columnMenu.filterable !== false) {\n                        filterable = extend({ pane: this.pane }, column.filterable, options.filterable);\n                    }\n                    menuOptions = {\n                        dataSource: this.dataSource,\n                        values: column.values,\n                        columns: columnMenu.columns,\n                        sortable: sortable,\n                        filterable: filterable,\n                        messages: columnMenu.messages,\n                        owner: this,\n                        closeCallback: $.noop,\n                        init: initHandler,\n                        open: openHandler,\n                        pane: this.pane,\n                        lockedColumns: !hasMultiColumnHeaders && column.lockable !== false && lockedColumnsLength > 0\n                    };\n                    if (options.$angular) {\n                        menuOptions.$angular = options.$angular;\n                    }\n                    ths.eq(i).kendoColumnMenu(menuOptions);\n                }\n            },\n            _columnMenuInit: function (e) {\n                this.trigger(COLUMNMENUINIT, {\n                    field: e.field,\n                    container: e.container\n                });\n            },\n            _pageable: function () {\n                var that = this, wrapper, pageable = that.options.pageable;\n                if (pageable) {\n                    wrapper = that.wrapper.children('div.k-grid-pager');\n                    if (!wrapper.length) {\n                        wrapper = $('<div class=\"k-pager-wrap k-grid-pager\"/>').appendTo(that.wrapper);\n                    }\n                    that._destroyPager();\n                    if (typeof pageable === 'object' && pageable instanceof kendo.ui.TreeListPager) {\n                        that.pager = pageable;\n                    } else if (that.dataSource && !that.dataSource.options.serverPaging) {\n                        that._createPager(wrapper);\n                    }\n                    if (that.pager) {\n                        that.pager.bind(PAGE_CHANGE, function (e) {\n                            if (that.trigger(PAGE, { page: e.index })) {\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                }\n            },\n            _createPager: function (element, options) {\n                var that = this;\n                that.pager = new TreeListPager(element, extend({}, that.options.pageable, { dataSource: that.dataSource }, options));\n            },\n            _destroyPager: function () {\n                if (this.pager) {\n                    this.pager.destroy();\n                }\n            },\n            _isPageable: function () {\n                var that = this;\n                return that.options.pageable && (!that.dataSource || that.dataSource && that.dataSource._isPageable());\n            },\n            _togglePagerVisibility: function () {\n                var that = this;\n                var pageable = that.options.pageable;\n                if (pageable && (isPlainObject(pageable) || pageable instanceof TreeListPager) && pageable.alwaysVisible === false) {\n                    that.wrapper.find('.k-grid-pager').toggle((that.dataSource.collapsedTotal() || 0) >= that.dataSource.pageSize());\n                }\n            }\n        });\n        function isInputElement(element) {\n            return $(element).is(':button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon');\n        }\n        function isLocked(column) {\n            if (!column.parentColumn) {\n                return !!column.locked;\n            }\n            return !!isLocked(column.parentColumn);\n        }\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n                targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n            return target;\n        }\n        function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before && parentColumns.length !== 1) {\n                    index++;\n                } else if (index == parentColumns.length - 1 && !before && index !== 0) {\n                    index--;\n                } else if (index > 0 || index === 0 && !before && index !== 0) {\n                    index += before ? -1 : 1;\n                }\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                var targetIndex = inArray(target, masterColumns);\n                if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                    return null;\n                }\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before, masterColumns);\n                }\n            }\n            return null;\n        }\n        function leafColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n            return result;\n        }\n        function getColumnsFields(columns) {\n            var result = [];\n            columns = leafColumns(columns);\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (typeof columns[idx] === 'string') {\n                    result.push(columns[idx]);\n                } else if (columns[idx].field) {\n                    result.push(columns[idx].field);\n                }\n            }\n            return result;\n        }\n        function visibleChildColumns(columns) {\n            return grep(columns, function (column) {\n                return !column.hidden;\n            });\n        }\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n        function visibleColumns(columns) {\n            return grep(columns, function (column) {\n                var result = !column.hidden;\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n        function normalizeColumns(columns, hide) {\n            return map(columns, function (column) {\n                var hidden;\n                if (!isVisible(column) || hide) {\n                    hidden = true;\n                }\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, hidden);\n                }\n                return extend({ hidden: hidden }, column);\n            });\n        }\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n        function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n            return inArray(target, columns);\n        }\n        function parentColumnsCells(cell) {\n            var container = cell.closest('table');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr');\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find('th').filter(function () {\n                    return !$(this).attr('rowspan');\n                });\n                var offset = 0;\n                var index = row.find('th').index(cell);\n                var prevCells = cell.prevAll().filter(function () {\n                    return this.colSpan > 1;\n                });\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n                index += Math.max(offset - 1, 0);\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr('data-colspan')) {\n                        offset += parentCell[0].getAttribute('data-colspan');\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n        function childColumnsCells(cell) {\n            var container = cell.closest('thead');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr');\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr('colspan');\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll();\n                var idx;\n                prevCells = prevCells.filter(function () {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n                var offset = 0;\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n                var cells = child.find('th');\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n                idx = 0;\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n            return result;\n        }\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n            for (idx = 0; idx < columns.length; idx++) {\n                if (columns[idx] == column) {\n                    result = {\n                        cell: cellCounts[row],\n                        row: row\n                    };\n                    break;\n                } else if (columns[idx].columns) {\n                    result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                    if (result) {\n                        break;\n                    }\n                }\n                cellCounts[row]++;\n            }\n            return result;\n        }\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n            var cells = {};\n            var rows = thead.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row).find('.k-header').filter(filter);\n                }\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr('index'), offset + idx);\n            }\n            return columns.length;\n        }\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n        function lockedColumns(columns) {\n            return grep(columns, is('locked'));\n        }\n        function nonLockedColumns(columns) {\n            return grep(columns, not(is('locked')));\n        }\n        function updateRowSpans(container, containerDOMtree) {\n            var rows = container.find('tr');\n            var length = rows.length;\n            rows.each(function (idx) {\n                var cells = this.cells;\n                for (var i = 0; i < cells.length; i++) {\n                    if (cells[i].colSpan <= 1 && cells[i].attributes.rowspan) {\n                        containerDOMtree.children[idx].children[i].attr.rowSpan = length - idx;\n                        cells[i].rowSpan = length - idx;\n                    }\n                }\n            });\n        }\n        function removeEmptyRows(container, containerDOMtree) {\n            var rows = container.find('tr');\n            var emptyRows = [];\n            rows.filter(function (idx) {\n                var shouldRemove = !$(this).children().length;\n                if (shouldRemove) {\n                    emptyRows.push(idx);\n                }\n                return shouldRemove;\n            }).remove();\n            for (var i = emptyRows.length - 1; i >= 0; i--) {\n                containerDOMtree.children.splice(emptyRows[i], 1);\n            }\n            updateRowSpans(container, containerDOMtree);\n        }\n        function focusTable(table, direct) {\n            if (direct === true) {\n                table = $(table);\n                var scrollTop, scrollLeft;\n                scrollTop = table.parent().scrollTop();\n                scrollLeft = table.parent().scrollLeft();\n                kendo.focusElement(table);\n                table.parent().scrollTop(scrollTop).scrollLeft(scrollLeft);\n            } else {\n                $(table).one('focusin', function (e) {\n                    e.preventDefault();\n                }).focus();\n            }\n        }\n        function adjustRowHeight(row1, row2) {\n            var height;\n            var offsetHeight1 = row1.offsetHeight;\n            var offsetHeight2 = row2.offsetHeight;\n            if (offsetHeight1 > offsetHeight2) {\n                height = offsetHeight1 + 'px';\n            } else if (offsetHeight1 < offsetHeight2) {\n                height = offsetHeight2 + 'px';\n            }\n            if (height) {\n                row1.style.height = row2.style.height = height;\n            }\n        }\n        function isColumnEditable(column, model) {\n            if (!column || !model || !column.field || column.selectable || column.command || column.editable && !column.editable(model)) {\n                return false;\n            }\n            return column.field && model.editable && model.editable(column.field);\n        }\n        function isDirtyColumn(column, model) {\n            var field = (column || {}).field || '';\n            return model.dirty && model.dirtyFields && model.dirtyFields[field] && isColumnEditable(column, model);\n        }\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        function isNumber(value) {\n            return typeof value === 'number' && !isNaN(value);\n        }\n        if (kendo.ExcelMixin) {\n            kendo.ExcelMixin.extend(TreeList.prototype);\n        }\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(TreeList.prototype);\n            TreeList.prototype._drawPDF = function (progress) {\n                var treeList = this;\n                if (treeList.options.pdf.paperSize && treeList.options.pdf.paperSize != 'auto') {\n                    return treeList._drawPDF_autoPageBreak(progress);\n                }\n                var result = new $.Deferred();\n                var dataSource = treeList.dataSource;\n                var allPages = treeList.options.pdf.allPages;\n                this._initPDFProgress(progress);\n                var doc = new kendo.drawing.Group();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.unbind('change', exportPage);\n                        dataSource.one('change', function () {\n                            result.resolve(doc);\n                        });\n                        dataSource.page(startingPage);\n                    } else {\n                        result.resolve(doc);\n                    }\n                }\n                function exportPage() {\n                    treeList._drawPDFShadow({ width: treeList.wrapper.width() }, { avoidLinks: treeList.options.pdf.avoidLinks }).done(function (group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n                        progress.notify(args);\n                        doc.append(args.page);\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                if (allPages) {\n                    dataSource.bind('change', exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n                return result.promise();\n            };\n            TreeList.prototype._initPDFProgress = function (deferred) {\n                var loading = $('<div class=\\'k-loading-pdf-mask\\'><div class=\\'k-loading-color\\'/></div>');\n                loading.prepend(this.wrapper.clone().css({\n                    position: 'absolute',\n                    top: 0,\n                    left: 0\n                }));\n                this.wrapper.append(loading);\n                var progressBar = $('<div class=\\'k-loading-pdf-progress\\'>').appendTo(loading).kendoProgressBar({\n                    type: 'chunk',\n                    chunkCount: 10,\n                    min: 0,\n                    max: 1,\n                    value: 0\n                }).data('kendoProgressBar');\n                deferred.progress(function (e) {\n                    progressBar.value(e.progress);\n                }).always(function () {\n                    kendo.destroy(loading);\n                    loading.remove();\n                });\n            };\n            TreeList.prototype._drawPDF_autoPageBreak = function (progress) {\n                var treeList = this;\n                var result = new $.Deferred();\n                var dataSource = treeList.dataSource;\n                var allPages = treeList.options.pdf.allPages;\n                var origBody = treeList.wrapper.find('table[role=\"treeList\"] > tbody');\n                var cont = $('<div>').css({\n                    position: 'absolute',\n                    left: -10000,\n                    top: -10000\n                });\n                var clone = treeList.wrapper.clone().css({\n                    height: 'auto',\n                    width: 'auto'\n                }).appendTo(cont);\n                clone.find('.k-grid-content').css({\n                    height: 'auto',\n                    width: 'auto',\n                    overflow: 'visible'\n                });\n                clone.find('table[role=\"treeList\"], .k-grid-footer table').css({\n                    height: 'auto',\n                    width: '100%',\n                    overflow: 'visible'\n                });\n                clone.find('.k-grid-pager, .k-grid-toolbar, .k-grouping-header').remove();\n                clone.find('.k-grid-header, .k-grid-footer').css({ paddingRight: 0 });\n                this._initPDFProgress(progress);\n                var body = clone.find('table[role=\"treeList\"] > tbody').empty();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.one('change', draw);\n                        dataSource.page(startingPage);\n                    } else {\n                        treeList.refresh();\n                        draw();\n                    }\n                }\n                function draw() {\n                    cont.appendTo(document.body);\n                    var options = $.extend({}, treeList.options.pdf, {\n                        _destructive: true,\n                        progress: function (p) {\n                            progress.notify({\n                                page: p.page,\n                                pageNumber: p.pageNum,\n                                progress: 0.5 + p.pageNum / p.totalPages / 2,\n                                totalPages: p.totalPages\n                            });\n                        }\n                    });\n                    kendo.drawing.drawDOM(clone, options).always(function () {\n                        cont.remove();\n                    }).then(function (group) {\n                        result.resolve(group);\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                function renderPage() {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n                    body.append(origBody.find('tr'));\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        dataSource.unbind('change', renderPage);\n                        resolve();\n                    }\n                }\n                if (allPages) {\n                    dataSource.bind('change', renderPage);\n                    dataSource.page(1);\n                } else {\n                    renderPage();\n                }\n                return result.promise();\n            };\n        }\n        extend(true, kendo.data, {\n            TreeListDataSource: TreeListDataSource,\n            TreeListModel: TreeListModel\n        });\n        ui.plugin(TreeList);\n        ui.plugin(TreeListPager);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}