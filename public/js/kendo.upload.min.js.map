{"version":3,"sources":["kendo.upload.js"],"names":["f","define","$","undefined","getFileName","input","map","inputFiles","file","name","join","$input","files","getAllFileInfo","stripPath","value","extension","getFileExtension","size","rawFiles","getFileInfo","rawFile","fileName","kendo","htmlEncode","fileSize","matches","match","rFileExtension","slashIndex","lastIndexOf","substr","assignGuidToFiles","unique","uid","guid","validateFiles","validationInfo","i","allowedExtensions","parseAllowedExtensions","maxFileSize","minFileSize","length","validateFileExtension","validateFileSize","extensions","ext","parsedExt","substring","toLowerCase","indexOf","validationErrors","inArray","INVALIDFILEEXTENSION","push","INVALIDMINFILESIZE","INVALIDMAXFILESIZE","getTotalFilesSizeMessage","totalSize","toFixed","shouldRemoveFileEntry","upload","multiple","wrapper","removeUploadedFile","fileEntry","eventArgs","shouldSendRemoveRequest","fileNames","_supportsRemove","data","_removeFileEntry","_submitRemove","textStatus","xhr","prevented","trigger","SUCCESS","operation","response","XMLHttpRequest","ERROR","logToConsole","responseText","tryParseJSON","onSuccess","onError","success","json","parseJSON","normalizeJSON","e","stopEvent","stopPropagation","preventDefault","bindDragEventWrappers","element","namespace","onDragEnter","onDragLeave","hideInterval","lastDrag","on","Date","setInterval","sinceLastDrag","clearInterval","isFileUploadStarted","is","getFileEntry","target","closest","iframeUploadModule","formDataUploadModule","window","Widget","ui","antiForgeryTokens","NS","SELECT","UPLOAD","COMPLETE","CANCEL","CLEAR","PAUSE","RESUME","PROGRESS","REMOVE","VALIDATIONERRORS","PROGRESSHIDEDELAY","PROGRESSHIDEDURATION","headerStatusIcon","loading","warning","Upload","extend","init","options","activeInput","ns","initialFiles","that","this","fn","call","directory","localization","_wrapInput","_activeInput","toggle","enabled","_ns","proxy","_onParentFormSubmit","_onParentFormReset","async","saveUrl","_module","_supportsFormData","_async","_renderInitialFiles","syncUploadModule","_toggleDropZone","_onFileAction","_onClearSelected","_onUploadSelected","val","_onInputChange","events","showFileList","template","autoRetryAfter","bufferChunkSize","maxAutoRetries","removeVerb","autoUpload","withCredentials","accept","useArrayBuffer","select","cancel","retry","remove","pause","resume","clearSelectedFiles","uploadSelectedFiles","dropFilesHere","invalidFiles","statusUploading","statusUploaded","statusWarning","statusFailed","headerStatusUploading","headerStatusPaused","headerStatusUploaded","invalidMaxFileSize","invalidMinFileSize","invalidFileExtension","validation","dropZone","setOptions","off","attr","_supportsMultiple","enable","disable","toggleClass","prop","focus","destroy","customDropZone","document","add","onPause","pauseIcon","find","removeClass","addClass","parent","onResume","playIcon","onSaveSelected","getFiles","filesData","j","allFiles","listItems","clearAllFiles","each","index","_removeFileByDomElement","removeAllFiles","removeFileByUid","_removeFileByUid","clearFileByUid","clearFile","callback","_removeFile","removeFile","fileData","hasClass","onCancel","onRemove","_hideHeaderUploadstatus","_updateHeaderUploadStatus","_addInput","sourceInput","nodeType","clone","insertAfter","prefix","hide","removeAttr","_onInputKeyDown","firstButton","keyCode","keys","TAB","shiftKey","_inputFiles","_isAsyncNonBatch","onSelect","_readDirectory","item","deferred","Deferred","dirReader","createReader","allFolderFiles","readEntries","entries","concat","resolve","reject","promise","_readFile","fullpath","fullPath","relativePath","slice","droppedFolderFiles","droppedFolderCounter","setTimeout","_proceedDroppedItems","_traverseFileTree","skipCounter","then","items","isFile","isDirectory","_onDrop","entry","dt","originalEvent","dataTransfer","droppedFiles","directoryDrop","webkitGetAsEntry","splice","_filesContainValidationErrors","hasErrors","batch","currentFile","idx","_enqueueFile","_fileAction","_prepareTemplateData","templateData","_prepareDefaultSingleFileEntryTemplate","fileGroup","getFileGroup","errors","_prepareDefaultMultipleFileEntriesTemplate","filesHaveValidationErrors","totalFileSize","sort","a","b","existingFileEntries","removeEventArgs","fileUid","fileList","appendTo","angular","elements","width","headers","allCompletedFiles","allInvalidFiles","_hideUploadButton","fileElement","actionKey","skipClear","firstActionButton","classDictionary","iconsClassDictionary","hasOwnProperty","_clearFileAction","first","next","append","show","_renderAction","_fileState","stateKey","states","uploading","text","uploaded","failed","currentState","actionClass","actionText","iconClass","empty","button","icon","hasValidationErrors","_retryClicked","_checkAllComplete","finish","onRetry","clearEventArgs","_onFileProgress","percentComplete","progressPct","warningPct","prepend","_onUploadSuccess","_setUploadErrorState","_hideUploadProgress","_onUploadError","module","chunkSize","_decreasePosition","_autoRetryAfter","retries","performUpload","uploadPercentage","_updateUploadProgress","fileMetaData","metaData","totalChunks","Math","round","chunkIndex","delay","fadeOut","css","_showUploadButton","uploadButton","clearButton","_showHeaderUploadStatus","isUploading","headerUploadStatus","after","failedUploads","headerUploadStatusIcon","currentlyUploading","not","currentlyInvalid","currentlyFailed","currentlyPaused","concurrent","html","onAbort","FormData","windows","_userAgent","support","browser","opera","safari","_supportsDrop","userAgent","isChrome","test","isSafari","isWindowsSafari","navigator","_setupDropZone","_bindDocumentDragEventWrappers","_setupCustomDropZone","removeUrl","removeField","params","jQuery","ajax","type","dataType","dataFilter","url","traditional","error","xhrFields","wrap","prototype","filesContainErrors","relatedInput","iframes","_frameId","prepareUpload","iframe","form","saveField","createFrame","registerFrame","createForm","frame","key","dataInput","cleanupFrame","unregisterFrame","body","prependTo","one","onIframeLoad","submit","started","contents","ex","processResponse","fakeXHR","jsonResult","statusText","status","stopFrameSubmit","id","action","stop","execCommand","grep","position","cancelled","paused","prev","sourceElement","fileEntries","prepareChunk","enqueueFiles","filesLength","webkitRelativePath","formData","createFormData","createXHR","removeFileEntry","populateFormData","FileReader","postFormData","reader","onload","fileArrayBuffer","_appendBuffer","result","err","onerror","readAsArrayBuffer","_getCurrentChunk","buffer1","buffer2","tmp","Uint8Array","byteLength","set","buffer","filter","prevEntry","stopUploadRequest","_increaseChunkIndex","addEventListener","onRequestSuccess","onRequestError","onRequestProgress","open","setRequestHeader","send","chunk","serializedMetaData","JSON","stringify","raiseError","parseSuccess","cleanupFileEntry","_resetChunkIndex","uploadComplete","isUploadButtonVisible","loaded","total","abort","contentType","ceil","uploadUid","_decreaseChunkIndex","methodToInvoke","oldPosition","_getChunker","mozSlice","webkitSlice","plugin","amd","a1","a2","a3"],"mappings":"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","file":"kendo.upload.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.upload', ['kendo.core'], f);\n}(function () {\n    var __meta__ = {\n        id: 'upload',\n        name: 'Upload',\n        category: 'web',\n        description: 'The Upload widget uses progressive enhancement to deliver the best possible uploading experience to users.',\n        depends: ['core']\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, Widget = kendo.ui.Widget, antiForgeryTokens = kendo.antiForgeryTokens, logToConsole = kendo.logToConsole, rFileExtension = /\\.([^\\.]+)$/, NS = '.kendoUpload', SELECT = 'select', UPLOAD = 'upload', SUCCESS = 'success', ERROR = 'error', COMPLETE = 'complete', CANCEL = 'cancel', CLEAR = 'clear', PAUSE = 'pause', RESUME = 'resume', PROGRESS = 'progress', REMOVE = 'remove', VALIDATIONERRORS = 'validationErrors', INVALIDMAXFILESIZE = 'invalidMaxFileSize', INVALIDMINFILESIZE = 'invalidMinFileSize', INVALIDFILEEXTENSION = 'invalidFileExtension', PROGRESSHIDEDELAY = 1000, PROGRESSHIDEDURATION = 2000;\n        var headerStatusIcon = {\n            loading: 'k-i-loading',\n            warning: 'k-i-warning',\n            success: 'k-i-check'\n        };\n        var Upload = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                that.name = element.name;\n                that.multiple = that.options.multiple;\n                that.directory = that.options.directory;\n                that.localization = that.options.localization;\n                var activeInput = that.element;\n                that.wrapper = activeInput.closest('.k-upload');\n                if (that.wrapper.length === 0) {\n                    that.wrapper = that._wrapInput(activeInput);\n                }\n                that._activeInput(activeInput);\n                that.toggle(that.options.enabled);\n                var ns = that._ns = NS + '-' + kendo.guid();\n                activeInput.closest('form').on('submit' + ns, $.proxy(that._onParentFormSubmit, that)).on('reset' + ns, $.proxy(that._onParentFormReset, that));\n                if (that.options.async.saveUrl) {\n                    that._module = that._supportsFormData() ? new formDataUploadModule(that) : new iframeUploadModule(that);\n                    that._async = true;\n                    var initialFiles = that.options.files;\n                    if (initialFiles.length > 0) {\n                        that._renderInitialFiles(initialFiles);\n                    }\n                } else {\n                    that._module = new syncUploadModule(that);\n                }\n                that._toggleDropZone();\n                that.wrapper.on('click', '.k-upload-action', $.proxy(that._onFileAction, that)).on('click', '.k-clear-selected', $.proxy(that._onClearSelected, that)).on('click', '.k-upload-selected', $.proxy(that._onUploadSelected, that));\n                if (that.element.val()) {\n                    that._onInputChange({ target: that.element });\n                }\n            },\n            events: [\n                SELECT,\n                UPLOAD,\n                SUCCESS,\n                ERROR,\n                COMPLETE,\n                CANCEL,\n                CLEAR,\n                PROGRESS,\n                REMOVE,\n                PAUSE,\n                RESUME\n            ],\n            options: {\n                name: 'Upload',\n                enabled: true,\n                multiple: true,\n                directory: false,\n                showFileList: true,\n                template: '',\n                files: [],\n                async: {\n                    autoRetryAfter: 0,\n                    bufferChunkSize: 10000000,\n                    maxAutoRetries: 1,\n                    removeVerb: 'POST',\n                    autoUpload: true,\n                    withCredentials: true,\n                    accept: '*/*; q=0.5, application/json',\n                    useArrayBuffer: false\n                },\n                localization: {\n                    'select': 'Select files...',\n                    'cancel': 'Cancel',\n                    'retry': 'Retry',\n                    'remove': 'Remove',\n                    'pause': 'Pause',\n                    'resume': 'Resume',\n                    'clearSelectedFiles': 'Clear',\n                    'uploadSelectedFiles': 'Upload',\n                    'dropFilesHere': 'Drop files here to upload',\n                    'invalidFiles': 'Invalid file(s). Please check file upload requirements.',\n                    'statusUploading': 'uploading',\n                    'statusUploaded': 'uploaded',\n                    'statusWarning': 'warning',\n                    'statusFailed': 'failed',\n                    'headerStatusUploading': 'Uploading...',\n                    'headerStatusPaused': 'Paused',\n                    'headerStatusUploaded': 'Done',\n                    'invalidMaxFileSize': 'File size too large.',\n                    'invalidMinFileSize': 'File size too small.',\n                    'invalidFileExtension': 'File type not allowed.'\n                },\n                validation: {\n                    allowedExtensions: [],\n                    maxFileSize: 0,\n                    minFileSize: 0\n                },\n                dropZone: ''\n            },\n            setOptions: function (options) {\n                var that = this, activeInput = that.element;\n                $(that.options.dropZone).off(that._ns);\n                Widget.fn.setOptions.call(that, options);\n                that.multiple = that.options.multiple;\n                that.directory = that.options.directory;\n                activeInput.attr('multiple', that._supportsMultiple() ? that.multiple : false);\n                if (that.directory) {\n                    activeInput.attr('webkitdirectory', that.directory);\n                    activeInput.attr('directory', that.directory);\n                }\n                that.toggle(that.options.enabled);\n                that._toggleDropZone();\n            },\n            enable: function (enable) {\n                enable = typeof enable === 'undefined' ? true : enable;\n                this.toggle(enable);\n            },\n            disable: function () {\n                this.toggle(false);\n            },\n            toggle: function (enable) {\n                enable = typeof enable === 'undefined' ? enable : !enable;\n                this.wrapper.toggleClass('k-state-disabled', enable);\n                this.element.prop('disabled', enable);\n            },\n            focus: function () {\n                this.element.focus();\n            },\n            destroy: function () {\n                var that = this;\n                var customDropZone = $(that.options.dropZone);\n                $(document).add($('.k-dropzone', that.wrapper)).add(that.wrapper.closest('form')).off(that._ns);\n                if (customDropZone.length > 0) {\n                    customDropZone.off(that._ns);\n                }\n                $(that.element).off(NS);\n                Widget.fn.destroy.call(that);\n            },\n            pause: function (fileEntry) {\n                this._module.onPause({ target: $(fileEntry, this.wrapper) });\n                var pauseIcon = fileEntry.find('.k-i-pause-sm');\n                pauseIcon.removeClass('k-i-pause-sm').addClass('k-i-play-sm').attr('title', this.localization.resume);\n                $(pauseIcon).parent().attr('aria-label', this.localization.resume);\n            },\n            resume: function (fileEntry) {\n                this._module.onResume({ target: $(fileEntry, this.wrapper) });\n                var playIcon = fileEntry.find('.k-i-play-sm');\n                playIcon.removeClass('k-i-play-sm').addClass('k-i-pause-sm').attr('title', this.localization.pause);\n                $(playIcon).parent().attr('aria-label', this.localization.pause);\n            },\n            upload: function () {\n                var that = this;\n                that._module.onSaveSelected();\n            },\n            getFiles: function () {\n                var that = this;\n                var filesData;\n                var allFiles = [];\n                var listItems = that.wrapper.find('.k-file');\n                for (var i = 0; i < listItems.length; i++) {\n                    filesData = $(listItems[i]).data('fileNames');\n                    if (filesData) {\n                        for (var j = 0; j < filesData.length; j++) {\n                            allFiles.push(filesData[j]);\n                        }\n                    }\n                }\n                return allFiles;\n            },\n            clearAllFiles: function () {\n                var that = this;\n                var files = that.wrapper.find('.k-file');\n                files.each(function (index, file) {\n                    that._removeFileByDomElement(file, false);\n                });\n            },\n            removeAllFiles: function () {\n                var that = this;\n                var files = that.wrapper.find('.k-file');\n                files.each(function (index, file) {\n                    that._removeFileByDomElement(file, true);\n                });\n            },\n            removeFileByUid: function (uid) {\n                this._removeFileByUid(uid, true);\n            },\n            clearFileByUid: function (uid) {\n                this._removeFileByUid(uid, false);\n            },\n            _removeFileByUid: function (uid, shouldSendRemoveRequest) {\n                var that = this;\n                var fileEntry;\n                if (typeof uid !== 'string') {\n                    return;\n                }\n                fileEntry = $('.k-file[' + kendo.attr('uid') + '=\"' + uid + '\"]', that.wrapper);\n                if (fileEntry.length > 0) {\n                    that._removeFileByDomElement(fileEntry, shouldSendRemoveRequest);\n                }\n            },\n            clearFile: function (callback) {\n                this._removeFile(callback, false);\n            },\n            removeFile: function (callback) {\n                this._removeFile(callback, true);\n            },\n            _removeFile: function (callback, shouldSendRemoveRequest) {\n                var that = this;\n                var files = that.wrapper.find('.k-file');\n                var fileData;\n                if (typeof callback === 'function') {\n                    files.each(function (index, file) {\n                        fileData = $(file).data('fileNames');\n                        if (callback(fileData)) {\n                            that._removeFileByDomElement(file, shouldSendRemoveRequest);\n                        }\n                    });\n                }\n            },\n            _removeFileByDomElement: function (fileEntry, shouldSendRemoveRequest) {\n                var that = this;\n                var fileData = { target: $(fileEntry, that.wrapper) };\n                var allFiles;\n                if (that.options.async.saveUrl) {\n                    if ($(fileEntry).hasClass('k-file-progress')) {\n                        that._module.onCancel(fileData);\n                    } else {\n                        that._module.onRemove(fileData, {}, shouldSendRemoveRequest);\n                    }\n                    allFiles = $('.k-file', that.wrapper);\n                    if (allFiles.length === 0) {\n                        that._hideHeaderUploadstatus();\n                    } else {\n                        that._updateHeaderUploadStatus();\n                    }\n                } else {\n                    that._module.onRemove(fileData, {}, shouldSendRemoveRequest);\n                }\n            },\n            _addInput: function (sourceInput) {\n                if (!sourceInput[0].nodeType) {\n                    return;\n                }\n                var that = this, input = sourceInput.clone().val('');\n                input.insertAfter(that.element).data('kendo' + that.options.prefix + that.options.name, that);\n                $(that.element).hide().attr('tabindex', '-1').removeAttr('id').off(NS);\n                that._activeInput(input);\n                that.element.focus();\n            },\n            _activeInput: function (input) {\n                var that = this, wrapper = that.wrapper;\n                that.element = input;\n                if (that.directory) {\n                    input.attr('webkitdirectory', that.directory);\n                    input.attr('directory', that.directory);\n                }\n                input.attr('multiple', that._supportsMultiple() ? that.multiple : false).attr('autocomplete', 'off').on('click' + NS, function (e) {\n                    if (wrapper.hasClass('k-state-disabled')) {\n                        e.preventDefault();\n                    }\n                }).on('focus' + NS, function () {\n                    $(this).parent().addClass('k-state-focused');\n                }).on('blur' + NS, function () {\n                    $(this).parent().removeClass('k-state-focused');\n                }).on('change' + NS, $.proxy(that._onInputChange, that)).on('keydown' + NS, $.proxy(that._onInputKeyDown, that));\n            },\n            _onInputKeyDown: function (e) {\n                var that = this;\n                var firstButton = that.wrapper.find('.k-upload-action:visible:first');\n                if (e.keyCode === kendo.keys.TAB && firstButton.length > 0 && !e.shiftKey) {\n                    e.preventDefault();\n                    firstButton.focus();\n                }\n            },\n            _onInputChange: function (e) {\n                var that = this;\n                var input = $(e.target);\n                var files = assignGuidToFiles(that._inputFiles(input), that._isAsyncNonBatch());\n                validateFiles(files, that.options.validation);\n                var prevented = that.trigger(SELECT, { files: files });\n                if (prevented) {\n                    that._addInput(input);\n                    input.remove();\n                } else {\n                    that._module.onSelect({ target: input }, files);\n                }\n            },\n            _readDirectory: function (item) {\n                var deferred = new $.Deferred();\n                var dirReader = item.createReader();\n                var allFolderFiles = [];\n                var readEntries = function () {\n                    dirReader.readEntries(function (entries) {\n                        if (!entries.length) {\n                            deferred.resolve(allFolderFiles);\n                        } else {\n                            allFolderFiles = allFolderFiles.concat(entries);\n                            readEntries();\n                        }\n                    }, deferred.reject);\n                };\n                readEntries();\n                return deferred.promise();\n            },\n            _readFile: function (item) {\n                var that = this;\n                var fullpath = item.fullPath;\n                item.file(function (file) {\n                    file.relativePath = fullpath.slice(1);\n                    that.droppedFolderFiles.push(file);\n                    that.droppedFolderCounter--;\n                    if (that.droppedFolderCounter === 0) {\n                        setTimeout(function () {\n                            if (that.droppedFolderCounter === 0) {\n                                if (that.droppedFolderFiles.length) {\n                                    that._proceedDroppedItems(that.droppedFolderFiles);\n                                    that.droppedFolderFiles = [];\n                                }\n                            }\n                        }, 0);\n                    }\n                }, function () {\n                    logToConsole('File error.');\n                });\n            },\n            _traverseFileTree: function (item, skipCounter) {\n                var that = this;\n                if (!skipCounter) {\n                    that.droppedFolderCounter--;\n                }\n                this._readDirectory(item).then(function (items) {\n                    that.droppedFolderCounter += items.length;\n                    for (var i = 0; i < items.length; i++) {\n                        if (items[i].isFile) {\n                            that._readFile(items[i]);\n                        } else if (items[i].isDirectory) {\n                            that._traverseFileTree(items[i]);\n                        }\n                    }\n                });\n            },\n            _onDrop: function (e) {\n                var dt = e.originalEvent.dataTransfer;\n                var that = this;\n                var droppedFiles = dt.files;\n                var length;\n                stopEvent(e);\n                if (that.options.directoryDrop && dt.items) {\n                    length = dt.items.length;\n                    that.droppedFolderCounter = 0;\n                    that.droppedFolderFiles = [];\n                    for (var i = 0; i < length; i++) {\n                        if (dt.items[i].webkitGetAsEntry) {\n                            var entry = dt.items[i].webkitGetAsEntry();\n                            if (entry.isDirectory) {\n                                that._traverseFileTree(entry, true);\n                            } else if (entry.isFile) {\n                                that.droppedFolderFiles.push(dt.files[i]);\n                            }\n                        } else {\n                            that._proceedDroppedItems(droppedFiles);\n                        }\n                    }\n                } else {\n                    that._proceedDroppedItems(droppedFiles);\n                }\n            },\n            _proceedDroppedItems: function (droppedFiles) {\n                var that = this;\n                var files = assignGuidToFiles(getAllFileInfo(droppedFiles), that._isAsyncNonBatch());\n                if (droppedFiles.length > 0 && !that.wrapper.hasClass('k-state-disabled')) {\n                    if (!that.multiple && files.length > 1) {\n                        files.splice(1, files.length - 1);\n                    }\n                    validateFiles(files, that.options.validation);\n                    var prevented = that.trigger(SELECT, { files: files });\n                    if (!prevented) {\n                        that._module.onSelect({ target: $('.k-dropzone', that.wrapper) }, files);\n                    }\n                }\n            },\n            _filesContainValidationErrors: function (files) {\n                var hasErrors = false;\n                $(files).each(function (index, file) {\n                    if (file[VALIDATIONERRORS] && file[VALIDATIONERRORS].length > 0) {\n                        hasErrors = true;\n                        return false;\n                    }\n                });\n                return hasErrors;\n            },\n            _isAsyncNonBatch: function () {\n                return this._async && !this.options.async.batch || false;\n            },\n            _renderInitialFiles: function (files) {\n                var that = this;\n                var idx = 0;\n                files = assignGuidToFiles(files, true);\n                for (idx = 0; idx < files.length; idx++) {\n                    var currentFile = files[idx];\n                    var fileEntry = that._enqueueFile(currentFile.name, { fileNames: [currentFile] });\n                    fileEntry.addClass('k-file-success').data('files', [files[idx]]);\n                    if (that._supportsRemove()) {\n                        that._fileAction(fileEntry, REMOVE);\n                    }\n                }\n            },\n            _prepareTemplateData: function (name, data) {\n                var filesData = data.fileNames, templateData = {}, totalSize = 0, idx = 0;\n                for (idx = 0; idx < filesData.length; idx++) {\n                    totalSize += filesData[idx].size;\n                }\n                templateData.name = name;\n                templateData.size = totalSize;\n                templateData.files = data.fileNames;\n                return templateData;\n            },\n            _prepareDefaultSingleFileEntryTemplate: function (data) {\n                var that = this;\n                var file = data.fileNames[0];\n                var fileSize = getTotalFilesSizeMessage(data.fileNames);\n                var fileGroup = kendo.getFileGroup(file.extension, true);\n                var errors = file[VALIDATIONERRORS];\n                var template = '';\n                if (errors && errors.length > 0) {\n                    template += '<li class=\\'k-file k-file-invalid\\'><span class=\\'k-progress\\'></span>' + '<span class=\\'k-file-invalid-group-wrapper\\'>' + '<span class=\\'k-file-group k-icon k-i-' + fileGroup + '\\'></span>' + '<span class=\\'k-file-state\\'></span>' + '</span>' + '<span class=\\'k-file-name-size-wrapper\\'>' + '<span class=\\'k-file-name k-file-name-invalid\\' title=\\'' + file.name + '\\'>' + file.name + '</span>' + '<span class=\\'k-file-validation-message\\'>' + that.localization[errors[0]] + '</span>' + '</span>';\n                } else {\n                    template += '<li class=\\'k-file\\'><span class=\\'k-progress\\'></span>' + '<span class=\\'k-file-group-wrapper\\'>' + '<span class=\\'k-file-group k-icon k-i-' + fileGroup + '\\'></span>' + '<span class=\\'k-file-state\\'></span>' + '</span>' + '<span class=\\'k-file-name-size-wrapper\\'><span class=\\'k-file-name\\' title=\\'' + file.name + '\\'>' + file.name + '</span>' + '<span class=\\'k-file-size\\'>' + fileSize + '</span></span>';\n                }\n                template += '<strong class=\\'k-upload-status\\'></strong>';\n                return $(template);\n            },\n            _prepareDefaultMultipleFileEntriesTemplate: function (data) {\n                var that = this;\n                var files = data.fileNames;\n                var filesHaveValidationErrors = that._filesContainValidationErrors(files);\n                var totalFileSize = getTotalFilesSizeMessage(files);\n                var template = '';\n                var i, currentFile;\n                if (filesHaveValidationErrors) {\n                    template += '<li class=\\'k-file k-file-invalid\\'><span class=\\'k-progress\\'></span>' + '<span class=\\'k-multiple-files-invalid-group-wrapper\\'>' + '<span class=\\'k-file-group k-icon k-i-files\\'></span>';\n                } else {\n                    template += '<li class=\\'k-file\\'><span class=\\'k-progress\\'></span>' + '<span class=\\'k-multiple-files-group-wrapper\\'>' + '<span class=\\'k-file-group k-icon k-i-files\\'></span>';\n                }\n                template += '<span class=\\'k-file-state\\'></span></span>';\n                files.sort(function (a, b) {\n                    if (a[VALIDATIONERRORS]) {\n                        return -1;\n                    }\n                    if (b[VALIDATIONERRORS]) {\n                        return 1;\n                    }\n                    return 0;\n                });\n                template += '<span class=\\'k-file-name-size-wrapper\\'>';\n                for (i = 0; i < files.length; i++) {\n                    currentFile = files[i];\n                    if (currentFile[VALIDATIONERRORS] && currentFile[VALIDATIONERRORS].length > 0) {\n                        template += '<span class=\\'k-file-name k-file-name-invalid\\' title=\\'' + currentFile.name + '\\'>' + currentFile.name + '</span>';\n                    } else {\n                        template += '<span class=\\'k-file-name\\' title=\\'' + currentFile.name + '\\'>' + currentFile.name + '</span>';\n                    }\n                }\n                if (filesHaveValidationErrors) {\n                    template += '<span class=\\'k-file-validation-message\\'>' + that.localization.invalidFiles + '</span>';\n                } else {\n                    template += '<span class=\\'k-file-information\\'>Total: ' + files.length + ' files, ' + totalFileSize + '</span>';\n                }\n                template += '</span><strong class=\\'k-upload-status\\'></strong>';\n                return $(template);\n            },\n            _enqueueFile: function (name, data) {\n                var that = this;\n                var existingFileEntries;\n                var fileEntry;\n                var fileUid = data.fileNames[0].uid;\n                var fileList = $('.k-upload-files', that.wrapper);\n                var options = that.options;\n                var template = options.template;\n                var templateData;\n                var removeEventArgs;\n                if (fileList.length === 0) {\n                    fileList = $('<ul class=\\'k-upload-files k-reset\\'></ul>').appendTo(that.wrapper);\n                    if (!that.options.showFileList) {\n                        fileList.hide();\n                    }\n                    that.wrapper.removeClass('k-upload-empty');\n                }\n                existingFileEntries = $('.k-file', fileList);\n                if (!template) {\n                    if (data.fileNames.length === 1) {\n                        fileEntry = that._prepareDefaultSingleFileEntryTemplate(data);\n                    } else {\n                        fileEntry = that._prepareDefaultMultipleFileEntriesTemplate(data);\n                    }\n                } else {\n                    templateData = that._prepareTemplateData(name, data);\n                    template = kendo.template(template);\n                    fileEntry = $('<li class=\\'k-file\\'>' + template(templateData) + '</li>');\n                    fileEntry.find('.k-upload-action').addClass('k-button');\n                    that.angular('compile', function () {\n                        return {\n                            elements: fileEntry,\n                            data: [templateData]\n                        };\n                    });\n                }\n                fileEntry.attr(kendo.attr('uid'), fileUid).appendTo(fileList).data(data);\n                if (!that._async) {\n                    $('.k-progress', fileEntry).width('100%');\n                }\n                if (!that.multiple && existingFileEntries.length > 0) {\n                    removeEventArgs = {\n                        files: existingFileEntries.data('fileNames'),\n                        headers: {}\n                    };\n                    if (!that.trigger(REMOVE, removeEventArgs)) {\n                        that._module.onRemove({ target: $(existingFileEntries, that.wrapper) }, removeEventArgs);\n                    }\n                }\n                return fileEntry;\n            },\n            _removeFileEntry: function (fileEntry) {\n                var that = this;\n                var fileList = fileEntry.closest('.k-upload-files');\n                var allFiles, allCompletedFiles, allInvalidFiles;\n                fileEntry.remove();\n                allFiles = $('.k-file', fileList);\n                allCompletedFiles = $('.k-file-success, .k-file-error', fileList);\n                allInvalidFiles = $('.k-file-invalid', fileList);\n                if (allCompletedFiles.length === allFiles.length || allInvalidFiles.length === allFiles.length) {\n                    this._hideUploadButton();\n                }\n                if (allFiles.length === 0) {\n                    fileList.remove();\n                    that.wrapper.addClass('k-upload-empty');\n                    that._hideHeaderUploadstatus();\n                } else {\n                    that._updateHeaderUploadStatus();\n                }\n            },\n            _fileAction: function (fileElement, actionKey, skipClear) {\n                var classDictionary = {\n                    remove: 'k-i-x',\n                    cancel: 'k-i-cancel',\n                    retry: 'k-i-retry',\n                    pause: 'k-i-pause-sm'\n                };\n                var iconsClassDictionary = {\n                    remove: 'k-i-close',\n                    cancel: 'k-i-close',\n                    retry: 'k-i-reload-sm',\n                    pause: 'k-i-pause-sm'\n                };\n                var firstActionButton;\n                if (!classDictionary.hasOwnProperty(actionKey)) {\n                    return;\n                }\n                if (!skipClear) {\n                    this._clearFileAction(fileElement);\n                }\n                if (!this.options.template) {\n                    if (!skipClear) {\n                        fileElement.find('.k-upload-status .k-upload-action').remove();\n                    }\n                    fileElement.find('.k-upload-status').append(this._renderAction(classDictionary[actionKey], this.localization[actionKey], iconsClassDictionary[actionKey]));\n                } else {\n                    firstActionButton = fileElement.find('.k-upload-action').first();\n                    if (!firstActionButton.find('.k-icon').length) {\n                        firstActionButton.addClass('k-button').append('<span class=\\'k-icon ' + iconsClassDictionary[actionKey] + ' ' + classDictionary[actionKey] + '\\' title=\\'' + this.localization[actionKey] + '\\'' + 'aria-label=\\'' + this.localization[actionKey] + '\\'></span>').show();\n                    } else if (firstActionButton.next('.k-upload-action').length) {\n                        firstActionButton.next('.k-upload-action').addClass('k-button').append('<span class=\\'k-icon ' + iconsClassDictionary[actionKey] + ' ' + classDictionary[actionKey] + '\\' title=\\'' + this.localization[actionKey] + '\\'' + 'aria-label=\\'' + this.localization[actionKey] + '\\'></span>').show();\n                    }\n                }\n            },\n            _fileState: function (fileEntry, stateKey) {\n                var localization = this.localization, states = {\n                        uploading: { text: localization.statusUploading },\n                        uploaded: { text: localization.statusUploaded },\n                        failed: { text: localization.statusFailed }\n                    }, currentState = states[stateKey];\n                if (currentState) {\n                    $('span.k-file-state', fileEntry).text(currentState.text);\n                }\n            },\n            _renderAction: function (actionClass, actionText, iconClass) {\n                if (actionClass !== '') {\n                    return $('<button type=\\'button\\' class=\\'k-button k-upload-action\\' aria-label=\\'' + actionText + '\\'>' + '<span class=\\'k-icon ' + iconClass + ' ' + actionClass + '\\' title=\\'' + actionText + '\\'></span>' + '</button>').on('focus', function () {\n                        $(this).addClass('k-state-focused');\n                    }).on('blur', function () {\n                        $(this).removeClass('k-state-focused');\n                    });\n                } else {\n                    return $('<button type=\\'button\\' class=\\'k-button\\'>' + actionText + '</button>');\n                }\n            },\n            _clearFileAction: function (fileElement) {\n                $('.k-upload-action', fileElement).empty().hide();\n            },\n            _onFileAction: function (e) {\n                var that = this;\n                if (!that.wrapper.hasClass('k-state-disabled')) {\n                    var button = $(e.target).closest('.k-upload-action');\n                    var icon = button.find('.k-icon');\n                    var fileEntry = button.closest('.k-file');\n                    var files = fileEntry.data('fileNames');\n                    var hasValidationErrors = that._filesContainValidationErrors(files);\n                    var eventArgs = {\n                        files: files,\n                        headers: {}\n                    };\n                    that._retryClicked = false;\n                    if (icon.hasClass('k-i-x')) {\n                        if (!that.trigger(REMOVE, eventArgs)) {\n                            that._module.onRemove({ target: $(fileEntry, that.wrapper) }, eventArgs, !hasValidationErrors);\n                        }\n                    } else if (icon.hasClass('k-i-cancel')) {\n                        that.trigger(CANCEL, eventArgs);\n                        that._module.onCancel({ target: $(fileEntry, that.wrapper) });\n                        that._checkAllComplete();\n                        that._updateHeaderUploadStatus();\n                    } else if (icon.hasClass('k-i-pause-sm')) {\n                        that.trigger(PAUSE, eventArgs);\n                        that.pause(fileEntry);\n                        that._updateHeaderUploadStatus();\n                    } else if (icon.hasClass('k-i-play-sm')) {\n                        that.trigger(RESUME, eventArgs);\n                        that.resume(fileEntry);\n                    } else if (icon.hasClass('k-i-retry')) {\n                        $('.k-i-warning', fileEntry).remove();\n                        $('.k-progress', fileEntry).finish().show();\n                        that._module.onRetry({ target: $(fileEntry, that.wrapper) });\n                        that._retryClicked = true;\n                    }\n                }\n                return false;\n            },\n            _onUploadSelected: function () {\n                var that = this;\n                var wrapper = that.wrapper;\n                if (!wrapper.hasClass('k-state-disabled')) {\n                    this._module.onSaveSelected();\n                }\n                return false;\n            },\n            _onClearSelected: function () {\n                var that = this;\n                var wrapper = that.wrapper;\n                var clearEventArgs = {};\n                if (!wrapper.hasClass('k-state-disabled') && !that.trigger(CLEAR, clearEventArgs)) {\n                    that.clearAllFiles();\n                }\n                return false;\n            },\n            _onFileProgress: function (e, percentComplete) {\n                var progressPct;\n                var warningPct;\n                if (percentComplete > 100) {\n                    percentComplete = 100;\n                }\n                if (!this.options.template) {\n                    progressPct = $('.k-upload-pct', e.target);\n                    warningPct = $('.k-i-warning', e.target);\n                    if (warningPct.length) {\n                        warningPct.removeClass('k-i-warning').removeClass('k-icon').addClass('k-upload-pct');\n                    } else if (progressPct.length === 0) {\n                        $('.k-upload-status', e.target).prepend('<span class=\\'k-upload-pct\\'></span>');\n                    }\n                    if (percentComplete !== 100) {\n                        $('.k-upload-pct', e.target).text(percentComplete + '%');\n                    } else {\n                        $('.k-upload-pct', e.target).remove();\n                    }\n                    $('.k-progress', e.target).width(percentComplete + '%');\n                } else {\n                    $('.k-progress', e.target).width(percentComplete + '%');\n                }\n                this.trigger(PROGRESS, {\n                    files: getFileEntry(e).data('fileNames'),\n                    percentComplete: percentComplete\n                });\n            },\n            _onUploadSuccess: function (e, response, xhr) {\n                var that = this;\n                var fileEntry = getFileEntry(e);\n                var prevented = that.trigger(SUCCESS, {\n                    files: fileEntry.data('fileNames'),\n                    response: response,\n                    operation: 'upload',\n                    XMLHttpRequest: xhr\n                });\n                if (prevented) {\n                    that._setUploadErrorState(fileEntry);\n                } else {\n                    that._fileState(fileEntry, 'uploaded');\n                    fileEntry.removeClass('k-file-progress').addClass('k-file-success');\n                    that._updateHeaderUploadStatus();\n                    if (that._supportsRemove()) {\n                        that._fileAction(fileEntry, REMOVE);\n                    } else {\n                        that._clearFileAction(fileEntry);\n                    }\n                }\n                that._hideUploadProgress(fileEntry);\n                that._checkAllComplete();\n            },\n            _onUploadError: function (e, xhr) {\n                var that = this;\n                var module = that._module;\n                var fileEntry = getFileEntry(e);\n                var fileUid = fileEntry.data('uid');\n                that._setUploadErrorState(fileEntry);\n                that.trigger(ERROR, {\n                    operation: 'upload',\n                    files: fileEntry.data('fileNames'),\n                    XMLHttpRequest: xhr\n                });\n                logToConsole('Server response: ' + xhr.responseText);\n                if (!that.options.async.chunkSize) {\n                    that._hideUploadProgress(fileEntry);\n                } else {\n                    if (module._decreasePosition) {\n                        module._decreasePosition(fileUid);\n                    }\n                }\n                that._checkAllComplete();\n                if (this.options.async.autoRetryAfter) {\n                    this._autoRetryAfter(fileEntry);\n                }\n            },\n            _autoRetryAfter: function (fileEntry) {\n                var that = this;\n                var retries = this._module.retries;\n                if (!retries) {\n                    return;\n                }\n                if (!retries[fileEntry.data('uid')]) {\n                    retries[fileEntry.data('uid')] = 1;\n                }\n                if (retries[fileEntry.data('uid')] <= this.options.async.maxAutoRetries) {\n                    retries[fileEntry.data('uid')]++;\n                    setTimeout(function () {\n                        that._module.performUpload(fileEntry);\n                    }, this.options.async.autoRetryAfter);\n                }\n            },\n            _setUploadErrorState: function (fileEntry) {\n                var that = this;\n                var uploadPercentage;\n                that._fileState(fileEntry, 'failed');\n                fileEntry.removeClass('k-file-progress').addClass('k-file-error');\n                that._updateUploadProgress(fileEntry);\n                uploadPercentage = $('.k-upload-pct', fileEntry);\n                if (uploadPercentage.length > 0) {\n                    if (!uploadPercentage.parent().find('.k-i-warning').length) {\n                        uploadPercentage.removeClass('k-upload-pct').addClass('k-icon k-i-warning');\n                    }\n                    uploadPercentage.empty();\n                } else {\n                    $('.k-upload-status', fileEntry).prepend('<span class=\\'k-icon k-i-warning\\'></span>');\n                }\n                this._updateHeaderUploadStatus();\n                this._fileAction(fileEntry, 'retry');\n                this._fileAction(fileEntry, REMOVE, true);\n                if (that._retryClicked) {\n                    fileEntry.find('.k-i-retry').parent().focus();\n                }\n            },\n            _updateUploadProgress: function (fileEntry) {\n                var that = this;\n                if (!that.options.async.chunkSize) {\n                    $('.k-progress', fileEntry).width('100%');\n                } else {\n                    var fileUid = fileEntry.data('uid');\n                    if (that._module.metaData) {\n                        var fileMetaData = that._module.metaData[fileUid];\n                        if (fileMetaData) {\n                            var percentComplete = fileMetaData.totalChunks ? Math.round(fileMetaData.chunkIndex / fileMetaData.totalChunks * 100) : 100;\n                            that._onFileProgress({ target: $(fileEntry, that.wrapper) }, percentComplete);\n                        }\n                    }\n                }\n            },\n            _hideUploadProgress: function (fileEntry) {\n                $('.k-progress', fileEntry).delay(PROGRESSHIDEDELAY).fadeOut(PROGRESSHIDEDURATION, function () {\n                    $(this).css('width', '0%');\n                });\n            },\n            _showUploadButton: function () {\n                var that = this;\n                var uploadButton = $('.k-upload-selected', that.wrapper);\n                var clearButton = $('.k-clear-selected', that.wrapper);\n                if (uploadButton.length === 0) {\n                    uploadButton = that._renderAction('', this.localization.uploadSelectedFiles).addClass('k-upload-selected');\n                    clearButton = that._renderAction('', this.localization.clearSelectedFiles).addClass('k-clear-selected');\n                }\n                this.wrapper.append(clearButton, uploadButton);\n            },\n            _hideUploadButton: function () {\n                $('.k-upload-selected, .k-clear-selected', this.wrapper).remove();\n            },\n            _showHeaderUploadStatus: function (isUploading) {\n                var that = this;\n                var localization = that.localization;\n                var dropZone = $('.k-dropzone', that.wrapper);\n                var headerUploadStatus = $('.k-upload-status-total', that.wrapper);\n                if (headerUploadStatus.length !== 0) {\n                    headerUploadStatus.remove();\n                }\n                headerUploadStatus = '<strong class=\"k-upload-status k-upload-status-total\"><span class=\"k-icon\"></span></strong>';\n                if (isUploading) {\n                    headerUploadStatus = $(headerUploadStatus).append(localization.headerStatusUploading);\n                    headerUploadStatus.find('.k-icon').addClass(headerStatusIcon.loading);\n                } else {\n                    headerUploadStatus = $(headerUploadStatus).append(localization.headerStatusUploaded);\n                    headerUploadStatus.find('.k-icon').addClass(headerStatusIcon.warning);\n                }\n                if (dropZone.length > 0) {\n                    dropZone.append(headerUploadStatus);\n                } else {\n                    $('.k-upload-button', that.wrapper).after(headerUploadStatus);\n                }\n            },\n            _updateHeaderUploadStatus: function () {\n                var that = this;\n                var headerUploadStatus = $('.k-upload-status-total', this.wrapper);\n                var currentlyUploading = $('.k-file', that.wrapper).not('.k-file-success, .k-file-error, .k-file-invalid');\n                var currentlyInvalid = $('.k-file-invalid', that.wrapper);\n                var currentlyFailed = $('.k-file-error', that.wrapper);\n                var currentlyPaused = $('.k-file', that.wrapper).find('.k-i-play-sm');\n                var failedUploads, headerUploadStatusIcon;\n                if (currentlyPaused.length && (currentlyPaused.length === currentlyUploading.length || !that.options.async.concurrent)) {\n                    headerUploadStatusIcon = $('.k-icon', headerUploadStatus).removeClass().addClass('k-icon').addClass('k-i-pause-sm');\n                    headerUploadStatus.html(headerUploadStatusIcon).append(that.localization.headerStatusPaused);\n                } else if (currentlyUploading.length === 0 || currentlyInvalid.length > 0 || currentlyFailed.length > 0) {\n                    failedUploads = $('.k-file.k-file-error, .k-file.k-file-invalid', that.wrapper);\n                    headerUploadStatus = $('.k-upload-status-total', that.wrapper);\n                    headerUploadStatusIcon = $('.k-icon', headerUploadStatus).removeClass().addClass('k-icon').addClass(failedUploads.length !== 0 ? headerStatusIcon.warning : headerStatusIcon.success);\n                    headerUploadStatus.html(headerUploadStatusIcon).append(that.localization.headerStatusUploaded);\n                }\n            },\n            _hideHeaderUploadstatus: function () {\n                $('.k-upload-status-total', this.wrapper).remove();\n            },\n            _onParentFormSubmit: function () {\n                var upload = this, element = upload.element;\n                if (typeof this._module.onAbort !== 'undefined') {\n                    this._module.onAbort();\n                }\n                if (!element.value) {\n                    var input = $(element);\n                    input.attr('disabled', 'disabled');\n                    window.setTimeout(function () {\n                        input.removeAttr('disabled');\n                    }, 0);\n                }\n            },\n            _onParentFormReset: function () {\n                $('.k-upload-files', this.wrapper).remove();\n            },\n            _supportsFormData: function () {\n                return typeof FormData != 'undefined';\n            },\n            _supportsMultiple: function () {\n                var windows = this._userAgent().indexOf('Windows') > -1;\n                return !kendo.support.browser.opera && !(kendo.support.browser.safari && windows);\n            },\n            _supportsDrop: function () {\n                var userAgent = this._userAgent().toLowerCase();\n                var isChrome = /chrome/.test(userAgent);\n                var isSafari = !isChrome && /safari/.test(userAgent);\n                var isWindowsSafari = isSafari && /windows/.test(userAgent);\n                return !isWindowsSafari && this._supportsFormData() && this.options.async.saveUrl;\n            },\n            _userAgent: function () {\n                return navigator.userAgent;\n            },\n            _setupDropZone: function () {\n                var that = this;\n                var ns = that._ns;\n                var dropZone = $('.k-dropzone', that.wrapper).on('dragenter' + ns, stopEvent).on('dragover' + ns, function (e) {\n                    e.preventDefault();\n                }).on('drop' + ns, $.proxy(that._onDrop, that));\n                if (!dropZone.find('.k-dropzone-hint').length) {\n                    dropZone.append($('<em class=\\'k-dropzone-hint\\'>' + that.localization.dropFilesHere + '</em>'));\n                }\n                bindDragEventWrappers(dropZone, ns, function () {\n                    if (!dropZone.closest('.k-upload').hasClass('k-state-disabled')) {\n                        dropZone.addClass('k-dropzone-hovered');\n                    }\n                }, function () {\n                    dropZone.removeClass('k-dropzone-hovered');\n                });\n                that._bindDocumentDragEventWrappers(dropZone);\n            },\n            _setupCustomDropZone: function () {\n                var that = this;\n                var dropZone = $(that.options.dropZone);\n                if (!that.wrapper.find('.k-dropzone-hint').length) {\n                    $('.k-dropzone', that.wrapper).append($('<em class=\\'k-dropzone-hint\\'>' + that.localization.dropFilesHere + '</em>'));\n                }\n                var ns = that._ns;\n                dropZone.on('dragenter' + ns, stopEvent).on('dragover' + ns, function (e) {\n                    e.preventDefault();\n                }).on('drop' + ns, $.proxy(that._onDrop, that));\n                bindDragEventWrappers(dropZone, ns, function (e) {\n                    if (!that.wrapper.hasClass('k-state-disabled')) {\n                        dropZone.removeClass('k-dropzone-hovered');\n                        dropZone.addClass('k-dropzone-hovered');\n                        $(e.target).addClass('k-dropzone-hovered');\n                    }\n                }, function () {\n                    dropZone.removeClass('k-dropzone-hovered');\n                    dropZone.find('.k-dropzone-hovered').removeClass('k-dropzone-hovered');\n                });\n                that._bindDocumentDragEventWrappers(dropZone);\n            },\n            _bindDocumentDragEventWrappers: function (dropZone) {\n                var that = this;\n                var ns = that._ns;\n                bindDragEventWrappers($(document), ns, function () {\n                    if (!that.wrapper.hasClass('k-state-disabled')) {\n                        dropZone.addClass('k-dropzone-active');\n                        dropZone.closest('.k-upload').removeClass('k-upload-empty');\n                    }\n                }, function () {\n                    dropZone.removeClass('k-dropzone-active');\n                    if ($('li.k-file', dropZone.closest('.k-upload')).length === 0) {\n                        dropZone.closest('.k-upload').addClass('k-upload-empty');\n                    }\n                });\n            },\n            _toggleDropZone: function () {\n                var that = this, dropZone = that.options.dropZone;\n                if (!that._supportsDrop()) {\n                    return;\n                }\n                $(dropZone).off(that._ns);\n                $('.k-dropzone', that.wrapper).off(that._ns);\n                if (dropZone !== '') {\n                    that._setupCustomDropZone();\n                } else {\n                    that._setupDropZone();\n                }\n            },\n            _supportsRemove: function () {\n                return !!this.options.async.removeUrl;\n            },\n            _submitRemove: function (fileNames, eventArgs, onSuccess, onError) {\n                var upload = this, removeField = upload.options.async.removeField || 'fileNames', params = $.extend(eventArgs.data, antiForgeryTokens());\n                params[removeField] = fileNames;\n                jQuery.ajax({\n                    type: this.options.async.removeVerb,\n                    dataType: 'json',\n                    dataFilter: normalizeJSON,\n                    url: this.options.async.removeUrl,\n                    traditional: true,\n                    data: params,\n                    headers: eventArgs.headers,\n                    success: onSuccess,\n                    error: onError,\n                    xhrFields: { withCredentials: this.options.async.withCredentials }\n                });\n            },\n            _wrapInput: function (input) {\n                var that = this;\n                var options = that.options;\n                input.wrap('<div class=\\'k-widget k-upload\\'><div class=\\'k-dropzone\\'><div class=\\'k-button k-upload-button\\' aria-label=\\'' + this.localization.select + '\\'></div></div></div>');\n                if (!options.async.saveUrl) {\n                    input.closest('.k-upload').addClass('k-upload-sync');\n                } else {\n                    input.closest('.k-upload').addClass('k-upload-async');\n                }\n                input.closest('.k-upload').addClass('k-upload-empty');\n                input.closest('.k-button').append('<span>' + this.localization.select + '</span>');\n                return input.closest('.k-upload');\n            },\n            _checkAllComplete: function () {\n                if ($('.k-file.k-file-progress', this.wrapper).length === 0) {\n                    this.trigger(COMPLETE);\n                }\n            },\n            _inputFiles: function (sourceInput) {\n                return inputFiles(sourceInput);\n            }\n        });\n        var syncUploadModule = function (upload) {\n            this.name = 'syncUploadModule';\n            this.element = upload.wrapper;\n            this.upload = upload;\n            this.element.closest('form').attr('enctype', 'multipart/form-data').attr('encoding', 'multipart/form-data');\n        };\n        syncUploadModule.prototype = {\n            onSelect: function (e, files) {\n                var upload = this.upload;\n                var sourceInput = $(e.target);\n                var filesContainErrors = upload._filesContainValidationErrors(files);\n                upload._addInput(sourceInput);\n                var fileData = { 'fileNames': files };\n                if (filesContainErrors) {\n                    sourceInput.remove();\n                } else {\n                    fileData.relatedInput = sourceInput;\n                }\n                var file = upload._enqueueFile(getFileName(sourceInput), fileData);\n                if (filesContainErrors) {\n                    upload._hideUploadProgress(file);\n                }\n                upload._fileAction(file, REMOVE);\n            },\n            onRemove: function (e) {\n                var fileEntry = getFileEntry(e);\n                var relatedInput = fileEntry.data('relatedInput');\n                if (relatedInput) {\n                    relatedInput.remove();\n                }\n                this.upload._removeFileEntry(fileEntry);\n            }\n        };\n        var iframeUploadModule = function (upload) {\n            this.name = 'iframeUploadModule';\n            this.element = upload.wrapper;\n            this.upload = upload;\n            this.iframes = [];\n        };\n        Upload._frameId = 0;\n        iframeUploadModule.prototype = {\n            onSelect: function (e, files) {\n                var upload = this.upload;\n                var sourceInput = $(e.target);\n                var hasValidationErrors = upload._filesContainValidationErrors(files);\n                var fileEntry = this.prepareUpload(sourceInput, files, hasValidationErrors);\n                if (upload.options.async.autoUpload) {\n                    if (!hasValidationErrors) {\n                        this.performUpload(fileEntry);\n                    } else {\n                        upload._fileAction(fileEntry, REMOVE);\n                        upload._showHeaderUploadStatus(false);\n                    }\n                } else {\n                    upload._fileAction(fileEntry, REMOVE);\n                    if (!hasValidationErrors) {\n                        upload._showUploadButton();\n                    } else {\n                        upload._updateHeaderUploadStatus();\n                    }\n                }\n                if (hasValidationErrors) {\n                    upload._hideUploadProgress(fileEntry);\n                }\n            },\n            prepareUpload: function (sourceInput, files, hasValidationErrors) {\n                var upload = this.upload;\n                var activeInput = $(upload.element);\n                var name = upload.options.async.saveField || sourceInput.attr('name');\n                var fileEntry, fileData, iframe, form;\n                upload._addInput(sourceInput);\n                sourceInput.attr('name', name);\n                if (!hasValidationErrors) {\n                    iframe = this.createFrame(upload.name + '_' + Upload._frameId++);\n                    this.registerFrame(iframe);\n                    form = this.createForm(upload.options.async.saveUrl, iframe.attr('name')).append(activeInput);\n                    fileData = {\n                        'frame': iframe,\n                        'relatedInput': activeInput,\n                        'fileNames': files\n                    };\n                } else {\n                    sourceInput.remove();\n                    fileData = { 'fileNames': files };\n                }\n                fileEntry = upload._enqueueFile(getFileName(sourceInput), fileData);\n                if (iframe) {\n                    iframe.data({\n                        'form': form,\n                        'file': fileEntry\n                    });\n                }\n                return fileEntry;\n            },\n            performUpload: function (fileEntry) {\n                var e = { files: fileEntry.data('fileNames') };\n                var iframe = fileEntry.data('frame');\n                var upload = this.upload;\n                if (!upload.trigger(UPLOAD, e)) {\n                    upload._hideUploadButton();\n                    upload._showHeaderUploadStatus(true);\n                    iframe.appendTo(document.body);\n                    var form = iframe.data('form').attr('action', upload.options.async.saveUrl).appendTo(document.body);\n                    e.data = $.extend({}, e.data, antiForgeryTokens());\n                    for (var key in e.data) {\n                        var dataInput = form.find('input[name=\\'' + key + '\\']');\n                        if (dataInput.length === 0) {\n                            dataInput = $('<input>', {\n                                type: 'hidden',\n                                name: key\n                            }).prependTo(form);\n                        }\n                        dataInput.val(e.data[key]);\n                    }\n                    upload._fileAction(fileEntry, CANCEL);\n                    upload._fileState(fileEntry, 'uploading');\n                    $(fileEntry).removeClass('k-file-error').addClass('k-file-progress');\n                    iframe.one('load', $.proxy(this.onIframeLoad, this));\n                    form[0].submit();\n                } else {\n                    upload._removeFileEntry(iframe.data('file'));\n                    this.cleanupFrame(iframe);\n                    this.unregisterFrame(iframe);\n                }\n            },\n            onSaveSelected: function () {\n                var module = this;\n                var upload = module.upload;\n                $('.k-file', this.element).each(function () {\n                    var fileEntry = $(this);\n                    var started = isFileUploadStarted(fileEntry);\n                    var hasValidationErrors = upload._filesContainValidationErrors(fileEntry.data('fileNames'));\n                    if (!started && !hasValidationErrors) {\n                        module.performUpload(fileEntry);\n                    }\n                });\n            },\n            onIframeLoad: function (e) {\n                var iframe = $(e.target), responseText;\n                try {\n                    responseText = iframe.contents().text();\n                } catch (ex) {\n                    responseText = 'Error trying to get server response: ' + ex;\n                }\n                this.processResponse(iframe, responseText);\n            },\n            processResponse: function (iframe, responseText) {\n                var fileEntry = iframe.data('file'), module = this, fakeXHR = { responseText: responseText };\n                tryParseJSON(responseText, function (jsonResult) {\n                    $.extend(fakeXHR, {\n                        statusText: 'OK',\n                        status: '200'\n                    });\n                    module.upload._onFileProgress({ target: $(fileEntry, module.upload.wrapper) }, 100);\n                    module.upload._onUploadSuccess({ target: $(fileEntry, module.upload.wrapper) }, jsonResult, fakeXHR);\n                    module.cleanupFrame(iframe);\n                    module.unregisterFrame(iframe);\n                }, function () {\n                    $.extend(fakeXHR, {\n                        statusText: 'error',\n                        status: '500'\n                    });\n                    module.upload._onUploadError({ target: $(fileEntry, module.upload.wrapper) }, fakeXHR);\n                });\n            },\n            onCancel: function (e) {\n                var iframe = $(e.target).data('frame');\n                this.stopFrameSubmit(iframe);\n                this.cleanupFrame(iframe);\n                this.unregisterFrame(iframe);\n                this.upload._removeFileEntry(iframe.data('file'));\n            },\n            onRetry: function (e) {\n                var fileEntry = getFileEntry(e);\n                this.performUpload(fileEntry);\n            },\n            onRemove: function (e, eventArgs, shouldSendRemoveRequest) {\n                var module = this;\n                var upload = module.upload;\n                var fileEntry = getFileEntry(e);\n                var iframe = fileEntry.data('frame');\n                if (iframe) {\n                    module.unregisterFrame(iframe);\n                    upload._removeFileEntry(fileEntry);\n                    module.cleanupFrame(iframe);\n                } else {\n                    if (fileEntry.hasClass('k-file-success')) {\n                        removeUploadedFile(fileEntry, upload, eventArgs, shouldSendRemoveRequest);\n                    } else {\n                        upload._removeFileEntry(fileEntry);\n                    }\n                }\n            },\n            onAbort: function () {\n                var element = this.element, module = this;\n                $.each(this.iframes, function () {\n                    $('input', this.data('form')).appendTo(element);\n                    module.stopFrameSubmit(this[0]);\n                    this.data('form').remove();\n                    this.remove();\n                });\n                this.iframes = [];\n            },\n            createFrame: function (id) {\n                return $('<iframe' + ' name=\\'' + id + '\\'' + ' id=\\'' + id + '\\'' + ' style=\\'display:none;\\' />');\n            },\n            createForm: function (action, target) {\n                return $('<form enctype=\\'multipart/form-data\\' method=\\'POST\\'' + ' action=\\'' + action + '\\'' + ' target=\\'' + target + '\\'' + '/>');\n            },\n            stopFrameSubmit: function (frame) {\n                if (typeof frame.stop != 'undefined') {\n                    frame.stop();\n                } else if (frame.document) {\n                    frame.document.execCommand('Stop');\n                }\n            },\n            registerFrame: function (frame) {\n                this.iframes.push(frame);\n            },\n            unregisterFrame: function (frame) {\n                this.iframes = $.grep(this.iframes, function (value) {\n                    return value.attr('name') != frame.attr('name');\n                });\n            },\n            cleanupFrame: function (frame) {\n                var form = frame.data('form');\n                frame.data('file').data('frame', null);\n                setTimeout(function () {\n                    form.remove();\n                    frame.remove();\n                }, 1);\n            }\n        };\n        var formDataUploadModule = function (upload) {\n            this.name = 'formDataUploadModule';\n            this.element = upload.wrapper;\n            this.upload = upload;\n            this.position = {};\n            this.metaData = {};\n            this.cancelled = {};\n            this.resume = {};\n            this.paused = {};\n            this.retries = {};\n        };\n        formDataUploadModule.prototype = {\n            onSelect: function (e, files) {\n                var upload = this.upload;\n                var module = this;\n                var sourceElement = $(e.target);\n                var fileEntries = this.prepareUpload(sourceElement, files);\n                var hasValidationErrors;\n                var prev;\n                $.each(fileEntries, function (index) {\n                    hasValidationErrors = upload._filesContainValidationErrors($(this.data('fileNames')));\n                    if (upload.options.async.autoUpload) {\n                        if (!hasValidationErrors) {\n                            if (upload.options.async.chunkSize) {\n                                module.prepareChunk(this);\n                                prev = this.prev();\n                                if (upload.options.async.concurrent || index === 0 && !prev.length || index === 0 && prev.hasClass('k-file-success')) {\n                                    module.performUpload(this);\n                                }\n                            } else {\n                                module.performUpload(this);\n                            }\n                        } else {\n                            upload._fileAction(this, REMOVE);\n                            upload._showHeaderUploadStatus(false);\n                        }\n                    } else {\n                        upload._fileAction(this, REMOVE);\n                        if (!hasValidationErrors) {\n                            upload._showUploadButton();\n                            this.addClass('k-toupload');\n                        } else {\n                            upload._updateHeaderUploadStatus();\n                        }\n                    }\n                    if (hasValidationErrors) {\n                        upload._hideUploadProgress(this);\n                    }\n                });\n            },\n            prepareUpload: function (sourceElement, files) {\n                var fileEntries = this.enqueueFiles(files);\n                if (sourceElement.is('input')) {\n                    $.each(fileEntries, function () {\n                        $(this).data('relatedInput', sourceElement);\n                    });\n                    sourceElement.data('relatedFileEntries', fileEntries);\n                    this.upload._addInput(sourceElement);\n                }\n                return fileEntries;\n            },\n            enqueueFiles: function (files) {\n                var upload = this.upload;\n                var name;\n                var i;\n                var filesLength = files.length;\n                var currentFile;\n                var fileEntry;\n                var fileEntries = [];\n                if (upload.options.async.batch === true) {\n                    name = $.map(files, function (file) {\n                        return file.name;\n                    }).join(', ');\n                    if (upload.directory || upload.options.directoryDrop) {\n                        $(files).each(function () {\n                            if (this.rawFile.webkitRelativePath || this.rawFile.relativePath) {\n                                this.name = this.rawFile.webkitRelativePath || this.rawFile.relativePath;\n                            }\n                        });\n                    }\n                    fileEntry = upload._enqueueFile(name, { fileNames: files });\n                    fileEntry.data('files', files);\n                    fileEntries.push(fileEntry);\n                } else {\n                    for (i = 0; i < filesLength; i++) {\n                        currentFile = files[i];\n                        name = currentFile.name;\n                        if (upload.directory || upload.options.directoryDrop) {\n                            if (currentFile.rawFile.webkitRelativePath || currentFile.rawFile.relativePath) {\n                                currentFile.name = currentFile.rawFile.webkitRelativePath || currentFile.rawFile.relativePath;\n                            }\n                        }\n                        fileEntry = upload._enqueueFile(name, { fileNames: [currentFile] });\n                        fileEntry.data('files', [currentFile]);\n                        fileEntries.push(fileEntry);\n                    }\n                }\n                return fileEntries;\n            },\n            performUpload: function (fileEntry) {\n                var upload = this.upload, formData = this.createFormData(), xhr = this.createXHR(), e = {\n                        files: fileEntry.data('fileNames'),\n                        XMLHttpRequest: xhr\n                    }, files;\n                if (!upload.trigger(UPLOAD, e)) {\n                    if (fileEntry.find('.k-i-cancel').length === 0) {\n                        if (upload.options.async.chunkSize) {\n                            upload._fileAction(fileEntry, PAUSE);\n                        }\n                        upload._fileAction(fileEntry, CANCEL, upload.options.async.chunkSize);\n                    }\n                    if (!upload.wrapper.find('.k-toupload').length) {\n                        upload._hideUploadButton();\n                    }\n                    upload._showHeaderUploadStatus(true);\n                    if (e.formData) {\n                        formData = e.formData;\n                    } else {\n                        e.data = $.extend({}, e.data, antiForgeryTokens());\n                        for (var key in e.data) {\n                            formData.append(key, e.data[key]);\n                        }\n                        files = fileEntry.data('files');\n                        if (files) {\n                            this.populateFormData(formData, files);\n                        }\n                    }\n                    upload._fileState(fileEntry, 'uploading');\n                    $(fileEntry).removeClass('k-file-error').addClass('k-file-progress');\n                    if (upload.options.async.useArrayBuffer && window.FileReader) {\n                        this._readFile(upload.options.async.saveUrl, formData, fileEntry, xhr);\n                    } else {\n                        this.postFormData(upload.options.async.saveUrl, formData, fileEntry, xhr);\n                    }\n                } else {\n                    this.removeFileEntry(fileEntry);\n                }\n            },\n            _readFile: function (saveUrl, formData, fileEntry, xhr) {\n                var that = this;\n                var upload = that.upload;\n                var file = fileEntry.data('files')[0];\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    try {\n                        if (!that.fileArrayBuffer) {\n                            that.fileArrayBuffer = e.target.result;\n                        } else {\n                            that.fileArrayBuffer = that._appendBuffer(that.fileArrayBuffer, e.target.result);\n                        }\n                    } catch (err) {\n                        upload._onUploadError({ target: $(fileEntry, upload.wrapper) }, xhr);\n                        return;\n                    }\n                    if (that.position[file.uid] > file.size) {\n                        that.postFormData(upload.options.async.saveUrl, that.fileArrayBuffer, fileEntry, xhr);\n                        that.fileArrayBuffer = null;\n                    } else {\n                        that._readFile(saveUrl, formData, fileEntry, xhr);\n                    }\n                };\n                reader.onerror = function () {\n                    upload._onUploadError({ target: $(fileEntry, upload.wrapper) }, xhr);\n                };\n                reader.readAsArrayBuffer(that._getCurrentChunk(file.rawFile, file.uid));\n            },\n            _appendBuffer: function (buffer1, buffer2) {\n                var tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\n                tmp.set(new Uint8Array(buffer1), 0);\n                tmp.set(new Uint8Array(buffer2), buffer1.byteLength);\n                return tmp.buffer;\n            },\n            onSaveSelected: function () {\n                var module = this;\n                var upload = module.upload;\n                $('.k-toupload', this.element).filter(function () {\n                    var fileEntry = $(this);\n                    var started = isFileUploadStarted(fileEntry);\n                    var hasValidationErrors = upload._filesContainValidationErrors(fileEntry.data('fileNames'));\n                    return !started && !hasValidationErrors;\n                }).each(function (index) {\n                    var fileEntry = $(this);\n                    var prevEntry = fileEntry.prev();\n                    fileEntry.removeClass('k-toupload');\n                    if (upload.options.async.chunkSize) {\n                        module.prepareChunk(fileEntry);\n                        if (upload.options.async.concurrent || index === 0 && !prevEntry.length || (index === 0 && prevEntry.hasClass('k-file-success') || prevEntry.hasClass('k-file-error'))) {\n                            module.performUpload(fileEntry);\n                        }\n                    } else {\n                        module.performUpload(fileEntry);\n                    }\n                });\n            },\n            onCancel: function (e) {\n                var fileEntry = getFileEntry(e);\n                if (this.upload.options.async.chunkSize) {\n                    this.cancelled[fileEntry.data('uid')] = true;\n                }\n                this.stopUploadRequest(fileEntry);\n                this.removeFileEntry(fileEntry);\n            },\n            onPause: function (e) {\n                var fileEntry = getFileEntry(e);\n                var fileUid = fileEntry.data('uid');\n                var async = this.upload.options.async;\n                if (async.chunkSize) {\n                    this.retries[fileUid] = async.maxAutoRetries + 1;\n                    this.paused[fileUid] = true;\n                    this.resume[fileUid] = false;\n                }\n            },\n            onResume: function (e) {\n                var fileEntry = getFileEntry(e);\n                var fileUid = fileEntry.data('uid');\n                if (this.upload.options.async.chunkSize) {\n                    delete this.paused[fileUid];\n                    this.resume[fileUid] = true;\n                    this.retries[fileEntry.data('uid')] = 1;\n                    this._increaseChunkIndex(fileUid);\n                    this.performUpload(fileEntry);\n                }\n            },\n            onRetry: function (e) {\n                var fileEntry = getFileEntry(e);\n                var async = this.upload.options.async;\n                if (async.chunkSize) {\n                    this.retries[fileEntry.data('uid')] = async.maxAutoRetries + 1;\n                    delete this.paused[fileEntry.data('uid')];\n                }\n                this.performUpload(fileEntry);\n            },\n            onRemove: function (e, eventArgs, shouldSendRemoveRequest) {\n                var module = this;\n                var upload = module.upload;\n                var fileEntry = getFileEntry(e);\n                var async = this.upload.options.async;\n                if (async.chunkSize) {\n                    this.retries[fileEntry.data('uid')] = async.maxAutoRetries + 1;\n                }\n                if (fileEntry.hasClass('k-file-success')) {\n                    removeUploadedFile(fileEntry, upload, eventArgs, shouldSendRemoveRequest);\n                } else {\n                    module.removeFileEntry(fileEntry);\n                }\n            },\n            createXHR: function () {\n                return new XMLHttpRequest();\n            },\n            postFormData: function (url, data, fileEntry, xhr) {\n                var module = this;\n                fileEntry.data('request', xhr);\n                xhr.addEventListener('load', function (e) {\n                    module.onRequestSuccess.call(module, e, fileEntry);\n                }, false);\n                xhr.addEventListener(ERROR, function (e) {\n                    module.onRequestError.call(module, e, fileEntry);\n                }, false);\n                xhr.upload.addEventListener('progress', function (e) {\n                    module.onRequestProgress.call(module, e, fileEntry);\n                }, false);\n                xhr.open('POST', url, true);\n                xhr.withCredentials = this.upload.options.async.withCredentials;\n                var accept = this.upload.options.async.accept;\n                if (accept) {\n                    xhr.setRequestHeader('Accept', accept);\n                }\n                xhr.send(data);\n            },\n            createFormData: function () {\n                return new FormData();\n            },\n            populateFormData: function (data, files) {\n                var chunk;\n                var i;\n                var length = files.length;\n                var uid;\n                var upload = this.upload;\n                if (upload.options.async.chunkSize) {\n                    uid = files[0].uid;\n                    chunk = this._getCurrentChunk(files[0].rawFile, uid);\n                    data.append(upload.options.async.saveField || upload.name, chunk);\n                    var serializedMetaData = JSON.stringify(this.metaData[uid]);\n                    data.append('metadata', serializedMetaData);\n                } else {\n                    for (i = 0; i < length; i++) {\n                        data.append(upload.options.async.saveField || upload.name, files[i].rawFile);\n                    }\n                }\n                return data;\n            },\n            onRequestSuccess: function (e, fileEntry) {\n                var xhr = e.target, module = this;\n                function raiseError() {\n                    module.upload._onUploadError({ target: $(fileEntry, module.upload.wrapper) }, xhr);\n                }\n                function parseSuccess(jsonResult) {\n                    var batch = module.upload.options.async.batch;\n                    var chunkSize = module.upload.options.async.chunkSize;\n                    var concurrent = module.upload.options.async.concurrent;\n                    var fileUid = jsonResult.fileUid;\n                    if (module.paused[fileUid] || module.cancelled[fileUid]) {\n                        return;\n                    }\n                    delete module.retries[fileUid];\n                    if (chunkSize && !batch && !jsonResult.uploaded) {\n                        module._increaseChunkIndex(fileUid);\n                        module.performUpload(fileEntry);\n                    } else if (chunkSize && !batch && !concurrent && fileEntry.next().length && !fileEntry.next().hasClass('k-toupload')) {\n                        module.upload._onFileProgress({ target: $(fileEntry, module.upload.wrapper) }, 100);\n                        module._resetChunkIndex(fileUid);\n                        module.upload._onUploadSuccess({ target: $(fileEntry, module.upload.wrapper) }, jsonResult, xhr);\n                        module.performUpload(fileEntry.next());\n                    } else {\n                        module.upload._onFileProgress({ target: $(fileEntry, module.upload.wrapper) }, 100);\n                        module.upload._onUploadSuccess({ target: $(fileEntry, module.upload.wrapper) }, jsonResult, xhr);\n                        module.cleanupFileEntry(fileEntry);\n                    }\n                }\n                if (xhr.status >= 200 && xhr.status <= 299) {\n                    tryParseJSON(xhr.responseText, parseSuccess, raiseError);\n                } else {\n                    raiseError();\n                }\n            },\n            onRequestError: function (e, fileEntry) {\n                var xhr = e.target;\n                this.upload._onUploadError({ target: $(fileEntry, this.upload.wrapper) }, xhr);\n            },\n            cleanupFileEntry: function (fileEntry) {\n                var relatedInput = fileEntry.data('relatedInput'), uploadComplete = true;\n                if (relatedInput) {\n                    $.each(relatedInput.data('relatedFileEntries') || [], function () {\n                        if (this.parent().length > 0 && this[0] != fileEntry[0]) {\n                            uploadComplete = uploadComplete && this.hasClass('k-file-success');\n                        }\n                    });\n                    if (uploadComplete) {\n                        relatedInput.remove();\n                    }\n                }\n            },\n            removeFileEntry: function (fileEntry) {\n                var chunkSize = this.upload.options.async.chunkSize;\n                var concurrent = this.upload.options.async.concurrent;\n                var isUploadButtonVisible = this.upload.wrapper.find('.k-upload-selected').length > 0;\n                this.cleanupFileEntry(fileEntry);\n                if (chunkSize && !concurrent && !isUploadButtonVisible) {\n                    if (fileEntry.next().length) {\n                        this.performUpload(fileEntry.next());\n                    }\n                }\n                this.upload._removeFileEntry(fileEntry);\n            },\n            onRequestProgress: function (e, fileEntry) {\n                var percentComplete = Math.round(e.loaded * 100 / e.total);\n                var fileUid = fileEntry.data('uid');\n                var fileMetaData;\n                if (this.upload.options.async.chunkSize) {\n                    fileMetaData = this.metaData[fileUid];\n                    percentComplete = fileMetaData && fileMetaData.totalChunks ? Math.round(fileMetaData.chunkIndex / fileMetaData.totalChunks * 100) : 100;\n                }\n                this.upload._onFileProgress({ target: $(fileEntry, this.upload.wrapper) }, percentComplete);\n            },\n            stopUploadRequest: function (fileEntry) {\n                fileEntry.data('request').abort();\n            },\n            prepareChunk: function (fileEntry) {\n                var file = fileEntry.data('files')[0];\n                var rawFile = file.rawFile;\n                var uid = file.uid;\n                var chunkSize = this.upload.options.async.chunkSize;\n                this.position[uid] = 0;\n                this.metaData[uid] = {\n                    chunkIndex: 0,\n                    contentType: rawFile.type,\n                    fileName: rawFile.name,\n                    relativePath: file.name,\n                    totalFileSize: rawFile.size,\n                    totalChunks: Math.ceil(rawFile.size / chunkSize),\n                    uploadUid: uid\n                };\n            },\n            _decreaseChunkIndex: function (uid) {\n                this.metaData[uid].chunkIndex--;\n            },\n            _increaseChunkIndex: function (uid) {\n                this.metaData[uid].chunkIndex++;\n            },\n            _resetChunkIndex: function (uid) {\n                this.metaData[uid].chunkIndex = 0;\n            },\n            _decreasePosition: function (uid) {\n                this.position[uid] -= this.upload.options.async.chunkSize;\n            },\n            _getCurrentChunk: function (file, uid) {\n                var oldPosition = this.position[uid];\n                var methodToInvoke;\n                var async = this.upload.options.async;\n                var chunkSize = async.chunkSize || async.bufferChunkSize;\n                if (!this.position[uid]) {\n                    this.position[uid] = 0;\n                }\n                this.position[uid] += chunkSize;\n                if (!!(methodToInvoke = this._getChunker(file))) {\n                    return file[methodToInvoke](oldPosition, this.position[uid]);\n                } else {\n                    return file;\n                }\n            },\n            _getChunker: function (file) {\n                if (file.slice) {\n                    return 'slice';\n                } else if (file.mozSlice) {\n                    return 'mozSlice';\n                } else if (file.webkitSlice) {\n                    return 'webkitSlice';\n                } else {\n                    return null;\n                }\n            }\n        };\n        function getFileName(input) {\n            return $.map(inputFiles(input), function (file) {\n                return file.name;\n            }).join(', ');\n        }\n        function inputFiles($input) {\n            var input = $input[0];\n            if (input.files) {\n                return getAllFileInfo(input.files);\n            } else {\n                return [{\n                        name: stripPath(input.value),\n                        extension: getFileExtension(input.value),\n                        size: null\n                    }];\n            }\n        }\n        function getAllFileInfo(rawFiles) {\n            return $.map(rawFiles, function (file) {\n                return getFileInfo(file);\n            });\n        }\n        function getFileInfo(rawFile) {\n            var fileName = rawFile.name || rawFile.fileName;\n            return {\n                name: kendo.htmlEncode(fileName),\n                extension: getFileExtension(fileName),\n                size: typeof rawFile.size == 'number' ? rawFile.size : rawFile.fileSize,\n                rawFile: rawFile\n            };\n        }\n        function getFileExtension(fileName) {\n            var matches = fileName.match(rFileExtension);\n            return matches ? matches[0] : '';\n        }\n        function stripPath(name) {\n            var slashIndex = name.lastIndexOf('\\\\');\n            return slashIndex != -1 ? name.substr(slashIndex + 1) : name;\n        }\n        function assignGuidToFiles(files, unique) {\n            var uid = kendo.guid();\n            return $.map(files, function (file) {\n                file.uid = unique ? kendo.guid() : uid;\n                return file;\n            });\n        }\n        function validateFiles(files, validationInfo) {\n            var allowedExtensions = parseAllowedExtensions(validationInfo.allowedExtensions);\n            var maxFileSize = validationInfo.maxFileSize;\n            var minFileSize = validationInfo.minFileSize;\n            for (var i = 0; i < files.length; i++) {\n                validateFileExtension(files[i], allowedExtensions);\n                validateFileSize(files[i], minFileSize, maxFileSize);\n            }\n        }\n        function parseAllowedExtensions(extensions) {\n            var allowedExtensions = $.map(extensions, function (ext) {\n                var parsedExt = ext.substring(0, 1) === '.' ? ext : '.' + ext;\n                return parsedExt.toLowerCase();\n            });\n            return allowedExtensions;\n        }\n        function validateFileExtension(file, allowedExtensions) {\n            if (allowedExtensions.length > 0) {\n                if (allowedExtensions.indexOf(file.extension.toLowerCase()) < 0) {\n                    file.validationErrors = file.validationErrors || [];\n                    if ($.inArray(INVALIDFILEEXTENSION, file.validationErrors) === -1) {\n                        file.validationErrors.push(INVALIDFILEEXTENSION);\n                    }\n                }\n            }\n        }\n        function validateFileSize(file, minFileSize, maxFileSize) {\n            if (minFileSize !== 0 && file.size < minFileSize) {\n                file.validationErrors = file.validationErrors || [];\n                if ($.inArray(INVALIDMINFILESIZE, file.validationErrors) === -1) {\n                    file.validationErrors.push(INVALIDMINFILESIZE);\n                }\n            }\n            if (maxFileSize !== 0 && file.size > maxFileSize) {\n                file.validationErrors = file.validationErrors || [];\n                if ($.inArray(INVALIDMAXFILESIZE, file.validationErrors) === -1) {\n                    file.validationErrors.push(INVALIDMAXFILESIZE);\n                }\n            }\n        }\n        function getTotalFilesSizeMessage(files) {\n            var totalSize = 0;\n            if (typeof files[0].size == 'number') {\n                for (var i = 0; i < files.length; i++) {\n                    if (files[i].size) {\n                        totalSize += files[i].size;\n                    }\n                }\n            } else {\n                return '';\n            }\n            totalSize /= 1024;\n            if (totalSize < 1024) {\n                return totalSize.toFixed(2) + ' KB';\n            } else {\n                return (totalSize / 1024).toFixed(2) + ' MB';\n            }\n        }\n        function shouldRemoveFileEntry(upload) {\n            return !upload.multiple && $('.k-file', upload.wrapper).length > 1;\n        }\n        function removeUploadedFile(fileEntry, upload, eventArgs, shouldSendRemoveRequest) {\n            if (!upload._supportsRemove()) {\n                if (shouldRemoveFileEntry(upload) || !shouldSendRemoveRequest) {\n                    upload._removeFileEntry(fileEntry);\n                }\n                return;\n            }\n            var files = fileEntry.data('fileNames');\n            var fileNames = $.map(files, function (file) {\n                return file.name;\n            });\n            if (shouldSendRemoveRequest === false) {\n                upload._removeFileEntry(fileEntry);\n                return;\n            }\n            upload._submitRemove(fileNames, eventArgs, function onSuccess(data, textStatus, xhr) {\n                var prevented = upload.trigger(SUCCESS, {\n                    operation: 'remove',\n                    files: files,\n                    response: data,\n                    XMLHttpRequest: xhr\n                });\n                if (!prevented) {\n                    upload._removeFileEntry(fileEntry);\n                }\n            }, function onError(xhr) {\n                if (shouldRemoveFileEntry(upload)) {\n                    upload._removeFileEntry(fileEntry);\n                }\n                upload.trigger(ERROR, {\n                    operation: 'remove',\n                    files: files,\n                    XMLHttpRequest: xhr\n                });\n                logToConsole('Server response: ' + xhr.responseText);\n            });\n        }\n        function tryParseJSON(input, onSuccess, onError) {\n            var success = false, json = '';\n            try {\n                json = $.parseJSON(normalizeJSON(input));\n                success = true;\n            } catch (e) {\n                onError();\n            }\n            if (success) {\n                onSuccess(json);\n            }\n        }\n        function normalizeJSON(input) {\n            if (typeof input === 'undefined' || input === '') {\n                input = '{}';\n            }\n            return input;\n        }\n        function stopEvent(e) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        function bindDragEventWrappers(element, namespace, onDragEnter, onDragLeave) {\n            var hideInterval, lastDrag;\n            element.on('dragenter' + namespace, function (e) {\n                onDragEnter(e);\n                lastDrag = new Date();\n                if (!hideInterval) {\n                    hideInterval = setInterval(function () {\n                        var sinceLastDrag = new Date() - lastDrag;\n                        if (sinceLastDrag > 100) {\n                            onDragLeave();\n                            clearInterval(hideInterval);\n                            hideInterval = null;\n                        }\n                    }, 100);\n                }\n            }).on('dragover' + namespace, function () {\n                lastDrag = new Date();\n            });\n        }\n        function isFileUploadStarted(fileEntry) {\n            return fileEntry.is('.k-file-progress, .k-file-success, .k-file-error');\n        }\n        function getFileEntry(e) {\n            return $(e.target).closest('.k-file');\n        }\n        kendo.ui.plugin(Upload);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}